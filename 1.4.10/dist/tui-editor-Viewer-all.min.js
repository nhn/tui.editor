/*!
 * tui-editor
 * @version 1.4.10
 * @author NHN FE Development Lab <dl_javascript@nhn.com> (https://nhn.github.io/tui.editor/)
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("tui-code-snippet"),require("to-mark"),require("tui-chart"),require("markdown-it"),require("highlight.js"),require("tui-color-picker"),require("plantuml-encoder")):"function"==typeof define&&define.amd?define(["jquery","tui-code-snippet","to-mark","tui-chart","markdown-it","highlight.js","tui-color-picker","plantuml-encoder"],t):"object"==typeof exports?exports.Editor=t(require("jquery"),require("tui-code-snippet"),require("to-mark"),require("tui-chart"),require("markdown-it"),require("highlight.js"),require("tui-color-picker"),require("plantuml-encoder")):(e.tui=e.tui||{},e.tui.Editor=t(e.$,e.tui.util,e.toMark,e.tui.chart,e.markdownit,e.hljs,e.tui.colorPicker,e.plantumlEncoder))}(window,(function(e,t,n,r,o,a,i,l){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=27)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0;try{r=n(!function(){var e=new Error("Cannot find module '../editor'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}if(!r)try{r=n(16)}catch(e){}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTableData=i,t.createCellIndexData=l;var r=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=[];return e.find("tr").each((function(e,n){var a=0;t[e]=t[e]||[],(0,r.default)(n).children().each((function(n,i){var l=function(e,t,n){var o=(0,r.default)(e),a=o.attr("colspan"),i=o.attr("rowspan"),l=e.nodeName;if("TH"!==l&&"TD"!==l)return null;var u={nodeName:e.nodeName,colspan:a?parseInt(a,10):1,rowspan:i?parseInt(i,10):1,content:o.html(),elementIndex:{rowIndex:t,colIndex:n}};return"TH"===e.nodeName&&e.align&&(u.align=e.align),u}(i,e,n);if(l){for(var u=n+a;t[e][u];)u+=1,a+=1;t[e][u]=l,function(e,t,n,r){var a=t.colspan,i=t.rowspan,l=t.nodeName,u=a>1,s=i>1;if(u||s){var c=n+i,f=r+a;o.default.range(n,c).forEach((function(t){e[t]=e[t]||[],o.default.range(r,f).forEach((function(o){var a={nodeName:l};t===n&&o===r||(u&&(a.colMergeWith=r),s&&(a.rowMergeWith=n),e[t][o]=a)}))}))}}(t,l,e,u)}}))})),e[0].className&&(t.className=e[0].className),t}function l(e){var t=[];return e.forEach((function(e,n){var r=[];e.forEach((function(e,t){o.default.isUndefined(e.colMergeWith)&&o.default.isUndefined(e.rowMergeWith)&&r.push({rowIndex:n,colIndex:t})})),t.push(r)})),t}var u=o.default.browser.msie?"":"<br>";function s(e,t,n){return{nodeName:n||"TD",colspan:1,rowspan:1,content:u,elementIndex:{rowIndex:e,colIndex:t}}}function c(e){var t=e.closest("tr"),n=t.prevAll().length;return"TBODY"===t.parent()[0].nodeName&&(n+=1),n}function f(e){return e.closest("td, th").prevAll().length}t.default={createTableData:i,createCellIndexData:l,createRenderData:function(e,t){var n=function(e){var t=e[0];return t.map((function(e){return o.default.isExisty(e.colMergeWith)?t[e.colMergeWith].align:e.align}))}(e),r=t.map((function(t){return t.map((function(t){var r=t.rowIndex,a=t.colIndex;return o.default.extend({align:n[a]},e[r][a])}))}));return e.className&&(r.className=e.className),r},findElementRowIndex:c,findElementColIndex:f,findCellIndex:function(e,t){var n=c(t),r=f(t);return e[n][r]},createBasicCell:s,findRowMergedLastIndex:function(e,t,n){var r=e[t][n],o=t;return r.rowspan>1&&(o+=r.rowspan-1),o},findColMergedLastIndex:function(e,t,n){var r=e[t][n],o=n;return r.colspan>1&&(o+=r.colspan-1),o},findElementIndex:function(e,t,n){var r=e[t][n];return t=o.default.isExisty(r.rowMergeWith)?r.rowMergeWith:t,n=o.default.isExisty(r.colMergeWith)?r.colMergeWith:n,e[t][n].elementIndex},stuffCellsIntoIncompleteRow:function(e,t){e.forEach((function(e,n){var r=e.length;if(r){var a=e[0].nodeName;o.default.range(r,t).forEach((function(t){e.push(s(n,t,a))}))}}))},addTbodyOrTheadIfNeed:function(e){var t=e[0],n=t.length,r=!0;if(!n&&e[1])o.default.range(0,e[1].length).forEach((function(e){t.push(s(0,e,"TH"))}));else if("TH"!==e[0][0].nodeName){var a,i=o.default.range(0,n).map((function(e){return s(0,e,"TH")}));(a=[]).concat.apply(a,e).forEach((function(e){e.elementIndex&&(e.elementIndex.rowIndex+=1)})),e.unshift(i)}else if(1===e.length){var l=o.default.range(0,n).map((function(e){return s(1,e,"TD")}));e.push(l)}else r=!1;return r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.colspan>1?' colspan="'+e.colspan+'"':"";return t+=e.rowspan>1?' rowspan="'+e.rowspan+'"':"",t+=e.align?' align="'+e.align+'"':"","<"+e.nodeName+t+">"+e.content+"</"+e.nodeName+">"}function l(e,t){var n="";return e.length&&(n="<"+t+">"+(n=e.map((function(e){return"<tr>"+e.map(i).join("")+"</tr>"})).join(""))+"</"+t+">"),n}function u(e){var t=e[0]?[e[0]]:[],n=e.slice(1),r=l(t,"THEAD"),o=l(n,"TBODY");return"<table"+(e.className?' class="'+e.className+'"':"")+">"+(r+o)+"</table>"}t.default={createTableHtml:u,replaceTable:function(e,t){var n=o.default.createCellIndexData(t),a=o.default.createRenderData(t,n),i=(0,r.default)(u(a));return e.replaceWith(i),i},focusToCell:function(e,t,n){t.selectNodeContents(n),t.collapse(!0),e.setSelection(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(1)),a=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){var r=t[n].rowIndex,a=e[r];o.default.range(t.start.colIndex,t.end.colIndex+1).forEach((function(n){var i=a[n],l=i.rowMergeWith,u=-1;o.default.isExisty(l)?(l<t.start.rowIndex&&(t.start.rowIndex=l),u=l+e[l][n].rowspan-1):i.rowspan>1&&(u=r+i.rowspan-1),u>t.end.rowIndex&&(t.end.rowIndex=u)}))}function u(e,t,n,r){var a=e[n],i=a[r],l=i.colMergeWith,u=-1;o.default.isExisty(l)?(l<t.start.colIndex&&(t.start.colIndex=l),u=l+a[l].colspan-1):i.colspan>1&&(u=r+i.colspan-1),u>t.end.colIndex&&(t.end.colIndex=u)}t.default={findSelectionRange:function(e,t,n){return function(e,t){for(var n="";n!==JSON.stringify(t);)n=JSON.stringify(t),l(e,t,"start"),l(e,t,"end"),o.default.range(t.start.rowIndex,t.end.rowIndex+1).forEach((function(n){u(e,t,n,t.start.colIndex),u(e,t,n,t.end.colIndex)}));return t}(e,function(e,t,n){var r=a.default.createCellIndexData(e),o=a.default.findCellIndex(r,t),i=a.default.findCellIndex(r,n),l=void 0,u=void 0,s=void 0,c=void 0;return o.rowIndex>i.rowIndex?(l=i.rowIndex,u=o.rowIndex):(l=o.rowIndex,u=i.rowIndex),o.colIndex>i.colIndex?(s=i.colIndex,c=o.colIndex):(s=o.colIndex,c=i.colIndex),{start:{rowIndex:l,colIndex:s},end:{rowIndex:u,colIndex:c}}}(e,t,n))},getTableSelectionRange:function(e,t,n){var i=a.default.createCellIndexData(e),l={};if(t.length){var u=a.default.findCellIndex(i,t.first()),s=o.default.extend({},u);t.each((function(t,n){var o=a.default.findCellIndex(i,(0,r.default)(n)),l=e[o.rowIndex][o.colIndex],u=o.rowIndex+l.rowspan-1,c=o.colIndex+l.colspan-1;s.rowIndex=Math.max(s.rowIndex,u),s.colIndex=Math.max(s.colIndex,c)})),l.start=u,l.end=s}else{var c=a.default.findCellIndex(i,n);l.start=c,l.end=o.default.extend({},c)}return l}}},function(e,t,n){"use strict";var r=n(11),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=f;var a=n(9);a.inherits=n(7);var i=n(20),l=n(15);a.inherits(f,i);for(var u=o(l.prototype),s=0;s<u.length;s++){var c=u[s];f.prototype[c]||(f.prototype[c]=l.prototype[c])}function f(e){if(!(this instanceof f))return new f(e);i.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(23).Buffer)},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var u,s=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?s=u.concat(s):f=-1,s.length&&h())}function h(){if(!c){var e=l(d);c=!0;for(var t=s.length;t;){for(u=s,s=[];++f<t;)u&&u[f].run();f=-1,t=s.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||c||l(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,o){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,i,l=arguments.length;switch(l){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,o)}));default:for(a=new Array(l-1),i=0;i<a.length;)a[i++]=arguments[i];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n(10))},function(e,t,n){var r=n(23),o=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function i(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=i),a(o,i),i.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},i.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function s(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var o,a,i,l;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=s(e))>0&&i.length>o&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,l=u,console&&console.warn&&console.warn(l)}return e}function f(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):g(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return s(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var l=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw l.context=i,l}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var s=u.length,c=g(u,s);for(n=0;n<s;++n)a(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return c(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return c(this,e,t,!0)},l.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,o,a,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(o=a[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return h(this,e,!0)},l.prototype.rawListeners=function(e){return h(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},l.prototype.listenerCount=p,l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){(t=e.exports=n(20)).Stream=t,t.Readable=t,t.Writable=n(15),t.Duplex=n(6),t.Transform=n(26),t.PassThrough=n(60)},function(e,t,n){"use strict";(function(t,r,o){var a=n(11);function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var o=r.callback;t.pendingcb--,o(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=b;var l,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;b.WritableState=m;var s=n(9);s.inherits=n(7);var c={deprecate:n(59)},f=n(22),d=n(12).Buffer,h=o.Uint8Array||function(){};var p,g=n(24);function v(){}function m(e,t){l=l||n(6),e=e||{};var r=t instanceof l;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark,s=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(s||0===s)?s:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(a.nextTick(o,r),a.nextTick(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(o(r),e._writableState.errorEmitted=!0,e.emit("error",r),x(e,t))}(e,n,r,t,o);else{var i=k(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||_(e,n),r?u(w,e,n,i,o):w(e,n,i,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function b(e){if(l=l||n(6),!(p.call(b,this)||this instanceof l))return new b(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function y(e,t,n,r,o,a,i){t.writelen=r,t.writecb=i,t.writing=!0,t.sync=!0,n?e._writev(o,t.onwrite):e._write(o,a,t.onwrite),t.sync=!1}function w(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),x(e,t)}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var l=0,u=!0;n;)o[l]=n,n.isBuf||(u=!1),n=n.next,l+=1;o.allBuffers=u,y(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var s=n.chunk,c=n.encoding,f=n.callback;if(y(e,t,!1,t.objectMode?1:s.length,s,c,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))}function x(e,t){var n=k(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}s.inherits(b,f),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===b&&(e&&e._writableState instanceof m)}})):p=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var r,o=this._writableState,i=!1,l=!o.objectMode&&(r=e,d.isBuffer(r)||r instanceof h);return l&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),l?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=v),o.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(l||function(e,t,n,r){var o=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),a.nextTick(r,i),o=!1),o}(this,o,e,n))&&(o.pendingcb++,i=function(e,t,n,r,o,a){if(!n){var i=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,o);r!==i&&(n=!0,o="buffer",r=i)}var l=t.objectMode?1:r.length;t.length+=l;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:a,next:null},s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,l,r,o,a);return u}(this,o,l,e,t,n)),i},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,x(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(10),n(57).setImmediate,n(8))},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=p(n(0)),a=p(n(1)),i=p(n(30)),l=p(n(33)),u=p(n(34)),s=p(n(37)),c=p(n(38)),f=p(n(50)),d=n(18),h=p(d);function p(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=o.default.extend({useDefaultHTMLSanitizer:!0,codeBlockLanguages:d.CodeBlockManager.getHighlightJSLanguages(),customConvertor:null},t),this.eventManager=new l.default,this.commandManager=new u.default(this),this.options.customConvertor?this.convertor=new this.options.customConvertor(this.eventManager):this.convertor=new c.default(this.eventManager),this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&a.default.forEach(this.options.hooks,(function(e,t){n.addHook(t,e)})),this.options.events&&a.default.forEach(this.options.events,(function(e,t){n.on(t,e)}));var r=this.options,f=r.el,h=r.initialValue,p=f.innerHTML;f.innerHTML="",this.preview=new i.default((0,o.default)(f),this.eventManager,this.convertor,!0),this.preview.$el.on("mousedown",o.default.proxy(this._toggleTask,this)),s.default.applyExtension(this,this.options.exts),h?this.setValue(h):p&&this.preview.setHTML(p),this.eventManager.emit("load",this)}return r(e,[{key:"_toggleTask",value:function(e){var t=getComputedStyle(e.target,":before");e.target.hasAttribute("data-te-task")&&f.default.isInsideTaskBox(t,e.offsetX,e.offsetY)&&((0,o.default)(e.target).toggleClass("checked"),this.eventManager.emit("change",{source:"viewer",data:e}))}},{key:"setMarkdown",value:function(e){this.markdownValue=e=e||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setMarkdownAfter",this.markdownValue)}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"remove",value:function(){this.eventManager.emit("removeEditor"),this.preview.$el.off("mousedown",o.default.proxy(this._toggleTask,this)),this.preview.remove(),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"isViewer",value:function(){return!0}},{key:"isMarkdownMode",value:function(){return!1}},{key:"isWysiwygMode",value:function(){return!1}}],[{key:"defineExtension",value:function(e,t){s.default.defineExtension(e,t)}}]),e}();g.isViewer=!0,g.domUtils=f.default,g.codeBlockManager=h.default,g.markdownitHighlight=c.default.getMarkdownitHighlightRenderer(),g.markdownit=c.default.getMarkdownitRenderer(),g.i18n=null,g.Button=null,g.WwCodeBlockManager=null,g.WwTableManager=null,g.WwTableSelectionManager=null,e.exports=g},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeBlockManager=void 0;var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(49),i=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._replacers={}}return o(e,[{key:"setReplacer",value:function(e,t){this._replacers[e]=t}},{key:"getReplacer",value:function(e){return this._replacers[e]}},{key:"createCodeBlockHtml",value:function(e,t){var n=this.getReplacer(e);return n?n(t,e):i.default.getLanguage(e)?i.default.highlight(e,t).value:function(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}(t,!1)}}],[{key:"getHighlightJSLanguages",value:function(){return i.default.listLanguages()}}]),e}();t.CodeBlockManager=l,t.default=new l},function(e,t,n){e.exports=o;var r=n(13).EventEmitter;function o(){r.call(this)}n(7)(o,r),o.Readable=n(14),o.Writable=n(61),o.Duplex=n(62),o.Transform=n(63),o.PassThrough=n(64),o.Stream=o,o.prototype.pipe=function(e,t){var n=this;function o(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",o),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",l),n.on("close",u));var i=!1;function l(){i||(i=!0,e.end())}function u(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",o),e.removeListener("drain",a),n.removeListener("end",l),n.removeListener("close",u),n.removeListener("error",s),e.removeListener("error",s),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",s),e.on("error",s),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},function(e,t,n){"use strict";(function(t,r){var o=n(11);e.exports=y;var a,i=n(21);y.ReadableState=b;n(13).EventEmitter;var l=function(e,t){return e.listeners(t).length},u=n(22),s=n(12).Buffer,c=t.Uint8Array||function(){};var f=n(9);f.inherits=n(7);var d=n(54),h=void 0;h=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=n(55),v=n(24);f.inherits(y,u);var m=["error","close","destroy","pause","resume"];function b(e,t){e=e||{};var r=t instanceof(a=a||n(6));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,i=e.readableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(i||0===i)?i:l,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(25).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function y(e){if(a=a||n(6),!(this instanceof y))return new y(e);this._readableState=new b(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function w(e,t,n,r,o){var a,i=e._readableState;null===t?(i.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,x(e)}(e,i)):(o||(a=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(i,t)),a?e.emit("error",a):i.objectMode||t&&t.length>0?("string"==typeof t||i.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r?i.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_(e,i,t,!0):i.ended?e.emit("error",new Error("stream.push() after EOF")):(i.reading=!1,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?_(e,i,t,!1):T(e,i)):_(e,i,t,!1))):r||(i.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(i)}function _(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),T(e,t)}Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),y.prototype.destroy=v.destroy,y.prototype._undestroy=v.undestroy,y.prototype._destroy=function(e,t){this.push(null),t(e)},y.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},y.prototype.unshift=function(e){return w(this,e,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(e){return p||(p=n(25).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var k=8388608;function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=k?e=k:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(C,e):C(e))}function C(e){h("emit readable"),e.emit("readable"),R(e)}function T(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(M,e,t))}function M(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){h("readable nexttick read 0"),e.read(0)}function I(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,o=n.data;e-=o.length;for(;n=n.next;){var a=n.data,i=e>a.length?a.length:e;if(i===a.length?o+=a:o+=a.slice(0,e),0===(e-=i)){i===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(i));break}++r}return t.length-=r,o}(e,t):function(e,t){var n=s.allocUnsafe(e),r=t.head,o=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,i=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,i),0===(e-=i)){i===a.length?(++o,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(i));break}++o}return t.length-=o,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(N,t,e))}function N(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}y.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):x(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,o=t.needReadable;return h("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",o=!0),t.ended||t.reading?h("reading or ended",o=!1):o&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(r=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},y.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},y.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:y;function s(t,r){h("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",m),e.removeListener("finish",b),e.removeListener("drain",f),e.removeListener("error",v),e.removeListener("unpipe",s),n.removeListener("end",c),n.removeListener("end",y),n.removeListener("data",g),d=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function c(){h("onend"),e.end()}a.endEmitted?o.nextTick(u):n.once("end",u),e.on("unpipe",s);var f=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&l(e,"data")&&(t.flowing=!0,R(e))}}(n);e.on("drain",f);var d=!1;var p=!1;function g(t){h("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==P(a.pipes,e))&&!d&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(t){h("onerror",t),y(),e.removeListener("error",v),0===l(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",b),y()}function b(){h("onfinish"),e.removeListener("close",m),y()}function y(){h("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",v),e.once("close",m),e.once("finish",b),e.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),e},y.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)r[a].emit("unpipe",this,n);return this}var i=P(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},y.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&x(this):o.nextTick(S,this))}return n},y.prototype.addListener=y.prototype.on,y.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,o.nextTick(I,e,t))}(this,e)),this},y.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},y.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var o in e.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(h("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o)||(n.objectMode||o&&o.length)&&(t.push(o)||(r=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var a=0;a<m.length;a++)e.on(m[a],this.emit.bind(this,m[a]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),y._fromList=A}).call(this,n(8),n(10))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(13).EventEmitter},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(52),o=n(53),a=n(21);function i(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),o=(e=l(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=l(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?l(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=l(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=l(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return F(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){var a,i=1,l=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,l/=2,u/=2,n/=2}function s(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var c=-1;for(a=n;a<l;a++)if(s(e,a)===s(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*i}else-1!==c&&(a-=a-c),c=-1}else for(n+u>l&&(n=l-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(s(e,a+d)!==s(t,d)){f=!1;break}if(f)return a}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var l=parseInt(t.substr(2*i,2),16);if(isNaN(l))return i;e[n+i]=l}return i}function w(e,t,n,r){return q(H(t,e.length-n),e,n,r)}function _(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return _(e,t,n,r)}function E(e,t,n,r){return q(F(t),e,n,r)}function x(e,t,n,r){return q(function(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,o=n%256,a.push(o),a.push(r);return a}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a,i,l,u,s=e[o],c=null,f=s>239?4:s>223?3:s>191?2:1;if(o+f<=n)switch(f){case 1:s<128&&(c=s);break;case 2:128==(192&(a=e[o+1]))&&(u=(31&s)<<6|63&a)>127&&(c=u);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(u=(15&s)<<12|(63&a)<<6|63&i)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[o+1],i=e[o+2],l=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&l)&&(u=(15&s)<<18|(63&a)<<12|(63&i)<<6|63&l)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=f}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return s(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?l(e,t):void 0!==n?"string"==typeof r?l(e,t).fill(n,r):l(e,t).fill(n):l(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!u.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),l=Math.min(a,i),s=this.slice(r,o),c=e.slice(t,n),f=0;f<l;++f)if(s[f]!==c[f]){a=s[f],i=c[f];break}return a<i?-1:i<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",a=t;a<n;++a)o+=W(e[a]);return o}function A(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function D(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return a||D(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return a||D(e,0,n,8),o.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;n=new u(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var a=0,i=1,l=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===l&&0!==this[t+a-1]&&(l=1),this[t+a]=(e/i>>0)-l&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var a=n-1,i=1,l=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===l&&0!==this[t+a+1]&&(l=1),this[t+a]=(e/i>>0)-l&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=u.isBuffer(e)?e:H(new u(e,r).toString()),l=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%l]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function F(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(8))},function(e,t,n){"use strict";var r=n(11);function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return a||i?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var r=n(12).Buffer,o=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=s,t=4;break;case"utf8":this.fillLast=l,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function i(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function l(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var o=i(t[r]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if((o=i(t[r]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if((o=i(t[r]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=i;var r=n(6),o=n(9);function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",l)}function l(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=n(7),o.inherits(i,r),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){"use strict";n(28),n(66),n(81),n(83);var r=n(85);e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultOptions=t.detectDelimiter=t.parseDSV2ChartData=t.parseCode2ChartOption=t.parseURL2ChartData=t.parseCode2DataAndOptions=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0},a=c(n(0)),i=c(n(1)),l=c(n(29)),u=c(n(2)),s=c(n(51));function c(e){return e&&e.__esModule?e:{default:e}}var f=u.default.WwCodeBlockManager,d=u.default.codeBlockManager,h="chart";s.default.IGNORE_QUOTE_WHITESPACE=!1,s.default.IGNORE_RECORD_LENGTH=!0,s.default.DETECT_TYPES=!1;var p=/[\n\r]/,g=[",","\t",/\s+/],v=":",m=["barChart","columnChart","lineChart","areaChart","pieChart"],b=["lineChart","areaChart"],y={minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,height:"auto",width:"auto"};function w(e,t){var n=(e=T(e)).split(/\n{2,}/),r=n[0],o=n[1],l=C(r),u=l&&l.editorChart&&l.editorChart.url,s=void 0;if(i.default.isString(u)){a.default.get(u).done((function(e){s=_(e,r),t(s)})).fail((function(){return t(null)}))}else s=_(r,o),t(s)}function _(e,t){return{data:x(e),options:C(t)}}function k(e){var t=(e=T(e)).split(p).slice(0,10).join("\n");return g.map((function(e){return{delimiter:e,delta:E(t,e)}})).sort((function(e,t){return e.delta-t.delta}))[0].delimiter}function E(e,t){var n=void 0,r=void 0;try{if(s.default.COLUMN_SEPARATOR=t,(n=s.default.parse(e))[0].length<2)throw new Error("parser fail");r=n.map((function(e){return e.length})).reduce((function(e,t){return{deltaSum:e.deltaSum+Math.abs(e.length-t),length:t}}),{deltaSum:0,length:n[0].length}).deltaSum}catch(e){r=1/0}return r}function x(e,t){e=T(e),s.default.COLUMN_SEPARATOR=t||k(e);var n=s.default.parse(e),r=(n=n.map((function(e){return e.map((function(e){return e.trim()}))})))[0].filter((function(e,t){return t>0})).reduce((function(e,t){return e||!M(t)}),!1),o=r?n.shift():[],a=n.slice(1).reduce((function(e,t){return e||!M(t[0])}),!1),i=a?n.map((function(e){return e.shift()})):[];return a&&o.shift(),{categories:i,series:(n=n[0].map((function(e,t){return n.map((function(e){return parseFloat(e[t])}))}))).map((function(e,t){return r?{name:o[t],data:e}:{data:e}}))}}function C(e){var t=["type","url"],n={};return i.default.isUndefined(e)?n:(e.split(p).forEach((function(e){var r=e.split(v),o=r[0],a=r.slice(1).join(v);if(o=o.trim(),0!==a.length){try{a=JSON.parse(a.trim())}catch(e){a=a.trim()}var l=o.split(".").slice(0),u=l[0];i.default.inArray(u,t)>=0?l.unshift("editorChart"):1===l.length?l.unshift("chart"):"x"!==u&&"y"!==u||(l[0]=u+"Axis");for(var s=n,c=0;c<l.length;c+=1){var f=l[c];s[f]=s[f]||(l.length-1===c?a:{}),s=s[f]}}})),n)}function T(e){return e.replace(/(^(\s*[\n\r])+)|([\n\r]+\s*$)/g,"")}function M(e){return!isNaN(e)&&isFinite(e)}function S(e,t,n){e=i.default.extend({editorChart:{},chart:{},chartExportMenu:{},usageStatistics:t.usageStatistics},e),t=i.default.extend(y,t);var r=e.chart,o=r.width,a=r.height,l=i.default.isUndefined(o),u=i.default.isUndefined(a);if(l||u){var s=n.getBoundingClientRect().width;o="auto"===(o=l?t.width:o)?s:o,a="auto"===(a=u?t.height:a)?s:a}return o=Math.min(t.maxWidth,o),a=Math.min(t.maxHeight,a),e.chart.width=Math.max(t.minWidth,o),e.chart.height=Math.max(t.minHeight,a),e.editorChart.type=e.editorChart.type?e.editorChart.type+"Chart":"columnChart",e.chartExportMenu.visible=e.chartExportMenu.visible||!1,e}function I(e){return e.reduce((function(e,t){var n=t.map((function(e){return!M(e)&&e.indexOf(" ")>=0&&(e='"'+e+'"'),e}));return e.push(n.join("\t")),e}),[])}function R(e){var t=e.wwEditor.componentManager;t.removeManager("codeblock"),t.addManager(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"convertNodesToText",value:function(e){if(1!==e.length||"TABLE"!==e[0].tagName)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"convertNodesToText",this).call(this,e);var n=e.shift(),r="";return r+=I([].slice.call(n.rows).map((function(e){return[].slice.call(e.cells).map((function(e){return e.innerText.trim()}))}))).reduce((function(e,t){return e+(t+"\n")}),[])}}]),t}(f))}u.default.defineExtension("chart",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.options.codeBlockLanguages;n&&n.indexOf(h)<0&&n.push(h),t=i.default.extend({usageStatistics:e.options.usageStatistics},t),d.setReplacer(h,(function(e){return function(e,t){var n="chart-"+Math.random().toString(36).substr(2,10),r='<div id="'+n+'" class="chart" />';return setTimeout((function(){var r=document.querySelector("#"+n);try{w(e,(function(e){var n=e.data,o=e.options,a=(o=S(o,t,r)).editorChart.type;m.indexOf(a)<0?r.innerHTML="invalid chart type. type: bar, column, line, area, pie":b.indexOf(a)>-1&&n.categories.length!==n.series[0].data.length?r.innerHTML="invalid chart data":l.default[a](r,n,o)}))}catch(e){r.innerHTML="invalid chart data"}}),0),r}(e,t)})),e.isViewer()||(R(e),e.eventManager.listen("pasteBefore",(function(t){return function(e,t){var n=t.source,r=t.data;if(function(e,t,n){var r="markdown"===t&&e.getTokenAt(n.from).state.overlay.codeBlock;return r=(r=r||"codeblock"===t)&&"wysiwyg"!==t}(e,n,r)){var o=r.text.join("\n");if(0===E(o,"\t")){s.default.COLUMN_SEPARATOR="\t";var a=I(s.default.parse(o));r.update(r.from,r.to,a)}}}(e.mdEditor.cm,t)})))})),t.parseCode2DataAndOptions=w,t.parseURL2ChartData=function(e,t){a.default.get(e).done((function(e){var n=x(e);t(n)})).fail((function(){return t(null)}))},t.parseCode2ChartOption=C,t.parseDSV2ChartData=x,t.detectDelimiter=k,t.setDefaultOptions=S},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(31);var i=function(e){function t(e,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,o,a));return i._initEvent(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"_initEvent",value:function(){var e=this,t="";this.eventManager.listen("contentChangedFromMarkdown",(function(n){t=n.getValue(),e.isVisible()&&e.lazyRunner.run("refresh",t)})),this.eventManager.listen("previewNeedsRefresh",(function(n){e.refresh(n||t)})),this.$el.on("scroll",(function(t){e.eventManager.emit("scroll",{source:"preview",data:t})}))}},{key:"render",value:function(e){(function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e),this.eventManager.emit("previewRenderAfter",this)}},{key:"remove",value:function(){this.$el.off("scroll"),this.$el=null}}]),t}(((r=a)&&r.__esModule?r:{default:r}).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(0)),a=i(n(32));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:800;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventManager=n,this.convertor=r,this.$el=t,this.isViewer=!!o,this._initContentSection(),this.lazyRunner=new a.default,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,i,this)}return r(e,[{key:"_initContentSection",value:function(){this._$previewContent=(0,o.default)('<div class="tui-editor-contents" />'),this.$el.append(this._$previewContent)}},{key:"refresh",value:function(e){this.render(this.convertor.toHTMLWithCodeHightlight(e))}},{key:"getHTML",value:function(){return this._$previewContent.html()}},{key:"setHTML",value:function(e){this._$previewContent.html(e)}},{key:"render",value:function(e){var t=this._$previewContent;e=this.eventManager.emit("previewBeforeHook",e)||e,t.empty(),t.html(e)}},{key:"setHeight",value:function(e){this.$el.get(0).style.height=e+"px"}},{key:"setMinHeight",value:function(e){this.$el.get(0).style.minHeight=e+"px"}},{key:"isVisible",value:function(){return"none"!==this.$el.css("display")}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalTOID=null,this.lazyRunFunctions={}}return o(e,[{key:"run",value:function(e,t,n,r){var o=void 0;return i.default.isString(e)?o=this._runRegisteredRun(e,t,n,r):(o=this._runSingleRun(e,t,n,r,this.globalTOID),this.globalTOID=o),o}},{key:"registerLazyRunFunction",value:function(e,t,n,r){r=r||this,this.lazyRunFunctions[e]={fn:t,delay:n,context:r,TOID:null}}},{key:"_runSingleRun",value:function(e,t,n,r,o){return this._clearTOIDIfNeed(o),o=setTimeout((function(){e.call(n,t)}),r)}},{key:"_runRegisteredRun",value:function(e,t,n,r){var o=this.lazyRunFunctions[e],a=o.fn,i=o.TOID;return r=r||o.delay,n=n||o.context,i=this._runSingleRun(a,t,n,r,i),o.TOID=i,i}},{key:"_clearTOIDIfNeed",value:function(e){e&&clearTimeout(e)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=(r=a)&&r.__esModule?r:{default:r};var l=["previewBeforeHook","previewRenderAfter","previewNeedsRefresh","addImageBlobHook","setMarkdownAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeModeBefore","changeMode","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","openPopupCodeBlockLanguages","openPopupCodeBlockEditor","openDropdownToolbar","closePopupCodeBlockLanguages","closePopupCodeBlockEditor","closeAllPopup","command","addCommandBefore","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorBeforeHtmlToMarkdownConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","scroll","click","mousedown","mouseover","mouseout","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","pasteBefore","willPaste","copy","copyBefore","copyAfter","cut","cutAfter","drop","show","hide"],u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new i.default.Map,this.TYPE=new i.default.Enum(l)}return o(e,[{key:"listen",value:function(e,t){var n=this._getTypeInfo(e),r=this.events.get(n.type)||[];if(!this._hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),r.push(t),this.events.set(n.type,r)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),o=this._getTypeInfo(r),a=this.events.get(o.type),l=void 0;return a&&i.default.forEach(a,(function(e){var n=e.apply(void 0,t);i.default.isUndefined(n)||(l=l||[]).push(n)})),l}},{key:"emitReduce",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),o=this.events.get(r);return o&&i.default.forEach(o,(function(e){var n=e.apply(void 0,t);i.default.isFalsy(n)||(t[0]=n)})),t[0]}},{key:"_getTypeInfo",value:function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}}},{key:"_hasEventType",value:function(e){return!i.default.isUndefined(this.TYPE[this._getTypeInfo(e).type])}},{key:"addEventType",value:function(e){if(this._hasEventType(e))throw new Error("There is already have event type "+e);this.TYPE.set(e)}},{key:"removeEventHandler",value:function(e,t){var n=this,r=this._getTypeInfo(e),o=r.type,a=r.namespace;o&&t?this._removeEventHandlerWithHandler(o,t):o&&!a?this.events.delete(o):!o&&a?this.events.forEach((function(e,t){n._removeEventHandlerWithTypeInfo(t,a)})):o&&a&&this._removeEventHandlerWithTypeInfo(o,a)}},{key:"_removeEventHandlerWithHandler",value:function(e,t){var n=this.events.get(e)||[],r=n.indexOf(t);r>=0&&n.splice(r,1)}},{key:"_removeEventHandlerWithTypeInfo",value:function(e,t){var n=[],r=this.events.get(e);r&&(r.map((function(e){return e.namespace!==t&&n.push(e),null})),this.events.set(e,n))}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(0)),a=l(n(1)),i=l(n(35));function l(e){return e&&e.__esModule?e:{default:e}}var u=n(36).isMac?1:0,s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._command=new a.default.Map,this._mdCommand=new a.default.Map,this._wwCommand=new a.default.Map,this._options=o.default.extend({useCommandShortcut:!0},n),this.base=t,this.keyMapCommand={},this._initEvent()}return r(e,[{key:"_addCommandBefore",value:function(e){var t={command:e};return this.base.eventManager.emit("addCommandBefore",t),t.command||e}},{key:"addCommand",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.length&&(t=e.command.apply(e,[t].concat(r)));var a=(t=this._addCommandBefore(t)).getName(),i=void 0;return t.isMDType()?i=this._mdCommand:t.isWWType()?i=this._wwCommand:t.isGlobalType()&&(i=this._command),i.set(a,t),t.keyMap&&(this.keyMapCommand[t.keyMap[u]]=a),t}},{key:"_initEvent",value:function(){var e=this;this.base.eventManager.listen("command",(function(){e.exec.apply(e,arguments)})),this.base.eventManager.listen("keyMap",(function(t){if(e._options.useCommandShortcut){var n=e.keyMapCommand[t.keyMap];n&&(t.data.preventDefault(),e.exec(n))}}))}},{key:"exec",value:function(e){var t=void 0,n=void 0,r=this.base;if((t=this._command.get(e))||(this.base.isMarkdownMode()?(t=this._mdCommand.get(e),r=this.base.mdEditor):(t=this._wwCommand.get(e),r=this.base.wwEditor)),t){for(var o,a=arguments.length,i=Array(a>1?a-1:0),l=1;l<a;l++)i[l-1]=arguments[l];i.unshift(r),n=(o=t).exec.apply(o,i)}return n}}]),e}();s.command=function(e,t){var n=i.default.factory(e,t.name,t.keyMap);return a.default.extend(n,t),n},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.type=n,r&&this.setKeyMap(r)}return o(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"isMDType",value:function(){return this.type===e.TYPE.MD}},{key:"isWWType",value:function(){return this.type===e.TYPE.WW}},{key:"isGlobalType",value:function(){return this.type===e.TYPE.GB}},{key:"setKeyMap",value:function(e,t){this.keyMap=[e,t]}}]),e}();l.factory=function(e,t){var n=void 0;"markdown"===e?n=l.TYPE.MD:"wysiwyg"===e?n=l.TYPE.WW:"global"===e&&(n=l.TYPE.GB);var r=new l(t.name,n);return i.default.extend(r,t),r},l.TYPE={MD:0,WW:1,GB:2},t.default=l},function(e,t,n){"use strict";var r=/Mac/.test(navigator.platform);e.exports={isMac:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=(r=a)&&r.__esModule?r:{default:r};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exts=new i.default.Map}return o(e,[{key:"defineExtension",value:function(e,t){this.exts.set(e,t)}},{key:"applyExtension",value:function(e,t){var n=this;t&&t.forEach((function(t){var r=i.default.isObject(t),o=r?t.name:t;if(n.exts.has(o)){var a=n.exts.get(o);r?a(e,t):a(e)}}))}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=b(n(0)),a=b(n(1)),i=b(n(39)),l=b(n(17)),u=b(n(40)),s=b(n(41)),c=b(n(42)),f=b(n(43)),d=b(n(44)),h=b(n(45)),p=b(n(46)),g=b(n(47)),v=n(48),m=b(n(18));function b(e){return e&&e.__esModule?e:{default:e}}var y=new i.default({html:!0,breaks:!0,quotes:"",langPrefix:"lang-",highlight:function(e,t){return m.default.createCodeBlockHtml(t,e)}}),w=new i.default({html:!0,breaks:!0,quotes:"",langPrefix:"lang-"});y.block.ruler.at("code",f.default),y.block.ruler.at("table",h.default,{alt:["paragraph","reference"]}),y.block.ruler.at("blockquote",d.default,{alt:["paragraph","reference","blockquote","list"]}),y.block.ruler.at("html_block",p.default,{alt:["paragraph","reference","blockquote"]}),y.inline.ruler.at("backticks",g.default),y.use(s.default),y.use(c.default),y.renderer.rules.softbreak=function(e,t,n){if(!n.breaks)return"\n";var r=e[t-1];return r&&"html_inline"===r.type&&"<br>"===r.content?"":n.xhtmlOut?"<br />\n":"<br>\n"},w.block.ruler.at("code",f.default),w.block.ruler.at("table",h.default,{alt:["paragraph","reference"]}),w.block.ruler.at("blockquote",d.default,{alt:["paragraph","reference","blockquote","list"]}),w.block.ruler.at("html_block",p.default,{alt:["paragraph","reference","blockquote"]}),w.inline.ruler.at("backticks",g.default),w.use(s.default),w.use(c.default);var _=new RegExp("(\\\\<|<)([A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*)(\\/?>)","g"),k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventManager=t}return r(e,[{key:"_markdownToHtmlWithCodeHighlight",value:function(e,t){return e=this._replaceImgAttrToDataProp(e),y.render(e,t)}},{key:"_markdownToHtml",value:function(e,t){return e=e.replace(_,(function(e,t,n,r){return"\\"!==e[0]?""+t+n+" data-tomark-pass "+r:e})),e=this._replaceImgAttrToDataProp(e),w.render(e,t)}},{key:"_replaceImgAttrToDataProp",value:function(e){for(var t=/(<img[^>]*)(onerror\s*=\s*[\\"']?[^\\"']*[\\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");return e}},{key:"_removeBrToMarkPassAttributeInCode",value:function(e){var t=(0,o.default)("<div />");return t.html(e),t.find("code, pre").each((function(e,t){var n=(0,o.default)(t);n.html(n.html().replace(/\sdata-tomark-pass\s(\/?)&gt;/g,"$1&gt;"))})),e=t.html()}},{key:"toHTMLWithCodeHightlight",value:function(e){var t=this._markdownToHtmlWithCodeHighlight(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"toHTML",value:function(e){var t=this._markdownToHtml(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t),t=this._removeBrToMarkPassAttributeInCode(t)}},{key:"initHtmlSanitizer",value:function(){this.eventManager.listen("convertorAfterMarkdownToHtmlConverted",(function(e){return(0,u.default)(e,!0)}))}},{key:"setLinkAttribute",value:function(e){var t=Object.keys(e),n=function(n,r){t.forEach((function(t){n[r].attrPush([t,e[t]])}))};y.use(v.linkAttribute,n),w.use(v.linkAttribute,n)}},{key:"toMarkdown",value:function(e,t){var n=[];e=this.eventManager.emitReduce("convertorBeforeHtmlToMarkdownConverted",e),e=this._appendAttributeForLinkIfNeed(e),e=this._appendAttributeForBrIfNeed(e);var r=(0,l.default)(e,t);return r=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",r),r=this._removeNewlinesBeforeAfterAndBlockElement(r),a.default.forEach(r.split("\n"),(function(e,t){/^(<br>)+\||\|[^|]*\|/gi.test(e)?e=e.replace(/^(<br>)+\|/gi,(function(e){return e.replace(/<br>/gi,"<br>\n")})):/`[^`]*<br>[^`]*`/gi.test(e)||(e=e.replace(/<br>/gi,"<br>\n")),n[t]=e})),n.join("\n")}},{key:"_removeNewlinesBeforeAfterAndBlockElement",value:function(e){return e=(e=e.replace(/<br>\n\n(#{1,6} .*|```|\||(\*+|-+|\d+\.) .*| *>[^\n]+.*)/g,"<br>$1")).replace(/(#{1,6} .*|```|\|)\n\n<br>/g,"$1\n<br>")}},{key:"_appendAttributeForLinkIfNeed",value:function(e){return e.replace(/!?\[.*\]\(<\s*a[^>]*>(.*?)<\s*\/\s*a>\)/gi,(function(e){return e.replace(/<a /gi,'<a data-tomark-pass="" ')}))}},{key:"_appendAttributeForBrIfNeed",value:function(e){var t=new RegExp(/([^>]|<\/a>|<\/code>|<\/span>|<\/b>|<\/i>|<\/s>|<img [^>]*>)/.source+/<br data-tomark-pass \/><br data-tomark-pass \/>/.source,"g");return e=(e=(e=(e=(e=(e=(e=e.replace(/<br>/gi,"<br />")).replace(/<br \/><br \/>/gi,"<br data-tomark-pass /><br data-tomark-pass />")).replace(/<br data-tomark-pass="">/gi,"<br data-tomark-pass />")).replace(/<br data-tomark-pass \/><br \/>(.)/gi,"<br data-tomark-pass /><br data-tomark-pass />$1")).replace(t,"$1<br /><br />")).replace(/(.)<br \/><br \/>(<h[1-6]>|<pre>|<table>|<ul>|<ol>|<blockquote>)/g,"$1<br /><br data-tomark-pass />$2")).replace(/(<\/h[1-6]>|<\/pre>|<\/table>|<\/ul>|<\/ol>|<\/blockquote>)<br \/>(.)/g,"$1<br data-tomark-pass />$2")}}],[{key:"getMarkdownitHighlightRenderer",value:function(){return y}},{key:"getMarkdownitRenderer",value:function(){return w}}]),e}();t.default=k},function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var i=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),l=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g"),u={href:/^(javascript:).*/g};t.default=function(e,t){var n=(0,r.default)("<div />");return e=e.replace(/<!--[\s\S]*?-->/g,""),n.append(e),function(e){e.find("script, iframe, textarea, form, button, select, meta, style, link, title, embed, object, details, summary").remove()}(n),function(e){e.find("*").each((function(e,t){var n=t.attributes,r=o.default.toArray(n).filter((function(e){var t=e.name.match(i),n=e.name.match(l);return!t&&!n}));o.default.forEachArray(r,(function(e){n.getNamedItem(e.name)&&n.removeNamedItem(e.name)}))}))}(n),function(e){var t=function(t){u.hasOwnProperty(t)&&e.find("["+t+"]").each((function(e,n){var r=n.attributes,o=u[t],a=r.getNamedItem(t);o&&a&&a.value.toLowerCase().match(o)&&r.removeNamedItem(t)}))};for(var n in u)t(n)}(n),function(e,t){var n=void 0;if(t)n=e[0].innerHTML;else{for(var r=document.createDocumentFragment(),a=o.default.toArray(e[0].childNodes),i=a.length,l=0;l<i;l+=1)r.appendChild(a[l]);n=r}return n}(n,t)}},function(e,t,n){"use strict";function r(e){e.content=e.content.slice(4),e.children[0].content=e.children[0].content.slice(4)}function o(e){var t=!1;return 0!==e.content.indexOf("[x]")&&0!==e.content.indexOf("[X]")||(t=!0),t}function a(e,t,n){var r=e.attrIndex(t),o=[t,n];r<0?e.attrPush(o):e.attrs[r]=o}function i(e,t){return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===e[t].content.indexOf("[ ]")||0===e[t].content.indexOf("[x]")||0===e[t].content.indexOf("[X]"))}e.exports=function(e){e.core.ruler.after("inline","tui-task-list",(function(e){var t,n,l=e.tokens;for(n=2;n<l.length;n+=1)i(l,n)&&(t=o(l[n])?"task-list-item checked":"task-list-item",r(l[n]),a(l[n-2],"class",t),a(l[n-2],"data-te-task",""))}))}},function(e,t,n){"use strict";function r(e,t,n){var r=e.attrIndex(t),o=[t,n];r<0?e.attrPush(o):e.attrs[r]=o}e.exports=function(e){e.core.ruler.after("block","tui-code-block",(function(e){var t,n,o,a,i,l,u=e.tokens;for(n=0;n<u.length;n+=1)t=u[n],!0===(l=t).block&&"code"===l.tag&&"fence"===l.type&&((o=t.markup.length)>3&&r(t,"data-backticks",o),t.info&&r(t,"data-language",(a=t.info.replace(" ",""),i=!0,a.replace(i?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))))}))}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,o,a,i=0;if(e.src.split("\n")[t].match(/ {0,3}(?:-|\*|\d\.) /)||e.sCount[t]-e.blkIndent<4)return!1;for(o=r=t+1;r<n;)if(e.isEmpty(r)){if(++i>=2&&"list"===e.parentType)break;r++}else{if(i=0,!(e.sCount[r]-e.blkIndent>=4))break;o=++r}return e.line=o,(a=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!0),a.map=[t,e.line],!0}},function(e,t,n){"use strict";function r(e){switch(e){case 9:case 32:return!0}return!1}e.exports=function(e,t,n,o){var a,i,l,u,s,c,f,d,h,p,g,v,m,b,y,w,_,k,E,x,C=e.lineMax,T=e.bMarks[t]+e.tShift[t],M=e.eMarks[t],S=e.src.split("\n")[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(T++))return!1;if(S.match(/(?:-|\*|\d+\.) {1,4}(?:> {0,3})[^>]*$/))return!1;if(o)return!0;for(u=h=e.sCount[t]+T-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(T)?(T++,u++,h++,a=!1,w=!0):9===e.src.charCodeAt(T)?(w=!0,(e.bsCount[t]+h)%4==3?(T++,u++,h++,a=!1):a=!0):w=!1,p=[e.bMarks[t]],e.bMarks[t]=T;T<M&&r(i=e.src.charCodeAt(T));)9===i?h+=4-(h+e.bsCount[t]+(a?1:0))%4:h++,T++;for(g=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(w?1:0),c=T>=M,b=[e.sCount[t]],e.sCount[t]=h-u,y=[e.tShift[t]],e.tShift[t]=T-e.bMarks[t],k=e.md.block.ruler.getRules("blockquote"),m=e.parentType,e.parentType="blockquote",x=!1,d=t+1;d<n&&(e.sCount[d]<e.blkIndent&&(x=!0),!((T=e.bMarks[d]+e.tShift[d])>=(M=e.eMarks[d])));d++)if(62!==e.src.charCodeAt(T++)||x){if(c)break;for(_=!1,l=0,s=k.length;l<s;l++)if(k[l](e,d,n,!0)){_=!0;break}if(_){e.lineMax=d,0!==e.blkIndent&&(p.push(e.bMarks[d]),g.push(e.bsCount[d]),y.push(e.tShift[d]),b.push(e.sCount[d]),e.sCount[d]-=e.blkIndent);break}p.push(e.bMarks[d]),g.push(e.bsCount[d]),y.push(e.tShift[d]),b.push(e.sCount[d]),e.sCount[d]=-1}else{for(u=h=e.sCount[d]+T-(e.bMarks[d]+e.tShift[d]),32===e.src.charCodeAt(T)?(T++,u++,h++,a=!1,w=!0):9===e.src.charCodeAt(T)?(w=!0,(e.bsCount[d]+h)%4==3?(T++,u++,h++,a=!1):a=!0):w=!1,p.push(e.bMarks[d]),e.bMarks[d]=T;T<M&&r(i=e.src.charCodeAt(T));)9===i?h+=4-(h+e.bsCount[d]+(a?1:0))%4:h++,T++;c=T>=M,g.push(e.bsCount[d]),e.bsCount[d]=e.sCount[d]+1+(w?1:0),b.push(e.sCount[d]),e.sCount[d]=h-u,y.push(e.tShift[d]),e.tShift[d]=T-e.bMarks[d]}for(v=e.blkIndent,e.blkIndent=0,(E=e.push("blockquote_open","blockquote",1)).markup=">",E.map=f=[t,0],e.md.block.tokenize(e,t,d),(E=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=C,e.parentType=m,f[1]=e.line,l=0;l<y.length;l++)e.bMarks[l+t]=p[l],e.tShift[l+t]=y[l],e.sCount[l+t]=b[l],e.bsCount[l+t]=g[l];return e.blkIndent=v,!0}},function(e,t,n){"use strict";function r(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function o(e){var t,n=[],r=0,o=e.length,a=0,i=0,l=!1,u=0;for(t=e.charCodeAt(r);r<o;)96===t&&a%2==0?(l=!l,u=r):124!==t||a%2!=0||l?92===t?a+=1:a=0:(n.push(e.substring(i,r)),i=r+1),(r+=1)===o&&l&&(l=!1,r=u+1),t=e.charCodeAt(r);return n.push(e.substring(i)),n}e.exports=function(e,t,n,a){var i,l,u,s,c,f,d,h,p,g,v,m,b;if(t+2>n)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if((u=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(i=e.src.charCodeAt(u))&&45!==i&&58!==i)return!1;if(l=r(e,t+1),!/^[-:| ]+$/.test(l))return!1;for(f=l.split("|"),p=[],s=0;s<f.length;s+=1){if(!(v=f[s].trim())){if(0===s||s===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?p.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?p.push("left"):p.push("")}if(g=p.length,-1===(l=r(e,t).trim()).indexOf("|"))return!1;if((d=(f=o(l.replace(/^\||\|$/g,""))).length)>g)return!1;if(d<g){for(s=0;s<g-d;s+=1)f.push("");d=f.length}if(a)return!0;for((h=e.push("table_open","table",1)).map=m=[t,0],(h=e.push("thead_open","thead",1)).map=[t,t+1],(h=e.push("tr_open","tr",1)).map=[t,t+1],s=0;s<d;s+=1)(h=e.push("th_open","th",1)).map=[t,t+1],p[s]&&(h.attrs=[["align",p[s]]]),(h=e.push("inline","",0)).content=f[s].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),(h=e.push("tbody_open","tbody",1)).map=b=[t+2,0],c=t+2;c<n&&!(e.sCount[c]<e.blkIndent)&&-1!==(l=r(e,c)).indexOf("|");c+=1){for(f=o(l.replace(/^\||\|\s*$/g,"")),h=e.push("tr_open","tr",1),s=0;s<d;s+=1)h=e.push("td_open","td",1),p[s]&&(h.attrs=[["align",p[s]]]),(h=e.push("inline","",0)).content=f[s]?f[s].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),m[1]=b[1]=c,e.line=c,!0}},function(e,t,n){"use strict";var r=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^<("+["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].join("|")+")","i"),/^\/?>$/,!0],[new RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|pre|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)\s*$/,/^$/,!1]];e.exports=function(e,t,n,o){var a,i,l,u,s=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(s))return!1;for(u=e.src.slice(s,c),a=0;a<r.length;a++)if(r[a][0].test(u)){if(5===a)return!1;break}if(a===r.length)return!1;if(o)return r[a][2];if(i=t+1,!r[a][1].test(u))for(;i<n&&!(e.sCount[i]<e.blkIndent);i++)if(s=e.bMarks[i]+e.tShift[i],c=e.eMarks[i],u=e.src.slice(s,c),r[a][1].test(u)){0!==u.length&&i++;break}return e.line=i,(l=e.push("html_block","",0)).map=[t,i],l.content=e.getLines(t,i,e.blkIndent,!0),!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,o,a,i,l,u=e.pos;if(96!==e.src.charCodeAt(u))return!1;for(n=u,u++,r=e.posMax;u<r&&96===e.src.charCodeAt(u);)u++;for(o=e.src.slice(n,u),a=i=u;-1!==(a=e.src.indexOf("`",i));){for(i=a+1;i<r&&96===e.src.charCodeAt(i);)i++;if(i-a===o.length)return t||((l=e.push("code_inline","code",0)).markup=o,l.content=e.src.slice(u,a).replace(/[ \n]+/g," ").trim(),l.attrSet("data-backticks",l.markup.length)),e.pos=i,!0}return t||(e.pending+=o),e.pos+=o.length,!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.linkAttribute=function(e,t){!function(e,t,n,r){e.core.ruler.push(t,(function(e){var t,o,a;for(o=e.tokens.length-1;o>=0;o--)if("inline"===e.tokens[o].type)for(t=(a=e.tokens[o].children).length-1;t>=0;t--)a[t].type===n&&r(a,t)}))}(e,"url_attribute","link_open",t)}},function(e,t){e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var i=/\u200B/g,l=function(e){return e&&e.nodeType===Node.TEXT_NODE},u=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},s=function(e){return u(e)?e.tagName:"TEXT"},c=function(e){var t=void 0;return u(e)?t=e.textContent.replace(i,"").length:l(e)&&(t=e.nodeValue.replace(i,"").length),t},f=function(e){var t,n=e.parentNode.childNodes,r=void 0,o=void 0;for(r=0,t=n.length;r<t;r+=1)if(n[r]===e){o=r;break}return o},d=function(e,t){var n=void 0;return l(e)?n=e:e.childNodes.length&&t>=0&&(n=e.childNodes[t]),n},h=function(e,t,n){for(var r=e+"Sibling",o=void 0,a=void 0;t&&!t[r]&&(o=s(t.parentNode))!==n&&"BODY"!==o;)t=t.parentNode;return t[r]&&(a=t[r]),a},p=function(e,t,n){for(var r=void 0;e.parentNode&&!t(e.parentNode)&&(e=e.parentNode,!n||!n(e.parentNode)););return t(e.parentNode)&&(r=e),r},g=function(e,t){return o.default.isString(t)?p(e,(function(e){return t===s(e)})):p(e,(function(e){return t===e}))},v=function(e,t,n){var r=e+"Sibling",o=void 0;return(t=g(t,n))&&t[r]&&(o=t[r]),o},m=function(e){var t={};t.tagName=e.nodeName,e.id&&(t.id=e.id);var n=e.className.trim();return n&&(t.className=n),t},b=function(e,t,n){var r=t;if(r&&e===r.parentNode)for(;r!==n;){var o=r.nextSibling;e.removeChild(r),r=o}},y=function(e){return!!e&&("UL"===e.nodeName||"OL"===e.nodeName)},w=function(e,t){e.hasChildNodes()&&(o.default.forEachArray(e.childNodes,(function(){t.appendChild(e.firstChild)})),t.normalize()),e.parentNode&&e.parentNode.removeChild(e)},_=function(e,t){if("SPAN"!==e.nodeName)for(var n=e.parentNode,r=e;r.childNodes&&1===r.childNodes.length&&!l(r.firstChild)&&"SPAN"!==(r=r.firstChild).nodeName;)if(r.nodeName===t){var o=document.createElement(t);return w(r,r.parentNode),n.replaceChild(o,e),o.appendChild(e),o}return e},k=function(e,t,n){var r=_(e,n);if(r.nodeName===n)for(var o=_(t,n),a=r,i=r.nextSibling;i;){var l=i.nextSibling;if((i=_(i,n)).nodeName===n?a?w(i,a):a=i:a=null,i===o)break;i=l}};t.default={getNodeName:s,isTextNode:l,isElemNode:u,isBlockNode:function(e){return/^(ADDRESS|ARTICLE|ASIDE|BLOCKQUOTE|DETAILS|DIALOG|DD|DIV|DL|DT|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H[\d]|HEADER|HGROUP|HR|LI|MAIN|NAV|OL|P|PRE|SECTION|UL)$/gi.test(this.getNodeName(e))},getTextLength:c,getOffsetLength:function(e){var t=void 0;return u(e)?t=e.childNodes.length:l(e)&&(t=e.nodeValue.replace(i,"").length),t},getPrevOffsetNodeUntil:function(e,t,n){return t>0?d(e,t-1):h("previous",e,n)},getNodeOffsetOfParent:f,getChildNodeByOffset:d,getNodeWithDirectionUntil:h,containsNode:function(e,t){for(var n=document.createTreeWalker(e,4,null,!1),r=e===t;!r&&n.nextNode();)r=n.currentNode===t;return r},getTopPrevNodeUnder:function(e,t){return v("previous",e,t)},getTopNextNodeUnder:function(e,t){return v("next",e,t)},getParentUntilBy:p,getParentUntil:g,getTopBlockNode:function(e){return g(e,"BODY")},getPrevTextNode:function(e){for(e=e.previousSibling||e.parentNode;!l(e)&&"BODY"!==s(e);)if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode;return"BODY"===s(e)&&(e=null),e},findOffsetNode:function(e,t,n){var r=[],a="",i=0,l=void 0;if(!t.length)return r;for(var u=t.shift(),s=document.createTreeWalker(e,4,null,!1);s.nextNode();){for(a=s.currentNode.nodeValue||"",n&&(a=n(a)),l=i+a.length;l>=u;){if(r.push({container:s.currentNode,offsetInContainer:u-i,offset:u}),!t.length)return r;u=t.shift()}i=l}do{r.push({container:s.currentNode,offsetInContainer:a.length,offset:u}),u=t.shift()}while(!o.default.isUndefined(u));return r},getPath:function(e,t){for(var n=[];e&&e!==t;)u(e)&&n.unshift(m(e)),e=e.parentNode;return n},getNodeInfo:m,getTableCellByDirection:function(e,t){var n=null;return o.default.isUndefined(t)||"next"!==t&&"previous"!==t||(n="next"===t?e.nextElementSibling:e.previousElementSibling),n},getSiblingRowCellByDirection:function(e,t,n){var a=null,i=void 0,l=void 0,u=void 0,c=void 0,d=void 0,h=void 0;return o.default.isUndefined(t)||"next"!==t&&"previous"!==t||e&&(i=(0,r.default)(e),"next"===t?(u=i.parent().next(),h=(d=(c=i.parents("thead"))[0]&&c.next())&&"TBODY"===s(d[0]),l=0):(u=i.parent().prev(),h=(d=(c=i.parents("tbody"))[0]&&c.prev())&&"THEAD"===s(d[0]),l=e.parentNode.childNodes.length-1),!o.default.isUndefined(n)&&n||(l=f(e)),u[0]?a=u.children("td,th")[l]:c[0]&&h&&(a=d.find("td,th")[l])),a},isMDSupportInlineNode:function(e){return/^(A|B|BR|CODE|DEL|EM|I|IMG|S|SPAN|STRONG)$/gi.test(e.nodeName)},isStyledNode:function(e){return/^(A|ABBR|ACRONYM|B|BDI|BDO|BIG|CITE|CODE|DEL|DFN|EM|I|INS|KBD|MARK|Q|S|SAMP|SMALL|SPAN|STRONG|SUB|SUP|U|VAR)$/gi.test(e.nodeName)},removeChildFromStartToEndNode:b,removeNodesByDirection:function(e,t,n){for(var r=t;r!==e;){var o=r.parentNode,a=r,i=a.nextSibling,l=a.previousSibling;!n&&i?b(o,i,null):n&&l&&b(o,o.childNodes[0],r),r=o}},getLeafNode:function(e){for(var t=e;t.childNodes&&t.childNodes.length;){var n=t.firstChild;t=l(n)&&!c(n)&&n.nextSibling||n}return t},isInsideTaskBox:function(e,t,n){var r=parseInt(e.left,10),o=parseInt(e.top,10),a=parseInt(e.width,10),i=parseInt(e.height,10);return t>=r&&t<=r+a&&n>=o&&n<=o+i},isListNode:y,isFirstListItem:function(e){var t=e.nodeName,n=e.parentNode;return"LI"===t&&e===n.firstChild},isFirstLevelListItem:function(e){var t=e.nodeName,n=e.parentNode.parentNode;return"LI"===t&&!y(n)},mergeNode:w,createHorizontalRule:function(){var e=document.createElement("div"),t=document.createElement("hr");return e.setAttribute("contenteditable",!1),t.setAttribute("contenteditable",!1),e.appendChild(t),e},createEmptyLine:function(){var e=document.createElement("div");return e.appendChild(document.createElement("br")),e},changeTagOrder:_,mergeSameNodes:k,optimizeRange:function(e,t){var n=e.collapsed,r=e.commonAncestorContainer,o=e.startContainer,a=e.endContainer;if(!n){var i=null;if(o!==a?(k(g(o,r),g(a,r),t),i=r):l(o)&&(i=o.parentNode),i&&i.nodeName===t){var u=i.previousSibling,s=void 0;u&&(s=_(u)).nodeName===t&&w(i,s);var c=i.nextSibling;c&&(s=_(c)).nodeName===t&&w(s,i)}}},getAllTextNode:function(e){for(var t=document.createTreeWalker(e,4,null,!1),n=[];t.nextNode();){var r=t.currentNode;l(r)&&n.push(r)}return n},isCellNode:function(e){return!!e&&("TD"===e.nodeName||"TH"===e.nodeName)},getLastNodeBy:function(e,t){for(var n=e&&e.lastChild;n&&t(n);)n=n.lastChild;return n},getParentNodeBy:function(e,t){for(;e&&t(e.parentNode,e);)e=e.parentNode;return e},getSiblingNodeBy:function(e,t,n){for(var r=t+"Sibling";e&&n(e[r],e);)e=e[r];return e}}},function(e,t,n){"use strict";var r;"function"==typeof Symbol&&Symbol.iterator;(r={RELAXED:!1,IGNORE_RECORD_LENGTH:!1,IGNORE_QUOTES:!1,LINE_FEED_OK:!0,CARRIAGE_RETURN_OK:!0,DETECT_TYPES:!0,IGNORE_QUOTE_WHITESPACE:!0,DEBUG:!1,COLUMN_SEPARATOR:",",ERROR_EOF:"UNEXPECTED_END_OF_FILE",ERROR_CHAR:"UNEXPECTED_CHARACTER",ERROR_EOL:"UNEXPECTED_END_OF_RECORD",WARN_SPACE:"UNEXPECTED_WHITESPACE"}).parse=function(e){var t,n=r.result=[];for(r.COLUMN_SEPARATOR=r.COLUMN_SEPARATOR instanceof RegExp?new RegExp("^"+r.COLUMN_SEPARATOR.source):r.COLUMN_SEPARATOR,r.offset=0,r.str=e,r.record_begin(),r.debug("parse()",e);;){if(t=e[r.offset++],r.debug("c",t),null==t){r.escaped&&r.error(r.ERROR_EOF),r.record&&(r.token_end(),r.record_end()),r.debug("...bail",t,r.state,r.record),r.reset();break}if(null==r.record){if(r.RELAXED&&("\n"==t||"\r"==t&&"\n"==e[r.offset+1]))continue;r.record_begin()}if(0==r.state){if((" "===t||"\t"===t)&&'"'==r.next_nonspace()){if(r.RELAXED||r.IGNORE_QUOTE_WHITESPACE)continue;r.warn(r.WARN_SPACE)}if('"'==t&&!r.IGNORE_QUOTES){r.debug("...escaped start",t),r.escaped=!0,r.state=1;continue}r.state=1}1==r.state&&r.escaped?'"'==t?'"'==e[r.offset]?(r.debug("...escaped quote",t),r.token+='"',r.offset++):(r.debug("...escaped end",t),r.escaped=!1,r.state=2):(r.token+=t,r.debug("...escaped add",t,r.token)):"\r"==t?("\n"==e[r.offset]?r.offset++:r.CARRIAGE_RETURN_OK||r.error(r.ERROR_CHAR),r.token_end(),r.record_end()):"\n"==t?(r.LINE_FEED_OK||r.RELAXED||r.error(r.ERROR_CHAR),r.token_end(),r.record_end()):r.test_regex_separator(e)||r.COLUMN_SEPARATOR==t?r.token_end():1==r.state?(r.token+=t,r.debug("...add",t,r.token)):" "===t||"\t"===t?r.IGNORE_QUOTE_WHITESPACE||r.error(r.WARN_SPACE):r.RELAXED||r.error(r.ERROR_CHAR)}return n},r.stream=function(){var e=new(n(19).Transform)({objectMode:!0});return e.EOL="\n",e.prior="",e.emitter=function(e){return function(t){e.push(r.parse(t+e.EOL))}}(e),e._transform=function(e,t,n){var r=""==this.prior?e.toString().split(this.EOL):(this.prior+e.toString()).split(this.EOL);this.prior=r.pop(),r.forEach(this.emitter),n()},e._flush=function(e){""!=this.prior&&(this.emitter(this.prior),this.prior=""),e()},e},r.test_regex_separator=function(e){return r.COLUMN_SEPARATOR instanceof RegExp&&(e=e.slice(r.offset-1),(t=r.COLUMN_SEPARATOR.exec(e))&&(r.offset+=t[0].length-1),null!==t);var t},r.stream.json=function(){var e=n(65),t=(n(19),new streamTransform({objectMode:!0}));return t._transform=function(n,r,o){t.push(JSON.stringify(n.toString())+e.EOL),o()},t},r.reset=function(){r.state=null,r.token=null,r.escaped=null,r.record=null,r.offset=null,r.result=null,r.str=null},r.next_nonspace=function(){for(var e,t=r.offset;t<r.str.length;)if(" "!=(e=r.str[t++])&&"\t"!==e)return e;return null},r.record_begin=function(){r.escaped=!1,r.record=[],r.token_begin(),r.debug("record_begin")},r.record_end=function(){r.state=4,!r.IGNORE_RECORD_LENGTH&&!r.RELAXED&&r.result.length>0&&r.record.length!=r.result[0].length&&r.error(r.ERROR_EOL),r.result.push(r.record),r.debug("record end",r.record),r.record=null},r.resolve_type=function(e){return e.match(/^[-+]?[0-9]+(\.[0-9]+)?([eE][-+]?[0-9]+)?$/)?e=parseFloat(e):e.match(/^(true|false)$/i)?e=Boolean(e.match(/true/i)):"undefined"===e?e=void 0:"null"===e&&(e=null),e},r.token_begin=function(){r.state=0,r.token=""},r.token_end=function(){r.DETECT_TYPES&&(r.token=r.resolve_type(r.token)),r.record.push(r.token),r.debug("token end",r.token),r.token_begin()},r.debug=function(){r.DEBUG&&console.log(arguments)},r.dump=function(e){return[e,"at char",r.offset,":",r.str.substr(r.offset-50,50).replace(/\r/gm,"\\r").replace(/\n/gm,"\\n").replace(/\t/gm,"\\t")].join(" ")},r.error=function(e){var t=r.dump(e);throw r.reset(),t},r.warn=function(e){if(r.DEBUG){var t=r.dump(e);try{return void console.warn(t)}catch(e){}try{console.log(t)}catch(e){}}},e.exports?e.exports=r:t.CSV=r},function(e,t,n){"use strict";t.byteLength=function(e){var t=s(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=s(e),i=r[0],l=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,i,l)),c=0,f=l>0?i-4:i;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===l&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===l&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],i=0,l=n-o;i<l;i+=16383)a.push(c(e,i,i+16383>l?l:i+16383));1===o?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,u=i.length;l<u;++l)r[l]=i[l],o[i.charCodeAt(l)]=l;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var o,a,i=[],l=t;l<n;l+=3)o=(e[l]<<16&16711680)+(e[l+1]<<8&65280)+(255&e[l+2]),i.push(r[(a=o)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var a,i,l=8*o-r-1,u=(1<<l)-1,s=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=l;c>0;a=256*a+e[t+f],f+=d,c-=8);for(i=a&(1<<-c)-1,a>>=-c,c+=r;c>0;i=256*i+e[t+f],f+=d,c-=8);if(0===a)a=1-s;else{if(a===u)return i?NaN:1/0*(h?-1:1);i+=Math.pow(2,r),a-=s}return(h?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,l,u,s=8*a-o-1,c=(1<<s)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),(t+=i+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(i++,u/=2),i+f>=c?(l=0,i=c):i+f>=1?(l=(t*u-1)*Math.pow(2,o),i+=f):(l=t*Math.pow(2,f-1)*Math.pow(2,o),i=0));o>=8;e[n+h]=255&l,h+=p,l/=256,o-=8);for(i=i<<o|l,s+=o;s>0;e[n+h]=255&i,h+=p,i/=256,s-=8);e[n+h-p]|=128*g}},function(e,t){},function(e,t,n){"use strict";var r=n(12).Buffer,o=n(56);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,o,a=r.allocUnsafe(e>>>0),i=this.head,l=0;i;)t=i.data,n=a,o=l,t.copy(n,o),l+=i.data.length,i=i.next;return a},e}(),o&&o.inspect&&o.inspect.custom&&(e.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(58),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(8))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,a,i,l,u=1,s={},c=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(i="setImmediate$"+Math.random()+"$",l=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&p(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",l,!1):e.attachEvent("onmessage",l),r=function(t){e.postMessage(i+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return s[u]=o,r(u),u++},d.clearImmediate=h}function h(e){delete s[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=s[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(10))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(8))},function(e,t,n){"use strict";e.exports=a;var r=n(26),o=n(9);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}o.inherits=n(7),o.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){e.exports=n(6)},function(e,t,n){e.exports=n(14).Transform},function(e,t,n){e.exports=n(14).PassThrough},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,n){"use strict";var r=b(n(0)),o=b(n(2));n(67);var a=b(n(68)),i=b(n(69)),l=n(70),u=b(n(71)),s=b(n(72)),c=b(n(73)),f=b(n(74)),d=b(n(75)),h=b(n(76)),p=b(n(77)),g=b(n(78)),v=b(n(79)),m=b(n(80));function b(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n=(0,r.default)("<div>"+e+"</div>"),o=n.find("table");return o.length&&(o.get().forEach((function(e){var n=t(e);e.hasAttribute("data-tomark-pass")&&n.setAttribute("data-tomark-pass",""),(0,r.default)(e).replaceWith(n)})),e=n.html()),e}function w(e){var t=e.command;if(t.isWWType())switch(t.getName()){case"AddRow":e.command=c.default;break;case"AddCol":e.command=f.default;break;case"RemoveRow":e.command=d.default;break;case"RemoveCol":e.command=h.default;break;case"AlignCol":e.command=p.default}}o.default.defineExtension("table",(function(e){var t=e.eventManager;if(function(e){e.listen("convertorAfterMarkdownToHtmlConverted",(function(e){return y(e,a.default)})),e.listen("convertorBeforeHtmlToMarkdownConverted",(function(e){return y(e,i.default)})),e.listen("addCommandBefore",w)}(t),!e.isViewer()){var n,r,o,c=e.wwEditor.componentManager,f=e.getUI().getPopupTableUtils();!function(e){e.addCommand(g.default),e.addCommand(v.default)}(e),function(e){e.removeManager("table"),e.removeManager("tableSelection"),e.addManager(u.default),e.addManager(s.default)}(c),e.toMarkOptions=(n=e.toMarkOptions,o=(r=n||{}).renderer,r.renderer=(0,l.createToMarkRenderer)(o),r),f&&m.default.updateContextMenu(f,t,c.getManager("tableSelection"))}}))},function(e,t,n){"use strict";var r,o=n(2);var a=((r=o)&&r.__esModule?r:{default:r}).default.i18n;a&&(a.setLanguage(["ko","ko_KR"],{"Merge cells":" ","Unmerge cells":" ","Cannot change part of merged cell":"      .","Cannot paste row merged cells into the table header":"       ."}),a.setLanguage(["en","en_US"],{"Merge cells":"Merge cells","Unmerge cells":"Unmerge cells","Cannot change part of merged cell":"Cannot change part of merged cell.","Cannot paste row merged cells into the table header":"Cannot paste row merged cells into the table header."}),a.setLanguage(["es","es_ES"],{"Merge cells":"Combinar celdas","Unmerge cells":"Separar celdas","Cannot change part of merged cell":"No se puede cambiar parte de una celda combinada.","Cannot paste row merged cells into the table header":"No se pueden pegar celdas combinadas en el encabezado de tabla."}),a.setLanguage(["ja","ja_JP"],{"Merge cells":"","Unmerge cells":"","Cannot change part of merged cell":"","Cannot paste row merged cells into the table header":""}),a.setLanguage(["nl","nl_NL"],{"Merge cells":"Cellen samenvoegen","Unmerge cells":"Samengevoegde cellen ongedaan maken","Cannot change part of merged cell":"Kan geen deel uit van een samengevoegde cel veranderen.","Cannot paste row merged cells into the table header":"Kan geen rij met samengevoegde cellen in de koptekst plakken."}),a.setLanguage(["zh","zh_CN"],{"Merge cells":"","Unmerge cells":"","Cannot change part of merged cell":"","Cannot paste row merged cells into the table header":""}),a.setLanguage(["de","de_DE"],{"Merge cells":"Zellen zusammenfhren","Unmerge cells":"Zusammenfhren rckgngig machen","Cannot change part of merged cell":"Der Teil der verbundenen Zelle kann nicht gendert werden.","Cannot paste row merged cells into the table header":"Die Zeile der verbundenen Zellen kann nicht in die Kopfzeile eingefgt werden."}),a.setLanguage(["ru","ru_RU"],{"Merge cells":" ","Unmerge cells":" ","Cannot change part of merged cell":"      .","Cannot paste row merged cells into the table header":"        ."}),a.setLanguage(["fr","fr_FR"],{"Merge cells":"Fusionner les cellules","Unmerge cells":"Sparer les cellules","Cannot change part of merged cell":"Impossible de modifier une partie de la cellule fusionne.","Cannot paste row merged cells into the table header":"Impossible de coller les cellules fusionnes dans l'en-tte du tableau."}),a.setLanguage(["uk","uk_UA"],{"Merge cells":"' ","Unmerge cells":"' ","Cannot change part of merged cell":"      .","Cannot paste row merged cells into the table header":"    '    ."}),a.setLanguage(["tr","tr_TR"],{"Merge cells":"Hcreleri birletir","Unmerge cells":"Hcreleri ayr","Cannot change part of merged cell":"Birletirilmi hcrelerin bir ksm deitirelemez.","Cannot paste row merged cells into the table header":"Satrda birletirilmi hcreler stun balna yaptrlamaz"}),a.setLanguage(["fi","fi_FI"],{"Merge cells":"Yhdist solut","Unmerge cells":"Jaa solut","Cannot change part of merged cell":"Yhdistettyjen solujen osaa ei voi muuttaa","Cannot paste row merged cells into the table header":"Soluja ei voi yhdist taulukon otsikkoriviin"}),a.setLanguage(["cs","cs_CZ"],{"Merge cells":"Spojit buky","Unmerge cells":"Rozpojit buky","Cannot change part of merged cell":"Nelze mnit st spojen buky","Cannot paste row merged cells into the table header":"Nelze vkldat spojen buky do zhlav tabulky"}),a.setLanguage(["ar","ar_AR"],{"Merge cells":" ","Unmerge cells":"  ","Cannot change part of merged cell":"      ","Cannot paste row merged cells into the table header":"          "}),a.setLanguage(["pl","pl_PL"],{"Merge cells":"Scal komrki","Unmerge cells":"Rozcz komrki","Cannot change part of merged cell":"Nie mona zmieni czci scalonej komrki.","Cannot paste row merged cells into the table header":"Nie mona wklei komrek o scalonym rzdzie w nagwek tabeli."}),a.setLanguage(["zh","zh_TW"],{"Merge cells":"","Unmerge cells":"","Cannot change part of merged cell":"","Cannot paste row merged cells into the table header":""}),a.setLanguage(["gl","gl_ES"],{"Merge cells":"Combinar celas","Unmerge cells":"Separar celas","Cannot change part of merged cell":"Non se pode cambiar parte dunha cela combinada","Cannot paste row merged cells into the table header":"Non se poden pegar celas no encabezado da tboa"}),a.setLanguage(["sv","sv_SE"],{"Merge cells":"Sammanfoga celler","Unmerge cells":"Dela celler","Cannot change part of merged cell":"Ej mjligt att ndra en del av en sammanfogad cell","Cannot paste row merged cells into the table header":"Ej mjligt att klistra in rad-sammanfogade celler i tabellens huvud"}),a.setLanguage(["it","it_IT"],{"Merge cells":"Unisci celle","Unmerge cells":"Separa celle","Cannot change part of merged cell":"Non  possibile modificare parte di una cella unita","Cannot paste row merged cells into the table header":"Non  possibile incollare celle unite per riga nell'intestazione della tabella"}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._extractPropertiesForMerge=l,t._parseTableCell=u,t._createTableObjectFrom$Table=s,t._divideTrs=c,t._mergeByColspan=f,t._getRemovalTdCountsByRowspan=d,t._mergeByRowspan=h,t.default=function(e){var t=s((0,r.default)(e)),n=c(t),o=n[0],i=n[1];return f(o),f(i),h(i),(0,r.default)(a.default.createTableHtml(t))[0]};var r=i(n(0)),o=i(n(1)),a=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){var r=new RegExp("^((?:"+n+"=[0-9]+:)?)"+t+"=([0-9]+):(.*)").exec(e),o=1;return r&&(o=parseInt(r[2],10),e=r[1]+r[3]),[o,e]}function u(e){var t,n=e.nodeName,r=e.align||"",o=e.innerHTML.trim(),a=l(o,"@cols","@rows");t=a[0];var i=l(o=a[1],"@rows","@cols");return{nodeName:n,colspan:t,rowspan:i[0],content:o=i[1],align:r}}function s(e){return e.find("tr").get().map((function(e){return(0,r.default)(e).find("td, th").get().map(u)}))}function c(e){var t,n,r,a=(t=e,n=function(e){return"TD"===e[0].nodeName},r=-1,o.default.forEach(t,(function(e,t){var o=!0;return n(e,t)&&(r=t,o=!1),o})),r);return[e.slice(0,a),e.slice(a)]}function f(e){e.forEach((function(e){var t=e.length,n=0;e.forEach((function(e){n+=e.colspan-1})),e.splice(t-n)}))}function d(e){var t=e.map((function(e,t){return t})),n=t.map((function(){return 0}));return e.forEach((function(e,r){var o=e.filter((function(e){return e.rowspan>1})),a=r+1;o.forEach((function(e){var r=e.colspan,o=a+(e.rowspan-1);t.slice(a,o).forEach((function(e){n[e]+=r}))}))})),n}function h(e){var t=d(e);e.forEach((function(e,n){e.splice(e.length-t[n])}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._prependMergeSyntaxToContent=i,t.default=function(e){return(0,a.default)(e).find("td, th").get().forEach(i),e};var r,o=n(0),a=(r=o)&&r.__esModule?r:{default:r};function i(e){var t=(0,a.default)(e),n=t.attr("colspan")||"",r=t.attr("rowspan")||"",o=t.html();n&&(o="@cols="+n+":"+o),r&&(o="@rows="+r+":"+o),o&&t.html(o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getAdditionalThCount=s,t._createTheadMarkdown=c,t.createToMarkRenderer=function(e){return a.default.Renderer.factory(e||a.default.gfmRenderer,{THEAD:c})};var r=i(n(0)),o=i(n(1)),a=i(n(17));function i(e){return e&&e.__esModule?e:{default:e}}var l=/@cols=[0-9]+:/g;function u(e,t){return o.default.range(0,t).map((function(){return e})).join("")}function s(e){var t=0;return e.filter((function(e){return(0,r.default)(e).attr("colspan")})).forEach((function(e){t+=parseInt((0,r.default)(e).attr("colspan"),10)-1})),t}function c(e,t){var n=(0,r.default)(e).find("th").get(),o=n.map((function(e){return" "+function(e){var t=e.align,n=(e.textContent||e.innerText).replace(l,"").length,r="",o="";return t&&("left"===t?(r=":",n-=1):"right"===t?(o=":",n-=1):"center"===t&&(o=":",r=":",n-=2)),r+u("-",n=Math.max(n,3))+o}(e)+" |"})).join("");return o+=u(" --- |",s(n)),t?t+"|"+o+"\n":""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),a=c(n(1)),i=c(n(2)),l=c(n(3)),u=c(n(4)),s=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}var f=i.default.WwTableManager,d=i.default.i18n,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_updateCopyDataMergeWith",value:function(e,t){e.forEach((function(e){e.forEach((function(e){a.default.isExisty(e.rowMergeWith)&&(e.rowMergeWith-=t.rowIndex),a.default.isExisty(e.colMergeWith)&&(e.colMergeWith-=t.colIndex)}))}))}},{key:"_createCopyTableData",value:function(e,t,n){var r=e.slice(t.rowIndex,n.rowIndex+1);return r=r.map((function(e){return e.slice(t.colIndex,n.colIndex+1)})),this._updateCopyDataMergeWith(r,t),r}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection").getSelectedCells();if(t.length){var n=l.default.createTableData((0,o.default)(t[0]).closest("TABLE")),r=s.default.getTableSelectionRange(n,t),a=r.start,i=r.end,c=this._createCopyTableData(n,a,i),f=l.default.createCellIndexData(c),d=l.default.createRenderData(c,f);e.html(u.default.createTableHtml(d))}}},{key:"prepareToTableCellStuffing",value:function(e){var t=e[0].length,n=!1;return e.slice(1).forEach((function(e){var r=e.length;t!==r&&(n=!0,t<r&&(t=r))})),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=(0,o.default)(e),n=l.default.createTableData(t),r=l.default.addTbodyOrTheadIfNeed(n),a=this.prepareToTableCellStuffing(n),i=a.needTableCellStuffingAid;i&&l.default.stuffCellsIntoIncompleteRow(n,a.maximumCellLength),(r||i)&&u.default.replaceTable(t,n)}},{key:"_findStartCell",value:function(e){return 1===e.length?e.get(0):this.wwe.getEditor().getSelection().startContainer}},{key:"_findStartCellIndex",value:function(e,t){var n=l.default.createCellIndexData(e);return l.default.findCellIndex(n,t)}},{key:"_hasRowMergedHeader",value:function(e,t,n){var r="TH"===t[n.rowIndex][n.colIndex].nodeName,o=p(e[0],(function(e){return e.rowspan&&e.rowspan>1}));return r&&o}},{key:"_isExactlyFit",value:function(e,t,n){return t%e.length==0&&n%e[0].length==0}},{key:"_updateClipboardTableData",value:function(e,t,n){var r=e.length,o=e[0].length,i=parseInt(t/r,10),l=parseInt(n/o,10);if(i>1){var u=JSON.parse(JSON.stringify(e));a.default.range(0,i-1).forEach((function(){var t=JSON.parse(JSON.stringify(u));e.push.apply(e,t)}))}if(l>1){var s=JSON.parse(JSON.stringify(e));a.default.range(0,l-1).forEach((function(){var t=JSON.parse(JSON.stringify(s));e.forEach((function(e,n){e.push.apply(e,t[n])}))}))}}},{key:"_updateTableDataByClipboardData",value:function(e,t,n){var r=n.rowIndex,o=n.colIndex;e.forEach((function(e,n){var a=r+n;e.forEach((function(e,n){var r=o+n,i=t[a][r];e.nodeName=i.nodeName,t[a][r]=e}))}))}},{key:"_isPossibleToPaste",value:function(e,t,n){var r=t.rowIndex,o=t.colIndex,i=n.rowIndex,l=n.colIndex,u=e.slice(r,i+1),s=!p(u[0].slice(o,l+1),(function(e){return a.default.isExisty(e.rowMergeWith)}));s&&(s=!p(a.default.pluck(u,o),(function(e){return a.default.isExisty(e.colMergeWith)})));s&&e.length>i+1&&(s=!p(e[i+1].slice(o,l+1),(function(e){return a.default.isExisty(e.rowMergeWith)})));s&&e[0].length>l+1&&(s=!p(a.default.pluck(u,l+1),(function(e){return a.default.isExisty(e.colMergeWith)})));return s}},{key:"_spliceClipboardData",value:function(e,t,n){e.splice(t),e.forEach((function(e){e.splice(n)}))}},{key:"_bookmarkLastTd",value:function(e){var t=e.rowIndex,n=e.colIndex,r=this.wwe.getEditor().get$Body().find(".tui-paste-table-bookmark"),i=l.default.createTableData(r),u=i[t][n];t=a.default.isExisty(u.rowMergeWith)?u.rowMergeWith:t,n=a.default.isExisty(u.colMergeWith)?u.colMergeWith:n;var s=i[t][n].elementIndex,c=r.find("tr").eq(s.rowIndex).children()[s.colIndex];r.removeClass("tui-paste-table-bookmark"),(0,o.default)(c).addClass("tui-paste-table-cell-bookmark")}},{key:"_updateClipboardDataForPasteToSamllerSelectedArea",value:function(e,t,n,r,o){var a=!0,i={rowIndex:n-1,colIndex:r-1};return this._isPossibleToPaste(e,{rowIndex:0,colIndex:0},i)?(this._spliceClipboardData(e,n,r),this._updateTableDataByClipboardData(e,t,o)):a=!1,a}},{key:"_pasteToSelectedArea",value:function(e,t,n,r){var o=s.default.getTableSelectionRange(n,r),a=o.start,i=o.end,l=i.rowIndex-a.rowIndex+1,c=i.colIndex-a.colIndex+1,f=t.length,h=t[0].length,p=l>=f&&c>=h,g=d.get("Cannot change part of merged cell"),v=!0,m=void 0;this._hasRowMergedHeader(t,n,a)?(g=d.get("Cannot paste row merged cells into the table header"),v=!1):this._isExactlyFit(t,l,c)?(m=i,this._updateClipboardTableData(t,l,c),this._updateTableDataByClipboardData(t,n,a)):p?(m={rowIndex:a.rowIndex+f-1,colIndex:a.colIndex+h-1},this._isPossibleToPaste(n,a,m)?this._updateTableDataByClipboardData(t,n,a):v=!1):(m={rowIndex:a.rowIndex+l-1,colIndex:a.colIndex+c-1},v=this._updateClipboardDataForPasteToSamllerSelectedArea(t,n,l,c,a)),v?(n.className+=" tui-paste-table-bookmark",u.default.replaceTable(e,n),this._bookmarkLastTd(m)):(alert(g),this.wwe.focus())}},{key:"_findEndCellIndex",value:function(e,t){var n=t.rowIndex,r=t.colIndex;return{rowIndex:n+e.length-1,colIndex:r+e[0].length-1}}},{key:"_expandRow",value:function(e,t){var n=e.length,r=e[0].length,o=a.default.range(n,n+t).map((function(e){return a.default.range(0,r).map((function(t){return l.default.createBasicCell(e,t)}))}));e.push.apply(e,o)}},{key:"_expandCoumn",value:function(e,t){var n=e[0].length,r=a.default.range(n,n+t);e.forEach((function(e,t){var n=e[0].nodeName,o=r.map((function(e){return l.default.createBasicCell(t,e,n)}));e.push.apply(e,o)}))}},{key:"_expandTableDataIfNeed",value:function(e,t,n){var r=n.rowIndex-e.length+1,o=n.colIndex-e[0].length+1;r>0&&this._expandRow(e,r),o>0&&this._expandCoumn(e,o)}},{key:"_pasteAllClipboardTableData",value:function(e,t,n,r){var o=this._findEndCellIndex(t,r);if(this._hasRowMergedHeader(t,n,r))return alert(d.get("Cannot paste row merged cells into the table header")),void this.wwe.focus();this._expandTableDataIfNeed(n,r,o),this._isPossibleToPaste(n,r,o)?(this._updateTableDataByClipboardData(t,n,r),n.className+=" tui-paste-table-bookmark",u.default.replaceTable(e,n),this._bookmarkLastTd(o)):(alert(d.get("Cannot change part of merged cell")),this.wwe.focus())}},{key:"pasteTableData",value:function(e){var t=(0,o.default)(e),n=l.default.createTableData(t),r=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),a=(0,o.default)(this._findStartCell(r)),i=a.closest("table"),u=l.default.createTableData(i),s=this._findStartCellIndex(u,a);r.length>1?this._pasteToSelectedArea(i,n,u,r):this._pasteAllClipboardTableData(i,n,u,s)}}]),t}(f);function p(e,t){var n=!1;return a.default.forEach(e,(function(e){return!(n=t(e))})),n}t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=s(n(1)),i=s(n(2)),l=s(n(3)),u=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var c=i.default.WwTableSelectionManager,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._tableData=null,n.mergedTableSelectionManager=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_addClassToSelectedCells",value:function(e,t,n){var r=n.start,o=n.end,i=a.default.range(r.colIndex,o.colIndex+1),l=e.find("tr");a.default.range(r.rowIndex,o.rowIndex+1).forEach((function(e){var n=t[e],r=l.eq(e).find("td, th");return i.forEach((function(e){n[e].elementIndex&&r.eq(n[e].elementIndex.colIndex).addClass("te-cell-selected")}))}))}},{key:"onDragStart",value:function(e){var t=(0,o.default)(e).closest("[contenteditable=true] table");this._tableData=l.default.createTableData(t)}},{key:"onDragEnd",value:function(){this._tableData=null}},{key:"highlightTableCellsBy",value:function(e,t){var n=(0,o.default)(e),r=(0,o.default)(t),a=n.closest("[contenteditable=true] table"),i=u.default.findSelectionRange(this._tableData,n,r);this.removeClassAttrbuteFromAllCellsIfNeed(),this._addClassToSelectedCells(a,this._tableData,i)}},{key:"styleToSelectedCells",value:function(e,t){var n=this.wwe.getEditor(),r=n.getSelection().cloneRange();(0,o.default)(r.startContainer).closest("[contenteditable=true] table").find("tr").get().forEach((function(a){var i=(0,o.default)(a).find(".te-cell-selected"),l=i.first().get(0),u=i.last().get(0);i.length&&(r.setStart(l,0),r.setEnd(u,u.childNodes.length),n.setSelection(r),e(n,t))}))}},{key:"hasSelectedBothThAndTd",value:function(e){return(e=e||this.getSelectedCells()).first()[0].nodeName!==e.last()[0].nodeName}}]),t}(c);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._createNewRow=d,t._addRow=h;var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=void 0;function d(e,t){var n=null;return e[t].map((function(r,a){var l=void 0;if(o.default.isExisty(r.rowMergeWith)){var u=r.rowMergeWith,s=e[u][a],c=u+s.rowspan-1;o.default.isExisty(s.colMergeWith)&&n?l=o.default.extend({},n):c>t&&(s.rowspan+=1,l=o.default.extend({},r))}else r.rowspan>1&&(r.rowspan+=1,l=function(e){return{nodeName:"TD",rowMergeWith:e}}(t));return l||(l=i.default.createBasicCell(t+1,a)),n=l,l}))}function h(e,t){var n=t.start.rowIndex,r=t.end,a=i.default.findRowMergedLastIndex(e,r.rowIndex,r.colIndex),l=o.default.range(n,a+1).map((function(){return d(e,a)}));e.splice.apply(e,[a+1,0].concat(l))}c&&(f=c.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var o=(0,r.default)(n.startContainer),a=o.closest("table"),s=i.default.createTableData(a),c=e.componentManager.getManager("tableSelection").getSelectedCells(),f=l.default.getTableSelectionRange(s,c,o);t.saveUndoState(n),h(s,f);var d=function(e,t,n){var r=i.default.createTableData(e),o=i.default.findRowMergedLastIndex(r,t,n)+1,a=i.default.findElementIndex(r,o,n);return e.find("tr").eq(a.rowIndex).find("td")[a.colIndex]}(u.default.replaceTable(a,s),f.end.rowIndex,f.start.colIndex);u.default.focusToCell(t,n,d)}}})),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._createNewColumns=d,t._addColumns=h;var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=void 0;function d(e,t,n){var r=o.default.range(t,n+1),a=[],l=null;return e.forEach((function(e,t){var u=r.map((function(r,a){var u=l?l[a-1]:null;return function(e,t,n,r){var a=e[n],l=void 0;if(o.default.isExisty(a.colMergeWith)){var u=a.colMergeWith,s=e[u],c=u+s.colspan-1;o.default.isExisty(s.rowMergeWith)&&r?l=o.default.extend({},r):c>n&&(s.colspan+=1,l=o.default.extend({},a))}else a.colspan>1&&(a.colspan+=1,l=function(e,t){return{nodeName:t,colMergeWith:e}}(n,a.nodeName));return l||(l=i.default.createBasicCell(t,n+1,a.nodeName)),l}(e,t,n,u)}));l=u,a.push(u)})),a}function h(e,t){var n=t.end,r=i.default.findColMergedLastIndex(e,n.rowIndex,n.colIndex),o=d(e,t.start.colIndex,r),a=r+1;e.forEach((function(e,t){e.splice.apply(e,[a,0].concat(o[t]))}))}c&&(f=c.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var o=(0,r.default)(n.startContainer),a=o.closest("table"),s=i.default.createTableData(a),c=e.componentManager.getManager("tableSelection").getSelectedCells(),f=l.default.getTableSelectionRange(s,c,o);t.saveUndoState(n),h(s,f);var d=function(e,t,n){var r=i.default.createTableData(e),o=i.default.findColMergedLastIndex(r,t,n)+1,a=i.default.findElementIndex(r,t,o);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}(u.default.replaceTable(a,s),f.start.rowIndex,f.end.colIndex);u.default.focusToCell(t,n,d)}}})),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._removeRow=d;var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=void 0;function d(e,t){var n=t.start.rowIndex,r=t.end,a=i.default.findRowMergedLastIndex(e,r.rowIndex,r.colIndex);if(0!==n||0!==a){n=Math.max(n,1);var l=(a=Math.max(a,1))-n+1;e.length-l<2?e.splice(0,e.length):(!function(e,t,n){o.default.range(t,n+1).forEach((function(t){e[t].forEach((function(r,a){if(o.default.isExisty(r.rowMergeWith)){var i=e[r.rowMergeWith][a];i.rowspan&&(i.rowspan-=1)}else if(r.rowspan>1){var l=t+r.rowspan-1;r.rowspan-=n-t+1,l>n&&(e[n+1][a]=o.default.extend({},r))}}))}))}(e,n,a),function(e,t,n){e.slice(n+1).forEach((function(e){e.forEach((function(e){o.default.isExisty(e.rowMergeWith)&&e.rowMergeWith>=t&&(e.rowMergeWith=n+1)}))}))}(e,n,a),e.splice(n,l))}}c&&(f=c.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var o=(0,r.default)(n.startContainer),a=o.closest("table"),s=i.default.createTableData(a),c=s.length,f=e.componentManager.getManager("tableSelection").getSelectedCells(),h=l.default.getTableSelectionRange(s,f,o);if(t.saveUndoState(n),d(s,h),s.length<2)a.remove();else if(c!==s.length){var p=u.default.replaceTable(a,s),g=h.start.rowIndex,v=function(e,t,n){var r=i.default.createTableData(e);r.length-1<t&&(t-=1);var o=i.default.findElementIndex(r,t,n);return e.find("tr").eq(o.rowIndex).find("th,td")[o.colIndex]}(p,g<s.length?g:g-1,h.start.colIndex);u.default.focusToCell(t,n,v)}}}})),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._removeColumns=d;var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=void 0;function d(e,t){var n=t.start.colIndex,r=t.end,a=i.default.findColMergedLastIndex(e,r.rowIndex,r.colIndex),l=a-n+1;!function(e,t,n){e.forEach((function(e){o.default.range(t,n+1).forEach((function(t){var r=e[t];if(o.default.isExisty(r.colMergeWith)){var a=e[r.colMergeWith];a.colspan&&(a.colspan-=1)}else if(r.colspan>1){var i=t+r.colspan-1;r.colspan-=n-t+1,i>n&&(e[n+1]=o.default.extend({},r))}}))}))}(e,n,a),function(e,t,n){e.forEach((function(e){e.slice(n+1).forEach((function(e){o.default.isExisty(e.colMergeWith)&&e.colMergeWith>=t&&(e.colMergeWith=n+1)}))}))}(e,n,a),e.forEach((function(e){e.splice(n,l)}))}c&&(f=c.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var o=(0,r.default)(n.startContainer),a=o.closest("table"),s=i.default.createTableData(a),c=e.componentManager.getManager("tableSelection").getSelectedCells(),f=l.default.getTableSelectionRange(s,c,o),h=s[0].length;if(t.saveUndoState(n),d(s,f),0===s[0].length)a.remove();else if(h!==s[0].length){var p=u.default.replaceTable(a,s),g=f.start.colIndex,v=g>=s[0].length?g-1:g,m=function(e,t,n){var r=i.default.createTableData(e);r[0].length-1<n&&(n-=1);var o=i.default.findElementIndex(r,t,n);return e.find("tr").eq(o.rowIndex).find("td, th")[o.colIndex]}(p,f.start.rowIndex,v);u.default.focusToCell(t,n,m)}}}})),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=void 0;c&&(f=c.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),a=n.getSelection().cloneRange();if(e.focus(),n.hasFormat("TABLE")){var s=(0,r.default)(a.startContainer),c=s.closest("table"),f=i.default.createTableData(c),d=e.componentManager.getManager("tableSelection").getSelectedCells(),h=l.default.getTableSelectionRange(f,d,s);!function(e,t,n,r){o.default.range(t,n+1).forEach((function(t){var n=e[t];o.default.isExisty(n.colMergeWith)?e[n.colMergeWith].align=r:n.align=r}))}(f[0],h.start.colIndex,h.end.colIndex,t);var p=function(e,t){var n=i.default.findElementRowIndex(t),r=i.default.findElementColIndex(t);return e.find("tr").eq(n).find("td, th")[r]}(u.default.replaceTable(c,f),s);u.default.focusToCell(n,a,p)}}})),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._mergeCells=h;var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=o.default.browser.msie?"":"<br>",d=void 0;function h(e,t){var n=t.start,r=t.end,a=n.rowIndex,i=n.colIndex,l=r.rowIndex,u=r.colIndex,s=e[a][i],c=e.slice(a,l+1),d=l-a+1,h=u-i+1;s.rowspan=d,s.colspan=h,s.content=function(e,t,n){var r,o=n+1,a=(r=[]).concat.apply(r,e.map((function(e){return e.slice(t,o)}))).filter((function(e){var t=e.content;return t&&t!==f}));return a.length?a[0].content:f}(c,i,u),function(e,t,n){var r,a=n+1,i=e.map((function(e){return e.slice(t,a)}));(r=[]).concat.apply(r,i).slice(1).forEach((function(e){var t=e.nodeName;o.default.forEach(e,(function(t,n){return delete e[n]})),e.nodeName=t}))}(c,i,u),d>1&&function(e,t,n,r){var o=n+1;e.forEach((function(e){e.slice(t,o).forEach((function(e){e.rowMergeWith=r}))}))}(c.slice(1),i,u,a),h>1&&function(e,t,n,r){var o=n+1;e.forEach((function(e){e.slice(t,o).forEach((function(e){e.colMergeWith=r}))}))}(c,i+1,u,i)}c&&(d=c.command("wysiwyg",{name:"MergeCells",exec:function(e){var t=e.getEditor();if(e.focus(),t.hasFormat("TABLE")){var n=e.componentManager.getManager("tableSelection"),o=n.getSelectedCells();if(!(o.length<2||n.hasSelectedBothThAndTd(o))){var a=t.getSelection().cloneRange(),s=(0,r.default)(a.startContainer),c=s.closest("table"),f=i.default.createTableData(c),d=l.default.getTableSelectionRange(f,o,s);h(f,d);var p=function(e,t,n){var r=i.default.createTableData(e),o=i.default.findElementIndex(r,t,n);return e.find("tr").eq(o.rowIndex).find("td, th")[o.colIndex]}(u.default.replaceTable(c,f),d.start.rowIndex,d.start.colIndex);u.default.focusToCell(t,a,p)}}}})),t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._hasMergedCell=d,t._unmergeCells=h;var r=s(n(0)),o=s(n(1)),a=s(n(2)),i=s(n(3)),l=s(n(5)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.CommandManager,f=void 0;function d(e,t){var n,r=t.start,o=t.end,a=r.colIndex,i=o.colIndex+1,l=e.slice(r.rowIndex,o.rowIndex+1).map((function(e){return e.slice(a,i)}));return!!(n=[]).concat.apply(n,l).filter((function(e){return e.colspan>1||e.rowspan>1})).length}function h(e,t){var n=t.start,r=t.end,a=o.default.range(n.colIndex,r.colIndex+1);o.default.range(n.rowIndex,r.rowIndex+1).forEach((function(t){a.forEach((function(n){var r=e[t][n],a=r.colspan,l=r.rowspan;(a>1||l>1)&&(r.colspan=1,r.rowspan=1,function(e,t,n,r,a){var l=t+r,u=n+a,s=o.default.range(n,u);o.default.range(t,l).forEach((function(n){var r=e[n],o=n===t?1:0;s.slice(o).forEach((function(e){r[e]=i.default.createBasicCell(n,e,r[e].nodeName)}))}))}(e,t,n,l,a))}))}))}c&&(f=c.command("wysiwyg",{name:"UnmergeCells",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var o=(0,r.default)(n.startContainer),a=o.closest("table"),s=i.default.createTableData(a),c=e.componentManager.getManager("tableSelection").getSelectedCells(),f=l.default.getTableSelectionRange(s,c,o);if(d(s,f)){h(s,f);var p=function(e,t,n){var r=i.default.createTableData(e),o=i.default.findElementIndex(r,t,n);return e.find("tr").eq(o.rowIndex).find("td, th")[o.colIndex]}(u.default.replaceTable(a,s),f.start.rowIndex,f.start.colIndex);u.default.focusToCell(t,n,p)}}}})),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n(2)).default.i18n;t.default={updateContextMenu:function(e,t,n){!function(e){var t=['<button type="button" class="te-table-add-row">'+a.get("Add row")+"</button>",'<button type="button" class="te-table-add-col">'+a.get("Add col")+"</button>",'<button type="button" class="te-table-remove-row">'+a.get("Remove row")+"</button>",'<button type="button" class="te-table-remove-col">'+a.get("Remove col")+"</button>","<hr/>",'<button type="button" class="te-table-merge">'+a.get("Merge cells")+"</button>",'<button type="button" class="te-table-unmerge">'+a.get("Unmerge cells")+"</button>","<hr/>",'<button type="button" class="te-table-col-align-left">'+a.get("Align left")+"</button>",'<button type="button" class="te-table-col-align-center">'+a.get("Align center")+"</button>",'<button type="button" class="te-table-col-align-right">'+a.get("Align right")+"</button>","<hr/>",'<button type="button" class="te-table-remove">'+a.get("Remove table")+"</button>"].join(""),n=(0,r.default)(t);e.setContent(n)}(e),function(e,t,n){var o=e.$content,a=(0,r.default)(o[5]),i=(0,r.default)(o[6]),l=(0,r.default)(o[7]);e.on("click .te-table-merge",(function(){t.emit("command","MergeCells")})),e.on("click .te-table-unmerge",(function(){t.emit("command","UnmergeCells")})),t.listen("openPopupTableUtils",(function(){var e=n.getSelectedCells(),t=e.length;t?(t<2||n.hasSelectedBothThAndTd(e)?a.hide():a.show(),e.is("[rowspan], [colspan]")?i.show():i.hide(),l.show()):(a.hide(),i.hide(),l.hide())}))}(e,t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),o=i(n(82)),a=i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}var l=/\{color:(.+?)}(.*?)\{color}/g,u=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)/g,s=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)<\/span>/g,c=/rgb\((\d+)[, ]+(\d+)[, ]+(\d+)\)/g,f="#181818",d=0;function h(e){var t=e.options.colorSyntax,n=void 0===t?{}:t,a=n.preset,i=n.useCustomSyntax,f=void 0!==i&&i;e.eventManager.listen("convertorAfterMarkdownToHtmlConverted",(function(e){return f?e.replace(l,(function(e,t,n){return v(n,t).result})):e})),e.eventManager.listen("convertorAfterHtmlToMarkdownConverted",(function(e){var t=f?s:u;return e.replace(t,(function(e,t,n){return t.match(c)&&(t=function(e){return e.replace(c,(function(e,t,n,r){return"#"+b(t)+b(n)+b(r)}))}(t)),f?g(n,t).result:e.replace(/ ?class="colour" ?/g," ").replace(c,t)}))})),e.isViewer()||"default"!==e.getUI().name||(e.addCommand("markdown",{name:"color",exec:function(e,t){var n=e.getEditor(),r=n.getCursor("from"),o=n.getCursor("to"),a=void 0,i=void 0;if(t){if(f){var l=g(n.getSelection(),t);a=l.result,i=l.from,n.replaceSelection(a)}else{var u=v(n.getSelection(),t);a=u.result,i=u.from,n.replaceSelection(a)}n.setSelection({line:r.line,ch:r.ch+i},{line:o.line,ch:r.line===o.line?o.ch+i:o.ch}),e.focus()}}}),e.addCommand("wysiwyg",{name:"color",exec:function(e,t){if(t){var n=e.getEditor(),r=e.componentManager.getManager("tableSelection");if(d=function(e){return e.getRoot().parentNode.scrollTop}(n),n.hasFormat("table")&&r.getSelectedCells().length){r.styleToSelectedCells(p,t);var o=n.getSelection();o.collapse(!0),n.setSelection(o)}else p(n,t)}}}),function(e,t){var n=e.i18n,a=e.getUI().getToolbar(),i=e.options.usageStatistics;e.eventManager.addEventType("colorButtonClicked"),a.insertItem(3,{type:"button",options:{name:"colorSyntax",className:"tui-color",event:"colorButtonClicked",tooltip:n.get("Text color")}});var l=a.indexOfItem("colorSyntax"),u=a.getItem(l).$el,s=(0,r.default)("<div />"),c=(0,r.default)('<button type="button" class="te-apply-button">'+n.get("OK")+"</button>"),f={container:s[0],usageStatistics:i};t&&(f.preset=t);var h=o.default.create(f),p=h.getColor();s.append(c);var g=e.getUI().createPopup({header:!1,title:!1,content:s,className:"tui-popup-color",$target:e.getUI().getToolbar().$el,css:{width:"auto",position:"absolute"}});e.eventManager.listen("focus",(function(){g.hide(),e.isWysiwygMode()&&d&&(e.getSquire().getRoot().parentNode.scrollTop=d,d=0)})),e.eventManager.listen("colorButtonClicked",(function(){if(g.isShow())g.hide();else{var t=u.get(0),n=t.offsetTop,r=t.offsetLeft;g.$el.css({top:n+u.outerHeight(),left:r}),h.slider.toggle(!0),e.eventManager.emit("closeAllPopup"),g.show()}})),e.eventManager.listen("closeAllPopup",(function(){g.hide()})),e.eventManager.listen("removeEditor",(function(){h.off("selectColor"),g.$el.find(".te-apply-button").off("click"),g.remove()})),h.on("selectColor",(function(t){p=t.color,"palette"===t.origin&&(e.exec("color",p),g.hide())})),g.$el.find(".te-apply-button").on("click",(function(){e.exec("color",p)}))}(e,a))}function p(e,t){e.hasFormat("PRE")||(t===f?e.changeFormat(null,{class:"colour",tag:"span"}):e.setTextColour(t))}function g(e,t){return m("{color:"+t+"}",e,"{color}")}function v(e,t){return m('<span style="color:'+t+'">',e,"</span>")}function m(e,t,n){return{result:""+e+t+n,from:e.length,to:e.length+t.length}}function b(e){var t,n=parseInt(e,10);return n=n.toString(16),n=(t="00"+n).substr(t.length-2)}a.default.defineExtension("colorSyntax",h),t.default=h},function(e,t){e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(84)),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var i=o.default.codeBlockManager,l="http://www.plantuml.com/plantuml/png/",u=["uml","plantuml"];function s(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).rendererURL,n=void 0===t?l:t;function o(e){var t=void 0;try{if(!r.default)throw new Error("plantuml-encoder dependency required");t='<img src="'+n+r.default.encode(e)+'" />'}catch(e){t="Error occurred on encoding uml: "+e.message}return t}var a=e.options.codeBlockLanguages;u.forEach((function(e){a.indexOf(e)<0&&a.push(e),i.setReplacer(e,o)}))}o.default.defineExtension("uml",s),t.default=s},function(e,t){e.exports=l},function(e,t,n){"use strict";var r,o=n(0),a=(r=o)&&r.__esModule?r:{default:r};var i=n(16);a.default.fn.tuiEditor=function(){var e=void 0,t=void 0,n=this.get(0);if(n){for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];var u;if(e=o[0]||{},t=a.default.data(n,"tuiEditor")){if("string"==typeof e)return(u=t)[e].apply(u,o.slice(1))}else e.el=n,t=new i(e),a.default.data(n,"tuiEditor",t)}return this},e.exports=i}])}));