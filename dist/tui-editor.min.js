/*!
 * tui-editor
 * @version 0.13.0-a
 * @author Sungho Kim <shirenbeat@gmail.com>
 * @license MIT
 */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="dist/",t(t.s=73)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(23),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=tui,s=l.util,u=/Mac/.test(navigator.platform),c=u?1:0,d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._command=new s.Map,this._mdCommand=new s.Map,this._wwCommand=new s.Map,this._options=$.extend({useCommandShortcut:!0},n),this.base=t,this.keyMapCommand={},this._initEvent()}return i(e,[{key:"_addCommandBefore",value:function(e){var t={command:e};return this.base.eventManager.emit("addCommandBefore",t),t.command||e}},{key:"addCommand",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.length&&(t=e.command.apply(e,[t].concat(r))),t=this._addCommandBefore(t);var o=t.getName(),a=void 0;return t.isMDType()?a=this._mdCommand:t.isWWType()?a=this._wwCommand:t.isGlobalType()&&(a=this._command),a.set(o,t),t.keyMap&&(this.keyMapCommand[t.keyMap[c]]=o),t}},{key:"_initEvent",value:function(){var e=this;this.base.eventManager.listen("command",function(){e.exec.apply(e,arguments)}),this.base.eventManager.listen("keyMap",function(t){if(e._options.useCommandShortcut){var n=e.keyMapCommand[t.keyMap];n&&(t.data.preventDefault(),e.exec(n))}})}},{key:"exec",value:function(e){var t=void 0,n=void 0,r=this.base;if(t=this._command.get(e),t||(this.base.isMarkdownMode()?(t=this._mdCommand.get(e),r=this.base.mdEditor):(t=this._wwCommand.get(e),r=this.base.wwEditor)),t){for(var i,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];a.unshift(r),n=(i=t).exec.apply(i,a)}return n}}]),e}();d.command=function(e,t){var n=a.default.factory(e,t.name,t.keyMap);return s.extend(n,t),n},e.exports=d},function(e,t,n){"use strict";var r=/\u200B/g,i=tui,o=i.util,a=function(e){return e&&e.nodeType===Node.TEXT_NODE},l=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},s=function(e){return l(e)?e.tagName:"TEXT"},u=function(e){var t=void 0;return l(e)?t=e.textContent.replace(r,"").length:a(e)&&(t=e.nodeValue.replace(r,"").length),t},c=function(e){var t=void 0;return l(e)?t=e.childNodes.length:a(e)&&(t=e.nodeValue.replace(r,"").length),t},d=function(e){var t=e.parentNode.childNodes,n=void 0,r=void 0,i=void 0;for(n=0,r=t.length;n<r;n+=1)if(t[n]===e){i=n;break}return i},f=function(e,t){var n=void 0;return a(e)?n=e:e.childNodes.length&&t>=0&&(n=e.childNodes[t]),n},h=function(e,t,n){for(var r=e+"Sibling",i=void 0,o=void 0;t&&!t[r]&&(i=s(t.parentNode))!==n&&"BODY"!==i;)t=t.parentNode;return t[r]&&(o=t[r]),o},g=function(e,t,n){return t>0?f(e,t-1):h("previous",e,n)},p=function(e,t){for(var n=void 0;e.parentNode&&!t(e.parentNode);)e=e.parentNode;return t(e.parentNode)&&(n=e),n},v=function(e,t){return o.isString(t)?p(e,function(e){return t===s(e)}):p(e,function(e){return t===e})},m=function(e,t,n){var r=e+"Sibling",i=void 0;return t=v(t,n),t&&t[r]&&(i=t[r]),i},y=function(e,t){return m("previous",e,t)},_=function(e,t){return m("next",e,t)},b=function(e){return v(e,"BODY")},k=function(e){for(e=e.previousSibling||e.parentNode;!a(e)&&"BODY"!==s(e);)if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode;return"BODY"===s(e)&&(e=null),e},w=function(e,t,n){var r=[],i="",a=0,l=void 0;if(!t.length)return r;for(var s=t.shift(),u=document.createTreeWalker(e,4,null,!1);u.nextNode();){for(i=u.currentNode.nodeValue||"",n&&(i=n(i)),l=a+i.length;l>=s;){if(r.push({container:u.currentNode,offsetInContainer:s-a,offset:s}),!t.length)return r;s=t.shift()}a=l}do{r.push({container:u.currentNode,offsetInContainer:i.length,offset:s}),s=t.shift()}while(!o.isUndefined(s));return r},C=function(e){var t={};t.tagName=e.nodeName,e.id&&(t.id=e.id);var n=e.className.trim();return n&&(t.className=n),t},E=function(e,t){for(var n=[];e&&e!==t;)l(e)&&n.unshift(C(e)),e=e.parentNode;return n},T=function(e,t){var n=!0;return tui.util.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(n=!1),n?e.nextElementSibling:e.previousElementSibling)},M=function(e,t,n){var r=!0,i=null,o=void 0,a=void 0,l=void 0,u=void 0,c=void 0,f=void 0;return tui.util.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(r=!1),e?(o=$(e),r?(l=o.parent().next(),u=o.parents("thead"),c=u[0]&&u.next(),f=c&&"TBODY"===s(c[0]),a=0):(l=o.parent().prev(),u=o.parents("tbody"),c=u[0]&&u.prev(),f=c&&"THEAD"===s(c[0]),a=e.parentNode.childNodes.length-1),!tui.util.isUndefined(n)&&n||(a=d(e)),l[0]?i=l.children("td,th")[a]:u[0]&&f&&(i=c.find("td,th")[a]),i):null)};e.exports={getNodeName:s,isTextNode:a,isElemNode:l,getTextLength:u,getOffsetLength:c,getPrevOffsetNodeUntil:g,getNodeOffsetOfParent:d,getChildNodeByOffset:f,getTopPrevNodeUnder:y,getTopNextNodeUnder:_,getParentUntil:v,getTopBlockNode:b,getPrevTextNode:k,findOffsetNode:w,getPath:E,getNodeInfo:C,getTableCellByDirection:T,getSiblingRowCellByDirection:M}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){var r=$(e),i=r.attr("colspan"),o=r.attr("rowspan"),a=e.nodeName;if("TH"!==a&&"TD"!==a)return null;var l={nodeName:e.nodeName,colspan:i?parseInt(i,10):1,rowspan:o?parseInt(o,10):1,content:r.html(),elementIndex:{rowIndex:t,colIndex:n}};return"TH"===e.nodeName&&e.align&&(l.align=e.align),l}function o(e,t,n,r){var i=t.colspan,o=t.rowspan,a=t.nodeName,l=i>1,s=o>1;if(l||s){var u=n+o,c=r+i;k.range(n,u).forEach(function(t){e[t]=e[t]||[],k.range(r,c).forEach(function(i){var o={nodeName:a};t===n&&i===r||(l&&(o.colMergeWith=r),s&&(o.rowMergeWith=n),e[t][i]=o)})})}}function a(e){var t=[];return e.find("tr").each(function(e,n){var r=0;t[e]=t[e]||[],$(n).children().each(function(n,a){var l=i(a,e,n);if(l){for(var s=n+r;t[e][s];)s+=1,r+=1;t[e][s]=l,o(t,l,e,s)}})}),e[0].className&&(t.className=e[0].className),t}function l(e){var t=[];return e.forEach(function(e,n){var r=[];e.forEach(function(e,t){k.isUndefined(e.colMergeWith)&&k.isUndefined(e.rowMergeWith)&&r.push({rowIndex:n,colIndex:t})}),t.push(r)}),t}function s(e){var t=_(e,1),n=t[0];return n.map(function(e){return k.isExisty(e.colMergeWith)?n[e.colMergeWith].align:e.align})}function u(e,t){var n=s(e),r=t.map(function(t){return t.map(function(t){var r=t.rowIndex,i=t.colIndex;return k.extend({align:n[i]},e[r][i])})});return e.className&&(r.className=e.className),r}function c(e,t,n){return{nodeName:n||"TD",colspan:1,rowspan:1,content:w,elementIndex:{rowIndex:e,colIndex:t}}}function d(e){var t=e.closest("tr"),n=t.prevAll().length;return"TBODY"===t.parent()[0].nodeName&&(n+=1),n}function f(e){return e.closest("td, th").prevAll().length}function h(e,t){var n=d(t),r=f(t);return e[n][r]}function g(e,t,n){var r=e[t][n],i=t;return r.rowspan>1&&(i+=r.rowspan-1),i}function p(e,t,n){var r=e[t][n],i=n;return r.colspan>1&&(i+=r.colspan-1),i}function v(e,t,n){var r=e[t][n];return t=k.isExisty(r.rowMergeWith)?r.rowMergeWith:t,n=k.isExisty(r.colMergeWith)?r.colMergeWith:n,e[t][n].elementIndex}function m(e,t){e.forEach(function(e,n){var r=e.length,i=_(e,1),o=i[0].nodeName;k.range(r,t).forEach(function(t){e.push(c(n,t,o))})})}function y(e){var t=_(e,1),n=t[0],i=n.length,o=!0;if(!i&&e[1])k.range(0,e[1].length).forEach(function(e){n.push(c(0,e,"TH"))});else if("TH"!==e[0][0].nodeName){var a,l=k.range(0,i).map(function(e){return c(0,e,"TH")});(a=[]).concat.apply(a,r(e)).forEach(function(e){e.elementIndex&&(e.elementIndex.rowIndex+=1)}),e.unshift(l)}else if(1===e.length){var s=k.range(0,i).map(function(e){return c(1,e,"TD")});e.push(s)}else o=!1;return o}Object.defineProperty(t,"__esModule",{value:!0});var _=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.createTableData=a,t.createCellIndexData=l;var b=tui,k=b.util,w=tui.util.browser.msie?"":"<br>";t.default={createTableData:a,createCellIndexData:l,createRenderData:u,findElementRowIndex:d,findElementColIndex:f,findCellIndex:h,createBasicCell:c,findRowMergedLastIndex:g,findColMergedLastIndex:p,findElementIndex:v,stuffCellsIntoIncompleteRow:m,addTbodyOrTheadIfNeed:y}},function(e,t,n){"use strict";function r(e,t,n){var r=c.default.createCellIndexData(e),i=c.default.findCellIndex(r,t),o=c.default.findCellIndex(r,n),a=void 0,l=void 0,s=void 0,u=void 0;return i.rowIndex>o.rowIndex?(a=o.rowIndex,l=i.rowIndex):(a=i.rowIndex,l=o.rowIndex),i.colIndex>o.colIndex?(s=o.colIndex,u=i.colIndex):(s=i.colIndex,u=o.colIndex),{start:{rowIndex:a,colIndex:s},end:{rowIndex:l,colIndex:u}}}function i(e,t,n){var r=t[n].rowIndex,i=e[r];f.range(t.start.colIndex,t.end.colIndex+1).forEach(function(n){var o=i[n],a=o.rowMergeWith,l=-1;f.isExisty(a)?(a<t.start.rowIndex&&(t.start.rowIndex=a),l=a+e[a][n].rowspan-1):o.rowspan>1&&(l=r+o.rowspan-1),l>t.end.rowIndex&&(t.end.rowIndex=l)})}function o(e,t,n,r){var i=e[n],o=i[r],a=o.colMergeWith,l=-1;f.isExisty(a)?(a<t.start.colIndex&&(t.start.colIndex=a),l=a+i[a].colspan-1):o.colspan>1&&(l=r+o.colspan-1),l>t.end.colIndex&&(t.end.colIndex=l)}function a(e,t){for(var n="";n!==JSON.stringify(t);)n=JSON.stringify(t),i(e,t,"start"),i(e,t,"end"),f.range(t.start.rowIndex,t.end.rowIndex+1).forEach(function(n){o(e,t,n,t.start.colIndex),o(e,t,n,t.end.colIndex)});return t}function l(e,t,n){return a(e,r(e,t,n))}function s(e,t,n){var r=c.default.createCellIndexData(e),i={};if(t.length){var o=c.default.findCellIndex(r,t.first()),a=f.extend({},o);t.each(function(t,n){var i=c.default.findCellIndex(r,$(n)),o=e[i.rowIndex][i.colIndex],l=i.rowIndex+o.rowspan-1,s=i.colIndex+o.colspan-1;a.rowIndex=Math.max(a.rowIndex,l),a.colIndex=Math.max(a.colIndex,s)}),i.start=o,i.end=a}else{var l=c.default.findCellIndex(r,n);i.start=l,i.end=f.extend({},l)}return i}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=tui,f=d.util;t.default={findSelectionRange:l,getTableSelectionRange:s}},function(e,t,n){"use strict";function r(e){var t=e.colspan>1?' colspan="'+e.colspan+'"':"";return t+=e.rowspan>1?' rowspan="'+e.rowspan+'"':"",t+=e.align?' align="'+e.align+'"':"","<"+e.nodeName+t+">"+e.content+"</"+e.nodeName+">"}function i(e,t){var n="";return e.length&&(n=e.map(function(e){return"<tr>"+e.map(r).join("")+"</tr>"}).join(""),n="<"+t+">"+n+"</"+t+">"),n}function o(e){var t=[e[0]],n=e.slice(1),r=i(t,"THEAD"),o=i(n,"TBODY");return"<table"+(e.className?' class="'+e.className+'"':"")+">"+(r+o)+"</renderData>"}function a(e,t){var n=u.default.createCellIndexData(t),r=u.default.createRenderData(t,n),i=$(o(r));return e.replaceWith(i),i}function l(e,t,n){t.selectNodeContents(n),t.collapse(!0),e.setSelection(t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={createTableHtml:o,replaceTable:a,focusToCell:l}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=void 0,s="en_US",u=function(){function e(){r(this,e),this._code=s,this._langs=new a.Map}return i(e,[{key:"setCode",value:function(e){this._code=e}},{key:"setLang",value:function(e,t){var n=this;e=[].concat(e),e.forEach(function(e){if(n._langs.has(e)){var r=n._langs.get(e);n._langs.set(e,a.extend(r,t))}else n._langs.set(e,t)})}},{key:"get",value:function(e,t){t||(t=this._code);var n=this._langs.get(t);n||(n=this._langs.get(s));var r=n[e];if(!r)throw new Error('There is no text key "'+e+'" in '+t);return r}}],[{key:"getSharedInstance",value:function(){return l||(l=new e),l}}]),e}();t.I18n=u,t.default=u.getSharedInstance()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=function(){function e(){r(this,e),this.exts=new a.Map}return i(e,[{key:"defineExtension",value:function(e,t){this.exts.set(e,t)}},{key:"applyExtension",value:function(e,t){var n=this;t&&t.forEach(function(t){var r=a.isObject(t),i=r?t.name:t;if(n.exts.has(i)){var o=n.exts.get(i);r?o(e,t):o(e)}})}}]),e}();e.exports=new l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=tui,c=u.util,d="tui-popup-",f='<div class="'+d+'header">\n        <span class="'+d+'title"></span>\n        <div class="'+d+'header-buttons"></div>\n        <button type="button" class="'+d+'close-button">x</button>\n    </div>\n    <div class="'+d+'body"></div>',h='<div class="'+d+'wrapper">\n        <div class="'+d+'header">\n            <span class="'+d+'title"></span>\n            <div class="'+d+'header-buttons"></div>\n            <button type="button" class="'+d+'close-button">x</button>\n        </div>\n        <div class="'+d+'body"></div>\n    </div>',g=function(e){function t(e){r(this,t),e=c.extend({header:!0,$target:$("body"),textContent:""},e);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:e.modal?d+"modal-background":d+"wrapper",rootElement:e.$el}));return n._initInstance(e),n._initDOM(e),n._initDOMEvent(e),n._initEditorEvent(e),n}return o(t,e),a(t,[{key:"_initInstance",value:function(e){this._$target=e.$target,e.$el&&(this.$el=e.$el,this._isExternalHtmlUse=!0),e.content?this.$content=$(e.content):this.$content=e.textContent,this.options=e}},{key:"_initDOM",value:function(){this._initLayout(),this._isExternalHtmlUse||(c.isExisty(this.options.title)&&this.setTitle(this.options.title),this.setContent(this.$content));var e=this.options.headerButtons;if(e){this.$el.find("."+d+"close-button").remove();var t=this.$el.find("."+d+"header-buttons");t.empty(),t.append($(e))}this.options.css&&this.$el.css(this.options.css)}},{key:"_initDOMEvent",value:function(){var e=this,t=this.options,n=t.openerCssQuery,r=t.closerCssQuery;n&&$(n).on("click."+this._id,function(){return e.show()}),r&&$(r).on("click."+this._id,function(){return e.hide()}),this.on("click ."+d+"close-button",function(){return e.hide()})}},{key:"_initEditorEvent",value:function(){}},{key:"_initLayout",value:function(){var e=this.options;if(this._isExternalHtmlUse)this.hide(),this._$target.append(this.$el);else{var t=e.modal?h:f;this.$el.html(t),this.$el.addClass(e.className),this.hide(),this._$target.append(this.$el),this.$body=this.$el.find("."+d+"body"),e.header||this.$el.find("."+d+"header").remove()}}},{key:"setContent",value:function(e){this.$body.empty(),this.$body.append(e)}},{key:"setTitle",value:function(e){var t=this.$el.find("."+d+"title");t.empty(),t.append(e)}},{key:"hide",value:function(){this.$el.css("display","none"),this._isShow=!1,this.trigger("hidden",this)}},{key:"show",value:function(){this.$el.css("display","block"),this._isShow=!0,this.trigger("shown",this)}},{key:"isShow",value:function(){return this._isShow}},{key:"remove",value:function(){var e=this.options,t=e.openerCssQuery,n=e.closerCssQuery;this.trigger("remove",this),this.off(),t&&$(t).off("."+this._id),n&&$(n).off("."+this._id),this.$el.remove()}},{key:"setFitToWindow",value:function(e){this.$el.toggleClass("fit-window",e)}},{key:"isFitToWindow",value:function(){return this.$el.hasClass("fit-window")}},{key:"toggleFitToWindow",value:function(){var e=!this.isFitToWindow();return this.setFitToWindow(e),e}}]),t}(s.default);e.exports=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return s+=1}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=tui,l=a.util,s=-1,u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t=l.extend({tagName:"div"},t),this.tagName=t.tagName,this.className=t.className,this._id=i(),this.$el=null,this._setRootElement(t.rootElement)}return o(e,[{key:"on",value:function(e,t){var n=this;l.isObject(e)?l.forEach(e,function(e,t){n._addEvent(t,e)}):this._addEvent(e,t)}},{key:"_addEvent",value:function(e,t){var n=this._parseEventType(e),r=n.event,i=n.selector;i?this.$el.on(r,i,t):this.$el.on(r,t)}},{key:"off",value:function(e,t){if(e){var n=this._parseEventType(e),r=n.event,i=n.selector;i?this.$el.off(r,i,t):this.$el.off(r,t)}else this.$el.off()}},{key:"_parseEventType",value:function(e){var t=e.split(" ");return{event:t.shift(),selector:t.join(" ")}}},{key:"_setRootElement",value:function(e){var t=this.tagName,n=this.className;e||(n=n||"uic"+this._id,e=$("<"+t+' class="'+n+'"/>')),this.$el=e}},{key:"trigger",value:function(){var e;(e=this.$el).trigger.apply(e,arguments)}},{key:"_getEventNameWithNamespace",value:function(e){var t=e.split(" ");return t[0]+=".uicEvent"+this._id,t.join(" ")}},{key:"remove",value:function(){this.$el.remove()}},{key:"destroy",value:function(){var e=this;this.remove(),l.forEachOwnProperties(this,function(t,n){e[n]=null})}}]),e}();e.exports=u},function(e,t,n){"use strict";function r(e){function t(e){var t=void 0;try{if(!plantumlEncoder)throw new Error("plantuml-encoder dependency required");t='<img src="'+a+plantumlEncoder.encode(e)+'" />'}catch(e){t="Error occurred on encoding uml: "+e.message}return t}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.convertor.getCodeBlockManager(),i=n.rendererURL,a=void 0===i?o:i,l=n.languages;(void 0===l?["plantuml","uml"]:l).forEach(function(e){return r.setReplacer(e,t)})}var i=n(6),o="http://www.plantuml.com/plantuml/png/";(function(e){return e&&e.__esModule?e:{default:e}})(i).default.defineExtension("plantUML",r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e.eventManager.addEventType("colorButtonClicked"),e.getUI().toolbar.addButton({className:"tui-color",event:"colorButtonClicked",tooltip:f.default.get("Text color")},2);var n=e.getUI().toolbar.$el.find("button.tui-color"),r=$("<div />"),i=$('<button type="button" class="te-apply-button">입력</button>'),o={container:r[0]};t&&(o.preset=t);var a=tui.component.colorpicker.create(o),l=a.getColor();r.append(i);var s=e.getUI().createPopup({header:!1,title:!1,content:r,className:"tui-popup-color",$target:e.getUI().$el,css:{width:"auto",position:"absolute"}});e.eventManager.listen("focus",function(){s.hide()}),e.eventManager.listen("colorButtonClicked",function(){e.eventManager.emit("closeAllPopup"),s.isShow()?s.hide():(s.$el.css({top:n.position().top+n.height()+5,left:n.position().left}),s.show(),a.slider.toggle(!0))}),e.eventManager.listen("closeAllPopup",function(){s.hide()}),e.eventManager.listen("removeEditor",function(){a.off("selectColor")}),a.on("selectColor",function(t){l=t.color,"palette"===t.origin&&(e.exec("color",l),s.hide())}),s.$el.find(".te-apply-button").on("click",function(){e.exec("color",l)})}function o(e,t){return"{color:"+t+"}"+e+"{color}"}function a(e,t){return'<span style="color:'+t+'">'+e+"</span>"}function l(e){return e.replace(v,function(e,t,n,r){return t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10),"#"+(s(t.toString(16))+s(n.toString(16))+s(r.toString(16)))})}function s(e){return"0"===e?"00":e}var u=n(6),c=r(u),d=n(5),f=r(d),h=/\{color:(.+?)}(.*?)\{color}/g,g=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)/g,p=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)<\/span>/g,v=/rgb\((\d+)[, ]+(\d+)[, ]+(\d+)\)/g;c.default.defineExtension("colorSyntax",function(e){var t=e.options.colorSyntax,n=void 0===t?{}:t,r=n.preset,s=n.useCustomSyntax,u=void 0!==s&&s;e.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return u?e.replace(h,function(e,t,n){return a(n,t)}):e}),e.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){var t=u?p:g;return e.replace(t,function(e,t,n){return t.match(v)&&(t=l(t)),u?o(n,t):e.replace(/ ?class="colour" ?/g," ").replace(v,t)})}),e.isViewOnly()||"default"!==e.getUI().name||(e.addCommand("markdown",{name:"color",exec:function(e,t){var n=e.getEditor();t&&(u?n.replaceSelection(o(n.getSelection(),t)):n.replaceSelection(a(n.getSelection(),t)),e.focus())}}),e.addCommand("wysiwyg",{name:"color",exec:function(e,t){var n=e.getEditor();t&&(n.hasFormat("PRE")||("#181818"===t?n.changeFormat(null,{class:"colour",tag:"span"}):n.setTextColour(t)),e.focus())}}),i(e,r))})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(6),o=r(i),a=n(25),l=r(a),s=n(26),u=r(s),c=n(28),d=r(c),f=n(27),h=r(f),g=n(24),p=r(g),v=tui,m=v.util,y=/(\n)|(\r\n)|(\r)/g;o.default.defineExtension("mark",function(e){function t(){return e.isViewOnly()?s:e.isWysiwygMode()?o:a}function n(){var n=t();r.getAll().forEach(function(e){n.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",r.getAll())}var r=new l.default,i=new u.default(r),o=void 0,a=void 0,s=void 0;e.eventManager.addEventType("markerUpdated"),e.isViewOnly()?s=new h.default(e.preview):(o=new d.default(e.getSquire()),a=new p.default(e.getCodeMirror())),$(window).on("resize",n),e.on("removeEditor",function(){$(window).off("resize",n)}),e.on("setMarkdownAfter",function(){var e=t();i.resetContent(e.getTextContent())}),e.setValueWithMarkers=function(n,o){var l=void 0;return r.resetMarkers(),o.forEach(function(e){r.addMarker(e.start,e.end,e.id)}),e.setValue(n),i.resetContent(n.replace(y,"")),e.isViewOnly()||e.isWysiwygMode()?(l=t(),i.updateMarkersByContent(l.getTextContent())):l=a,r.getAll().forEach(function(e){l.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",r.getAll()),r.getAll()},e.getMarker=function(e){return r.getMarker(e)},e.getMarkersAll=function(){return r.getAll()},e.removeMarker=function(e){return r.removeMarker(e)},e.exportMarkers=function(){var n=void 0;return e.isMarkdownMode()?n=r.getMarkersData():(e.isViewOnly()||e.isWysiwygMode())&&(i.updateMarkersByContent(e.getValue().replace(y,"")),n=r.getMarkersData(),i.updateMarkersByContent(t().getTextContent())),n},e.selectMarker=function(n){var r=t(),i=e.getMarker(n);i&&r.selectOffsetRange(i.start,i.end)},e.addMarker=function(n,i,o){var a=void 0,l=t();return o?(a={start:n,end:i},a=l.updateMarkerWithExtraInfo(a)):(o=n,a=l.getMarkerInfoOfCurrentSelection()),a&&(a.id=o,a=r.addMarker(a),r.sortBy("end"),e.eventManager.emit("markerUpdated",[a])),a},e.clearSelect=function(){t().clearSelect()},e.isViewOnly()||(e.on("changeMode",function(){e._updateMarkers()}),e.on("change",m.debounce(function(){e._updateMarkers()},100)),e._updateMarkers=function(){var n=t();r.getAll().length&&(i.updateMarkersByContent(n.getTextContent()),r.getAll().forEach(function(e){n.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",r.getAll()))})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.addCommand(A.default),e.addCommand(L.default)}function o(e){e.removeManager("table"),e.removeManager("tableSelection"),e.addManager(y.default),e.addManager(b.default)}function a(e,t){var n=$("<div>"+e+"</div>"),r=n.find("table");return r.length&&(r.get().forEach(function(e){var n=t(e);$(e).replaceWith(n)}),e=n.html()),e}function l(e){var t=e.command;if(t.isWWType())switch(t.getName()){case"AddRow":e.command=w.default;break;case"AddCol":e.command=E.default;break;case"RemoveRow":e.command=M.default;break;case"RemoveCol":e.command=x.default;break;case"AlignCol":e.command=O.default}}function s(e){e.listen("convertorAfterMarkdownToHtmlConverted",function(e){return a(e,f.default)}),e.listen("convertorBeforeHtmlToMarkdownConverted",function(e){return a(e,g.default)}),e.listen("addCommandBefore",l)}var u=n(6),c=r(u),d=n(34),f=r(d),h=n(38),g=r(h),p=n(39),v=r(p),m=n(41),y=r(m),_=n(42),b=r(_),k=n(32),w=r(k),C=n(31),E=r(C),T=n(36),M=r(T),S=n(35),x=r(S),I=n(33),O=r(I),N=n(30),A=r(N),B=n(40),L=r(B),P=n(37),R=r(P);n(29),c.default.defineExtension("tableExtension",function(e){var t=e.eventManager;if(e.toMarkOptions=e.toMarkOptions||{},e.toMarkOptions.renderer=v.default,s(t),!e.isViewOnly()){var n=e.wwEditor.componentManager,r=e._ui.popupTableUtils;i(e),o(n),e._ui.popupTableUtils&&R.default.updateContextMenu(r,t,n.getManager("tableSelection"))}})},function(e,t,n){"use strict";var r=/^\s*\* \[[xX ]\] [^\n]*/gm,i=/^\s*\* \[[xX]\] [^\n]*/gm;n(6).defineExtension("taskCounter",function(e){e.getTaskCount=function(){var t=void 0,n=void 0;return e.isViewOnly()?n=e.preview.$el.find(".task-list-item").length:e.isMarkdownMode()?(t=e.mdEditor.getValue().match(r),n=t?t.length:0):n=e.wwEditor.get$Body().find(".task-list-item").length,n},e.getCheckedTaskCount=function(){var t=void 0,n=void 0;return e.isViewOnly()?n=e.preview.$el.find(".task-list-item.checked").length:e.isMarkdownMode()?(t=e.mdEditor.getValue().match(i),n=t?t.length:0):n=e.wwEditor.get$Body().find(".task-list-item.checked").length,n}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=window,l=a.hljs,s=function(){function e(){r(this,e),this._supportedLanguages=l.listLanguages(),this._replacers={}}return o(e,[{key:"setReplacer",value:function(e,t){this._replacers[e]=t,this._supportedLanguages.indexOf(e)<0&&this._supportedLanguages.push(e)}},{key:"getReplacer",value:function(e){return this._replacers[e]}},{key:"setSupportedLanguages",value:function(e){this._supportedLanguages=e}},{key:"getSupportedLanguages",value:function(){return this._supportedLanguages}},{key:"createCodeBlockHtml",value:function(e,t){var n=this.getReplacer(e);return n?n(t):l.getLanguage(e)?l.highlight(e,t).value:i(t,!1)}}],[{key:"getHighlightJSLanguages",value:function(){return l.listLanguages()}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(17),l=r(a),s=n(50),u=r(s),c=n(46),d=r(c),f=n(47),h=r(f),g=n(45),p=r(g),v=n(49),m=r(v),y=n(48),_=r(y),b=n(14),k=r(b),w=window,C=w.toMark,E=w.markdownit,T=function(){function e(t){i(this,e),this.eventManager=t,this._initMarkdownIt()}return o(e,[{key:"_initMarkdownIt",value:function(){var e=new k.default;this._codeBlockManager=e;var t=new E({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-",highlight:function(t,n){return e.createCodeBlockHtml(n,t)}}),n=new E({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-"});t.block.ruler.at("table",m.default,["paragraph","reference"]),t.block.ruler.at("code",h.default),t.block.ruler.at("blockquote",p.default,["paragraph","reference","list"]),t.block.ruler.at("html_block",_.default,["paragraph","reference","blockquote"]),t.use(u.default),t.use(d.default),this._markdownitHighlight=t,n.block.ruler.at("table",m.default,["paragraph","reference"]),n.block.ruler.at("code",h.default),n.block.ruler.at("blockquote",p.default,["paragraph","reference","list"]),n.block.ruler.at("html_block",_.default,["paragraph","reference","blockquote"]),n.use(u.default),n.use(d.default),this._markdownit=n}},{key:"_markdownToHtmlWithCodeHighlight",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=this._markdownitHighlight.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_markdownToHtml",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=this._markdownit.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_removeBrToMarkPassAttributeInCode",value:function(e){var t=$("<div />");return t.html(e),t.find("code, pre").each(function(e,t){var n=$(t);n.html(n.html().replace(/&lt;br data-tomark-pass&gt;/,"&lt;br&gt;"))}),e=t.html()}},{key:"toHTMLWithCodeHightlight",value:function(e){var t=this._markdownToHtmlWithCodeHighlight(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"toHTML",value:function(e){var t=this._markdownToHtml(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"initHtmlSanitizer",value:function(){this.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return(0,l.default)(e,!0)})}},{key:"toMarkdown",value:function(e,t){var n=[];e=this.eventManager.emitReduce("convertorBeforeHtmlToMarkdownConverted",e);var r=C(this._appendAttributeForBrIfNeed(e),t);return r=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",r),tui.util.forEach(r.split("\n"),function(e,t){var r=/^\|[^|]*\|/gi;/`[^`]*<br>[^`]*`/gi.test(e)||r.test(e)||(e=e.replace(/<br>/gi,"<br>\n")),n[t]=e}),n.join("\n")}},{key:"_appendAttributeForBrIfNeed",value:function(e){var t=/<br>/gi,n=/<br \/><br \/>/gi,r=/<br data-tomark-pass \/><br \/>(.)/gi,i=/([^>]|<\/b>|<\/i>|<\/s>|<img [^>]*>)/,o=/<br data-tomark-pass \/><br data-tomark-pass \/>/,a=new RegExp(i.source+o.source,"g");e=e.replace(t,"<br />"),e=e.replace(n,"<br data-tomark-pass /><br data-tomark-pass />");var l=document.createElement("div"),s=$(l);return s.html(e),s.find("pre br,code br").each(function(e,t){t.hasAttribute("data-tomark-pass")&&t.removeAttribute("data-tomark-pass")}),e=s.html().replace(/<br data-tomark-pass="">/gi,"<br data-tomark-pass />"),e=e.replace(t,"<br />"),e=e.replace(r,"<br data-tomark-pass /><br data-tomark-pass />$1"),e=e.replace(a,"$1<br /><br />")}},{key:"getMarkdownHighlightRenderer",value:function(){return this._markdownitHighlight}},{key:"setMarkdownHighlightRenderer",value:function(e){e.set({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-"}),this._markdownitHighlight=e}},{key:"getCodeBlockManager",value:function(){return this._codeBlockManager}}]),e}();e.exports=T},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=["previewBeforeHook","previewRenderAfter","previewNeedsRefresh","addImageBlobHook","setMarkdownAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeModeBefore","changeMode","changePreviewStyle","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","openPopupCodeBlockLanguages","openPopupCodeBlockEditor","closePopupCodeBlockLanguages","closePopupCodeBlockEditor","closeAllPopup","command","addCommandBefore","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorBeforeHtmlToMarkdownConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","pasteBefore","scroll","click","mousedown","mouseover","mouseout","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","copy","copyBefore","copyAfter","cut","cutAfter","drop","show","hide"],s=function(){function e(){r(this,e),this.events=new a.Map,this.TYPE=new a.Enum(l)}return i(e,[{key:"listen",value:function(e,t){var n=this._getTypeInfo(e),r=this.events.get(n.type)||[];if(!this._hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),r.push(t),this.events.set(n.type,r)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=this._getTypeInfo(r),o=this.events.get(i.type),l=void 0;return o&&a.forEach(o,function(e){var n=e.apply(void 0,t);a.isUndefined(n)||(l=l||[],l.push(n))}),l}},{key:"emitReduce",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=this.events.get(r);return i&&a.forEach(i,function(e){var n=e.apply(void 0,t);a.isFalsy(n)||(t[0]=n)}),t[0]}},{key:"_getTypeInfo",value:function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}}},{key:"_hasEventType",value:function(e){return!a.isUndefined(this.TYPE[this._getTypeInfo(e).type])}},{key:"addEventType",value:function(e){if(this._hasEventType(e))throw new Error("There is already have event type "+e);this.TYPE.set(e)}},{key:"removeEventHandler",value:function(e,t){var n=this,r=this._getTypeInfo(e),i=r.type,o=r.namespace;i&&t?this._removeEventHandlerWithHandler(i,t):i&&!o?this.events.delete(i):!i&&o?this.events.forEach(function(e,t){n._removeEventHandlerWithTypeInfo(t,o)}):i&&o&&this._removeEventHandlerWithTypeInfo(i,o)}},{key:"_removeEventHandlerWithHandler",value:function(e,t){var n=this.events.get(e)||[],r=n.indexOf(t);r>=0&&n.splice(r,1)}},{key:"_removeEventHandlerWithTypeInfo",value:function(e,t){var n=[],r=this.events.get(e);r&&(r.map(function(e){e.namespace!==t&&n.push(e)}),this.events.set(e,n))}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){var n=$("<div />");return e=e.replace(/<!--[\s\S]*?-->/g,""),n.append(e),i(n),o(n),a(n,t)}function i(e){e.find("script, iframe, textarea, form, button, select, meta, style, link, title").remove()}function o(e){e.find("*").each(function(e,t){var n=s.toArray(t.attributes).filter(function(e){var t=e.name.match(u),n=e.name.match(c);return!t&&!n});s.forEachArray(n,function(e){t.attributes.removeNamedItem(e.name)})})}function a(e,t){var n=void 0;if(t)n=e[0].innerHTML;else{for(var r=document.createDocumentFragment(),i=tui.util.toArray(e[0].childNodes),o=i.length,a=0;a<o;a+=1)r.appendChild(i[a]);n=r}return n}var l=tui,s=l.util,u=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),c=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g");e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(19),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n,o,a){r(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,a));return l._initEvent(),l}return o(t,e),a(t,[{key:"_initEvent",value:function(){var e=this,t="";this.eventManager.listen("contentChangedFromMarkdown",function(n){t=n.getValue(),e.isVisible()&&e.lazyRunner.run("refresh",t.replace(/<br>\n/g,"<br>"))}),this.eventManager.listen("previewNeedsRefresh",function(n){e.refresh(n||t)}),this.$el.on("scroll",function(t){e.eventManager.emit("scroll",{source:"preview",data:t})})}},{key:"render",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e),this.eventManager.emit("previewRenderAfter",this)}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(44),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t,n,i,o){r(this,e),this.eventManager=n,this.convertor=i,this.$el=t,this.isViewOnly=!!o,this._initContentSection(),this.lazyRunner=new a.default,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,800,this)}return i(e,[{key:"_initContentSection",value:function(){this._$previewContent=$('<div class="tui-editor-contents" />'),this.$el.append(this._$previewContent)}},{key:"refresh",value:function(e){this.render(this.convertor.toHTMLWithCodeHightlight(e))}},{key:"getHTML",value:function(){return this._$previewContent.html()}},{key:"setHTML",value:function(e){this._$previewContent.html(e)}},{key:"render",value:function(e){var t=this._$previewContent;e=this.eventManager.emit("previewBeforeHook",e)||e,t.empty(),t.html(e)}},{key:"setHeight",value:function(e){this.$el.height(e)}},{key:"isVisible",value:function(){return"none"!==this.$el.css("display")}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n="<"+t+"><br /></"+t+">",r="",i=0;i<e;i+=1)r+=n;return r}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=tui,u=s.util,c=u.browser.msie&&10===u.browser.version,d=u.browser.msie&&(10===u.browser.version||11===u.browser.version),f=u.browser.msie?"":"<br>",h=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="table",this._lastCellNode=null,this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.tableID=0}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter.table",function(){var t=e.wwe.getEditor().getSelection(),n=e.isInTable(t);if(e._unwrapBlockInTable(),e._completeTableIfNeed(),!n){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()}e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygSetValueAfter.table",function(){e._unwrapBlockInTable(),e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygProcessHTMLText.table",function(e){return e.replace(/<br \/>(<\/td>|<\/th>)/g,"$1")}),this.eventManager.listen("cut.table",function(){var t=e.wwe.componentManager.getManager("tableSelection"),n=t.getSelectedCells();n.length&&n.get().forEach(function(e){return $(e).html(f)}),t.removeClassAttrbuteFromAllCellsIfNeed()}),this.eventManager.listen("copyBefore.table",function(t){var n=t.$clipboardContainer;return e.updateTableHtmlOfClipboardIfNeed(n)}),this.onBindedPaste=this._onPaste.bind(this),this.wwe.getEditor().addEventListener("paste",this.onBindedPaste)}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this,n=this.wwe.componentManager.getManager("tableSelection");if(n.getSelectedCells().length){n.createRangeBySelectedCells();var r=this.wwe.getEditor().getSelection().cloneContents();$(r).children().each(function(e,n){var r=$(n);t.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===r.find("thead").length&&0===r.find("tbody").length?r.remove():n.previousSibling&&"TABLE"===n.previousSibling.nodeName?n.previousSibling.appendChild(n):(t._completeIncompleteTable(n),"TABLE"!==n.nodeName&&"THEAD"!==n.nodeName&&$(n).closest("table").find("thead").remove()))}),e.append(r),e.find(".te-cell-selected").removeClass("te-cell-selected")}}},{key:"pasteClipboardData",value:function(e){this.wwe.componentManager.getManager("tableSelection").getSelectedCells().length||(this._expandTableIfNeed(e),this._pasteDataIntoTable(e))}},{key:"_onPaste",value:function(e){var t=this.wwe.getEditor().getSelection(),n=!l.default.isTextNode(t.commonAncestorContainer);this.isInTable(t)&&!t.collapsed&&n&&e.preventDefault()}},{key:"_initKeyHandler",value:function(){var e=this;this.keyEventHandlers={DEFAULT:function(t,n,r){var i=e.isInTable(n);i&&!e._isSingleModifierKey(r)?(e._recordUndoStateIfNeed(n),e._removeBRIfNeed(n),e._removeContentsAndChangeSelectionIfNeed(n,r,t)):!i&&e._lastCellNode&&e._recordUndoStateAndResetCellNode(n),i&&!e._isModifierKeyPushed(t)&&e.wwe.getEditor().modifyDocument(function(){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()})},ENTER:function(t,n){var r=void 0;return e._isAfterTable(n)?(t.preventDefault(),n.setStart(n.startContainer,n.startOffset-1),e.wwe.breakToNewDefaultBlock(n),r=!1):e._isBeforeTable(n)?(t.preventDefault(),e.wwe.breakToNewDefaultBlock(n,"before"),r=!1):e.isInTable(n)&&(e._appendBrIfTdOrThNotHaveAsLastChild(n),r=!1),r},BACK_SPACE:function(t,n,r){return e._handleBackspaceAndDeleteKeyEvent(t,n,r)},DELETE:function(t,n,r){return e._handleBackspaceAndDeleteKeyEvent(t,n,r)},TAB:function(){return e._moveCursorTo("next","cell")},"SHIFT+TAB":function(t){return e._moveCursorTo("previous","cell",t)},UP:function(t){return e._moveCursorTo("previous","row",t)},DOWN:function(t){return e._moveCursorTo("next","row",t)}},u.forEach(this.keyEventHandlers,function(t,n){return e.wwe.addKeyEventHandler(n,t)})}},{key:"isInTable",value:function(e){var t=void 0,n=void 0;return e.collapsed?(t=e.startContainer,n=!!$(t).closest("[contenteditable=true] table").length):(t=e.commonAncestorContainer,n=!!$(t).closest("[contenteditable=true] table").length||!!$(e.cloneContents()).find("table").length),n}},{key:"_isBeforeTable",value:function(e){return"TABLE"===l.default.getNodeName(l.default.getChildNodeByOffset(e.startContainer,e.startOffset))}},{key:"_isAfterTable",value:function(e){var t=l.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset);return"TABLE"===l.default.getNodeName(t)&&e.commonAncestorContainer===this.wwe.get$Body()[0]}},{key:"_handleBackspaceAndDeleteKeyEvent",value:function(e,t,n){var r="BACK_SPACE"===n,i=3!==t.commonAncestorContainer.nodeType&&t.commonAncestorContainer!==this.wwe.get$Body()[0],o=void 0;if(t.collapsed){if(this.isInTable(t))r?this._tableHandlerOnBackspace(t,e):this._tableHandlerOnDelete(t,e),this._insertBRIfNeed(t),this._removeContentsAndChangeSelectionIfNeed(t,n,e),o=!1;else if(!r&&this._isBeforeTable(t)||r&&this._isAfterTable(t)){e.preventDefault();var a=r?t.startOffset-1:t.startOffset;this._removeTable(t,l.default.getChildNodeByOffset(t.startContainer,a)),o=!1}}else this.isInTable(t)&&i&&(e.preventDefault(),this._removeContentsAndChangeSelectionIfNeed(t,n,e),o=!1);return o}},{key:"_tableHandlerOnBackspace",value:function(e,t){var n=l.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset,"TR"),r=l.default.getNodeName(n);n&&"TD"!==r&&"TH"!==r?"BR"===r&&1!==n.parentNode.childNodes.length&&(t.preventDefault(),$(n).remove()):t.preventDefault()}},{key:"isNonTextDeleting",value:function(e){var t=e.startContainer,n=t.nextSibling,r=l.default.getNodeName(n),i=l.default.getNodeName(t),o=i===r&&"TEXT"!==i,a=(!n||"BR"===r&&n.parentNode.lastChild===n)&&l.default.isTextNode(t)&&e.startOffset===t.nodeValue.length,s=!a&&$(t).parents("tr").children().last()[0]===t&&("TD"===i||"TH"===i);return o||a||s}},{key:"_tableHandlerOnDelete",value:function(e,t){this.isNonTextDeleting(e)&&(t.preventDefault(),e.startContainer.normalize())}},{key:"_appendBrIfTdOrThNotHaveAsLastChild",value:function(e){var t=l.default.getNodeName(e.startContainer),n=void 0;if("TD"===t||"TH"===t)n=e.startContainer;else{var r=$(e.startContainer).parentsUntil("tr");n=r[r.length-1]}"BR"===l.default.getNodeName(n.lastChild)||"DIV"===l.default.getNodeName(n.lastChild)||d||$(n).append($("<br />")[0])}},{key:"_unwrapBlockInTable",value:function(){this.wwe.get$Body().find("td div,th div,tr>br,td>br,th>br").each(function(e,t){if("BR"===l.default.getNodeName(t)){var n=l.default.getNodeName(t.parentNode),r=/TD|TH/.test(n),i=0===t.parentNode.textContent.length,o=t.parentNode.lastChild===t;("TR"===n||r&&!i&&o)&&$(t).remove()}else $(t).children().unwrap()})}},{key:"_insertDefaultBlockBetweenTable",value:function(){this.wwe.get$Body().find("table").each(function(e,t){t.nextElementSibling&&"TABLE"===t.nextElementSibling.nodeName&&$("<div><br /></div>").insertAfter(t)})}},{key:"_removeTable",value:function(e,t){"TABLE"===t.tagName&&(this.wwe.getEditor().saveUndoState(e),this.wwe.saveSelection(e),$(t).remove(),this.wwe.restoreSavedSelection())}},{key:"_recordUndoStateIfNeed",value:function(e){var t=l.default.getParentUntil(e.startContainer,"TR");e.collapsed&&t&&this._lastCellNode!==t&&(this.wwe.getEditor().saveUndoState(e),this._lastCellNode=t)}},{key:"_recordUndoStateAndResetCellNode",value:function(e){this.wwe.getEditor().saveUndoState(e),this.resetLastCellNode()}},{key:"_pasteDataIntoTable",value:function(e){var t=this.wwe.getEditor().getSelection(),n=t.startContainer,r=n.parentNode,i=this._getTableDataFromTable(e),o="TD"===r.tagName||"TH"===r.tagName,a="TD"===n.tagName||"TH"===n.tagName,s=3===n.nodeType,u=c?"":"<br />",d=void 0,f=void 0,h=void 0,g=void 0;for(d=s&&o?r:a?n:$(n).find("th,td").get(0),f=d;i.length;){for(h=i.shift();f&&h.length;)g=h.shift(),g.length?f.textContent=g:f.innerHTML=u,f=l.default.getTableCellByDirection(f,"next");f=l.default.getSiblingRowCellByDirection(d,"next",!1),d=f}}},{key:"_getTableDataFromTable",value:function(e){var t=$(e),n=[];return t.find("tr").each(function(e,t){var r=[];$(t).children().each(function(e,t){r.push(t.textContent)}),r.length&&n.push(r)}),n}},{key:"_removeTableContents",value:function(e){this.wwe.getEditor().saveUndoState(),e.each(function(e,t){var n=c?"":"<br />";$(t).html(n)})}},{key:"wrapDanglingTableCellsIntoTrIfNeed",value:function(e){var t=e.children("td,th"),n=void 0;if(t.length){var r=$("<tr></tr>");t.each(function(e,t){r.append(t)}),n=r.get(0)}return n}},{key:"wrapTrsIntoTbodyIfNeed",value:function(e){var t=e.children("tr"),n=t.find("th"),r=void 0;if(n.length&&n.each(function(e,t){var n=$(t),r=$("<td></td>");r.html(n.html()),r.insertBefore(t),n.detach()}),t.length){var i=$("<tbody></tbody>");t.each(function(e,t){i.append(t)}),r=i.get(0)}return r}},{key:"wrapTheadAndTbodyIntoTableIfNeed",value:function(e){var t=e.children("thead"),n=e.children("tbody"),r=$("<table></table>"),i=void 0;return!n.length&&t.length?(r.append(t[0]),r.append("<tbody><tr></tr></tbody>"),i=r.get(0)):n.length&&!t.length?(r.append("<thead><tr></tr></thead>"),r.append(n[0]),i=r.get(0)):n.length&&t.length&&(r.append(t[0]),r.append(n[0]),i=r.get(0)),i}},{key:"isTableOrSubTableElement",value:function(e){return"TABLE"===e||"TBODY"===e||"THEAD"===e||"TR"===e||"TD"===e}},{key:"_stuffTableCellsIntoIncompleteRow",value:function(e,t){e.each(function(e,n){for(var r=$(n),o=r.find("th,td"),a=l.default.getNodeName(r.parent()[0]),s="THEAD"===a?"th":"td",u=o.length;u<t;u+=1)r.append($(i(1,s))[0])})}},{key:"prepareToTableCellStuffing",value:function(e){var t=e.eq(0).find("th,td").length,n=!1;return e.each(function(e,r){var i=$(r).find("th,td").length;t!==i&&(n=!0,t<i&&(t=i))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"_addTbodyOrTheadIfNeed",value:function(e){var t=!e.find("thead").length,n=!e.find("tbody").length,r=void 0;t?(r=$("<thead><tr></tr></thead>").get(0),e.prepend(r)):n&&(r=$("<tbody><tr></tr></tbody>").get(0),e.append(r))}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=$(e);this._addTbodyOrTheadIfNeed(t),this._addTrIntoContainerIfNeed(t);var n=t.find("tr"),r=this.prepareToTableCellStuffing(n),i=r.maximumCellLength;r.needTableCellStuffingAid&&this._stuffTableCellsIntoIncompleteRow(n,i)}},{key:"_generateTheadAndTbodyFromTbody",value:function(e){var t=$("<tr></tr>"),n=$("<thead></thead>");return t.append(i($(e).find("tr").eq(0).find("td").length,"th")),n.append(t),{thead:n[0],tbody:e}}},{key:"_generateTheadAndTbodyFromThead",value:function(e){var t=$("<tr></tr>"),n=$("<tbody></tbody>");return t.append(i($(e).find("th").length,"td")),n.append(t),{thead:e,tbody:n[0]}}},{key:"_generateTheadAndTbodyFromTr",value:function(e){var t=$(e),n=$("<thead></thead>"),r=$("<tbody></tbody>"),o=void 0,a=void 0;return"TH"===t.children()[0].tagName?(o=e,a=$("<tr>"+i(t.find("th").length,"td")+"</tr>").get(0)):(o=$("<tr>"+i(t.find("td").length,"th")+"</tr>").get(0),a=e),n.append(o),r.append(a),{thead:n[0],tbody:r[0]}}},{key:"_completeIncompleteTable",value:function(e,t){var n=e.tagName,r=void 0,i=void 0;t=!!u.isUndefined(t)||t,"TABLE"===n?r=e:(r=$("<table></table>"),r.insertAfter(e),"TBODY"===n?i=this._generateTheadAndTbodyFromTbody(e):"THEAD"===n?i=this._generateTheadAndTbodyFromThead(e):"TR"===n&&(i=this._generateTheadAndTbodyFromTr(e)),t&&r.append(i.thead),r.append(i.tbody)),this.tableCellAppendAidForTableElement(r)}},{key:"_completeTableIfNeed",value:function(){var e=this;this.wwe.getEditor().get$Body().children().each(function(t,n){var r=$(n);e.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===r.find("thead").length&&0===r.find("tbody").length&&r.remove(),e._completeIncompleteTable(n))})}},{key:"resetLastCellNode",value:function(){this._lastCellNode=null}},{key:"setLastCellNode",value:function(e){this._lastCellNode=e}},{key:"_isSingleModifierKey",value:function(e){return"META"===e||"SHIFT"===e||"ALT"===e||"CONTROL"===e}},{key:"_isModifierKeyPushed",value:function(e){return e.metaKey||e.ctrlKey||e.altKey||e.shiftKey}},{key:"_addTrIntoContainerIfNeed",value:function(e){e.children().each(function(e,t){0===$(t).find("tr").length&&$(t).append($("<tr></tr>")[0])})}},{key:"_expandTableIfNeed",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=$(t.startContainer).parents("table"),r=this._getColumnAndRowDifference(e,t);r.column<0&&this._appendCellForAllRow(n,r.column),r.row<0&&this._appendRow(n,r.row)}},{key:"_getColumnAndRowDifference",value:function(e,t){var n=this._getTableDataFromTable(e),r=n.length,i=n[0].length,o=$(t.startContainer).closest("th,td"),a=o.parent(),s=l.default.getNodeOffsetOfParent(o[0]),u=l.default.getNodeOffsetOfParent(o[0].parentNode),c=a.parents("table"),d=c.find("tr").eq(0).children().length,f=c.find("tr").length;return a.parents("tbody").length&&(u+=1),{row:f-(u+r),column:d-(s+i)}}},{key:"_appendCellForAllRow",value:function(e,t){var n=c?"":"<br />";e.find("tr").each(function(e,r){for(var i=void 0,o=t;o<0;o+=1)i=0===e?"th":"td",$(r).append($("<"+i+">"+n+"</"+i+">")[0])})}},{key:"_appendRow",value:function(e,t){var n=e.find("tr").last().clone(),r=c?"":"<br />";for(n.find("td").html(r);t<0;t+=1)e.find("tbody").append(n.clone()[0])}},{key:"_getSiblingTextNodeByDirection",value:function(e,t){var n=e.previousSibling&&"BR"===e.previousSibling.nodeName&&e.previousSibling.previousSibling&&3===e.previousSibling.previousSibling.nodeType,r=e.nextSibling&&"BR"===e.nextSibling.nodeName&&e.nextSibling.nextSibling&&3===e.nextSibling.nextSibling.nodeType,i=void 0;return t&&r?i=e.nextSibling.nextSibling:!t&&n&&(i=e.previousSibling.previousSibling),i}},{key:"_changeSelectionToTargetCell",value:function(e,t,n,r){var i=t.startContainer,o="next"===n,a="row"===r,s=void 0,u=void 0;if(a){if(l.default.isTextNode(i)&&(s=this._getSiblingTextNodeByDirection(i,o)))return u=s.length<t.startOffset?s.length:t.startOffset,t.setStart(s,u),void t.collapse(!0);s=l.default.getSiblingRowCellByDirection(e,n,!1)}else(s=l.default.getTableCellByDirection(e,n))||(s=l.default.getSiblingRowCellByDirection(e,n,!0));s?(t.setStart(s,0),t.collapse(!0)):(s=$(e).parents("table").get(0),o?t.setStart(s.nextElementSibling,0):s.previousElementSibling&&"TABLE"!==s.previousElementSibling.nodeName?t.setStart(s.previousElementSibling,1):t.setStartBefore(s),t.collapse(!0))}},{key:"_moveCursorTo",value:function(e,t,n){var r=this.wwe.getEditor(),i=r.getSelection().cloneRange(),o=$(i.startContainer).closest("td,th").get(0),a=void 0;return i.collapsed&&this.isInTable(i)&&o&&("previous"!==e&&"row"!==t||u.isUndefined(n)||n.preventDefault(),this._changeSelectionToTargetCell(o,i,e,t),r.setSelection(i),a=!1),a}},{key:"_removeContentsAndChangeSelectionIfNeed",value:function(e,t,n){var r=t.length<=1,i="BACK_SPACE"===t||"DELETE"===t,o=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),a=o.first().get(0);(r||i)&&!this._isModifierKeyPushed(n)&&o.length&&(i&&this._recordUndoStateIfNeed(e),this._removeTableContents(o),this._lastCellNode=a,e.setStart(a,0),e.collapse(!0),this.wwe.getEditor().setSelection(e))}},{key:"getTableIDClassName",value:function(){var e="te-content-table-"+this.tableID;return this.tableID+=1,e}},{key:"_removeBRIfNeed",value:function(e){var t=l.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer;/td|th/i.test(l.default.getNodeName(n))&&e.collapsed&&1===n.textContent.length&&$(n).find("br").remove()}},{key:"_insertBRIfNeed",value:function(e){var t=l.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer,r=l.default.getNodeName(n),i=$(n);!/td|th/i.test(r)||!e.collapsed||n.textContent.length||i.children().length||d||(n.normalize(),i.append("<br>"))}},{key:"destroy",value:function(){var e=this;this.eventManager.removeEventHandler("wysiwygRangeChangeAfter.table"),this.eventManager.removeEventHandler("wysiwygSetValueAfter.table"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.table"),this.eventManager.removeEventHandler("cut.table"),this.eventManager.removeEventHandler("copyBefore.table"),this.wwe.getEditor().removeEventListener("paste",this.onBindedPaste),u.forEach(this.keyEventHandlers,function(t,n){return e.wwe.removeKeyEventHandler(n,t)})}}]),e}();e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="tableSelection",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent(),tui.util.browser.firefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))}},{key:"_initEvent",value:function(){var e=this,t=void 0,n=void 0,r=void 0;this._tableSelectionTimer=null,this._removeSelectionTimer=null,this._isSelectionStarted=!1;var i=function(i){n=$(i.data.target).closest("[contenteditable=true] td,th").get(0);var o=e.wwe.getEditor().getSelection(),a=$(n).parents("[contenteditable=true] table").get(0),l=t===n,s=e._isTextSelect(o,l)&&!$(t).hasClass("te-cell-selected");e._isSelectionStarted&&a&&!s&&(window.getSelection().removeAllRanges(),tui.util.browser.firefox&&!e._removeSelectionTimer&&(e._removeSelectionTimer=setInterval(function(){window.getSelection().removeAllRanges()},10)),e.highlightTableCellsBy(t,n),r=n)},o=function(){e._isSelectionStarted&&(e._isSelectionStarted=!1,e.eventManager.removeEventHandler("mouseover.tableSelection"),e.eventManager.removeEventHandler("mouseup.tableSelection"))},a=function(i){n=$(i.data.target).closest("[contenteditable=true] td,th").get(0);var a=e.wwe.getEditor().getSelection(),l=t===n,s=e._isTextSelect(a,l)&&!$(t).hasClass("te-cell-selected");e._clearTableSelectionTimerIfNeed(),e._isSelectionStarted&&(s?e.removeClassAttrbuteFromAllCellsIfNeed():(e.wwe.componentManager.getManager("table").resetLastCellNode(),n=n||r,a=e.wwe.getEditor().getSelection(),a.setStart(n,0),tui.util.browser.msie?a.setEnd(n,1):(a.setEnd(n,0),a.collapse(!1)),e.wwe.getEditor().setSelection(a)),e.onDragEnd&&e.onDragEnd()),o()},l=function(r){t=$(r.data.target).closest("[contenteditable=true] td,th").get(0);var l=$(t).hasClass("te-cell-selected");n=null,!l||l&&2!==r.data.button?(e.removeClassAttrbuteFromAllCellsIfNeed(),e.setTableSelectionTimerIfNeed(t),e.eventManager.listen("mouseover.tableSelection",i),e.eventManager.listen("mouseup.tableSelection",a),e.onDragStart&&t&&e.onDragStart(t)):2===r.data.button&&o()};this.eventManager.listen("mousedown.tableSelection",l),this.eventManager.listen("copyBefore.tableSelection",o),this.eventManager.listen("pasteBefore.tableSelection",o)}},{key:"_isTextSelect",value:function(e,t){return/TD|TH|TEXT/i.test(e.commonAncestorContainer.nodeName)&&t}},{key:"setTableSelectionTimerIfNeed",value:function(e){$(e).parents("[contenteditable=true] table").length&&(this._isSelectionStarted=!0)}},{key:"_clearTableSelectionTimerIfNeed",value:function(){clearTimeout(this._tableSelectionTimer),tui.util.browser.firefox&&this._removeSelectionTimer&&(clearTimeout(this._removeSelectionTimer),this._removeSelectionTimer=null)}},{key:"_reArrangeSelectionIfneed",value:function(e,t){var n=$(e).parents("[contenteditable=true] table").length,r=$(t).parents("[contenteditable=true] table").length,i=r&&!n,o=!r&&n;return i?e=$(t).parents("[contenteditable=true] table").find("th").first().get(0):o&&(t=$(e).parents("[contenteditable=true] table").find("td").last().get(0)),{startContainer:e,endContainer:t}}},{key:"_applySelectionDirection",value:function(e,t){var n=a.default.getNodeOffsetOfParent,r=e.startContainer,i=e.endContainer,o=n($(r).closest("[contenteditable=true] tr")[0])-n($(i).closest("[contenteditable=true] tr")[0]),l=n(r)-n(i),s=0===o,u=o<0,c=l>0;return s?c?(t.setStart(i,0),t.setEnd(r,1)):(t.setStart(r,0),t.setEnd(i,1)):u?(t.setStart(r,0),t.setEnd(i,1)):(t.setStart(i,0),t.setEnd(r,1)),t}},{key:"getSelectionRangeFromTable",value:function(e,t){var n=a.default.getNodeOffsetOfParent,r=n(e.parentNode),i=n(t.parentNode),o=n(e),l=n(t),s=a.default.getParentUntil(e,"TABLE"),u=a.default.getParentUntil(t,"TABLE"),c="TBODY"===a.default.getNodeName(s)&&"THEAD"===a.default.getNodeName(u),d=s!==u,f=!!$(e).parents("tbody").length&&!!$(t).parents("tbody").length,h={row:r,cell:o},g={row:i,cell:l},p=void 0,v=void 0;return c?h.row+=1:d?g.row+=1:f&&(h.row+=1,g.row+=1),r>i||r===i&&o>l?(p=g,v=h):(p=h,v=g),{from:p,to:v}}},{key:"highlightTableCellsBy",value:function(e,t){var n=$(e).parents("[contenteditable=true] table").find("tr"),r=this.getSelectionRangeFromTable(e,t),i=r.from.row,o=r.from.cell,a=r.to.row,l=r.to.cell;n.each(function(e,t){$(t).find("td,th").each(function(t,n){var r=$(n),s=e===i,u=e===a;s&&t<o||u&&t>l||e<i||e>a?r.removeClass("te-cell-selected"):r.addClass("te-cell-selected")})})}},{key:"removeClassAttrbuteFromAllCellsIfNeed",value:function(){this.wwe.get$Body().find("td.te-cell-selected,th.te-cell-selected").each(function(e,t){var n=$(t);n.removeClass("te-cell-selected"),n.attr("class").length||n.removeAttr("class")})}},{key:"getSelectedCells",value:function(){return this.wwe.get$Body().find(".te-cell-selected")}},{key:"createRangeBySelectedCells",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=this.getSelectedCells(),r=this.wwe.componentManager.getManager("table"),i=n.first().get(0),o=n.last().get(0);n.length&&r.isInTable(t)&&(t.setStart(i,0),t.setEnd(o,o.childNodes.length),e.setSelection(t))}},{key:"styleToSelectedCells",value:function(e){this.createRangeBySelectedCells(),e(this.wwe.getEditor())}},{key:"destroy",value:function(){this.eventManager.removeEventHandler("mousedown.tableSelection"),this.eventManager.removeEventHandler("mouseover.tableSelection"),this.eventManager.removeEventHandler("mouseup.tableSelection"),this.eventManager.removeEventHandler("copyBefore.tableSelection"),this.eventManager.removeEventHandler("pasteBefore.tableSelection")}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(18),l=r(a),s=n(16),u=r(s),c=n(0),d=r(c),f=n(6),h=r(f),g=n(15),p=r(g),v=tui,m=v.util,y=function(){function e(t){var n=this;i(this,e),this.options=t,this.eventManager=new u.default,this.commandManager=new d.default(this),this.convertor=new p.default(this.eventManager),this.toMarkOptions=null,this.options.hooks&&m.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&m.forEach(this.options.events,function(e,t){n.on(t,e)}),this.preview=new l.default($(this.options.el),this.eventManager,this.convertor,!0),this.preview.$el.on("mousedown",$.proxy(this._toggleTask,this)),h.default.applyExtension(this,this.options.exts),this.setValue(this.options.initialValue),this.eventManager.emit("load",this)}return o(e,[{key:"_toggleTask",value:function(e){var t=e.offsetX<18&&e.offsetY>18;e.target.hasAttribute("data-te-task")&&!t&&($(e.target).toggleClass("checked"),this.eventManager.emit("change",{source:"viewOnly",data:e}))}},{key:"setMarkdown",value:function(e){this.markdownValue=e=e||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setMarkdownAfter",this.markdownValue)}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"remove",value:function(){this.eventManager.emit("removeEditor"),this.preview.$el.off("mousedown",$.proxy(this._toggleTask,this)),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"isViewOnly",value:function(){return!0}},{key:"isMarkdownMode",value:function(){return!1}},{key:"isWysiwygMode",value:function(){return!1}}]),e}();e.exports=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=function(){function e(t,n,i){r(this,e),this.name=t,this.type=n,i&&this.setKeyMap(i)}return i(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"isMDType",value:function(){return this.type===e.TYPE.MD}},{key:"isWWType",value:function(){return this.type===e.TYPE.WW}},{key:"isGlobalType",value:function(){return this.type===e.TYPE.GB}},{key:"setKeyMap",value:function(e,t){this.keyMap=[e,t]}}]),e}();l.factory=function(e,t){var n=void 0;"markdown"===e?n=l.TYPE.MD:"wysiwyg"===e?n=l.TYPE.WW:"global"===e&&(n=l.TYPE.GB);var r=new l(t.name,n);return a.extend(r,t),r},l.TYPE={MD:0,WW:1,GB:2},e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=tui,l=a.util,s=/(\n)|(\r\n)|(\r)/g,u=function(){function e(t){r(this,e),this.cm=t}return o(e,[{key:"getTextContent",value:function(){return this.cm.getValue().replace(s,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetCursor([e.start,e.end]),n=t[0].line,r=t[0].ch,i=t[1].line,o=t[1].ch,a=this._getExtraInfoOfRange(n,r,i,o);return e.text=a.text.replace(s," "),e.top=a.top,e.left=a.left,e.height=a.height,e}},{key:"_getExtraInfoOfRange",value:function(e,t,n,r){var i=void 0,o=void 0,a=void 0,l=void 0,s=void 0,u=this.cm.getDoc();if(u.getValue().length){i=u.getRange({line:e,ch:t},{line:n,ch:r}),o=this.cm.charCoords({line:n,ch:r},"local");var c=o;a=c.top,l=c.left,s=o.bottom-o.top}else a=l=s=0,i="";return{text:i,top:a,left:l,height:s}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=this.cm.getDoc(),t=this._getSelection(),n=e.getRange({line:0,ch:0},t.anchor).replace(s,"").length,r=n+e.getSelection().replace(s,"").length,i=this._findOffsetCursor([n,r]),o=this._getExtraInfoOfRange(i[0].line,i[0].ch,i[1].line,i[1].ch);return{start:n,end:r,text:o.text.replace(s," "),top:o.top,left:o.left,height:o.height}}},{key:"_getSelection",value:function(){var e=this.cm.getDoc().listSelections(),t=i(e,1),n=t[0],r=n.anchor,o=n.head;if(r.line>o.line||r.line===o.line&&r.ch>o.ch){var a=o;o=r,r=a}return{anchor:r,head:o}}},{key:"_findOffsetCursor",value:function(e){var t=this.cm.getDoc(),n=0,r=[],i=t.lineCount(),o=0,a=0,s=void 0;for(s=0;s<i;s+=1){for(a+=t.getLine(s).length;a>=e[o];)if(r.push({line:s,ch:e[o]-n}),o+=1,l.isUndefined(e[o]))return r;n=a}for(;!l.isUndefined(e[o]);)r.push({line:s,ch:a-n}),o+=1;return r}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetCursor([e,t]);this.cm.setSelection({line:n[0].line,ch:n[0].ch},{line:n[1].line,ch:n[1].ch})}},{key:"clearSelect",value:function(){var e=this.cm.getDoc().listSelections(),t=i(e,1),n=t[0];n&&this.cm.setCursor(n.to())}}]),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=function(){function e(){r(this,e),this._sortedMarkers=[],this._markersWithId={}}return i(e,[{key:"addMarker",value:function(e,t,n){var r=void 0;return r=n?{start:e,end:t,id:n}:e,this._markersWithId[r.id]||(this._sortedMarkers.push(r),this._markersWithId[r.id]=r),r}},{key:"getMarker",value:function(e){return this._markersWithId[e]}},{key:"removeMarker",value:function(e){var t=this._markersWithId[e];delete this._markersWithId[e];var n=this._sortedMarkers.indexOf(t);return this._sortedMarkers.splice(n,1),t}},{key:"updateMarker",value:function(e,t){var n=this.getMarker(e);return a.extend(n,t)}},{key:"forEachByRangeAffected",value:function(e,t,n){this._getMarkersByRangeAffected(e,t).forEach(n)}},{key:"_getMarkersByRangeAffected",value:function(e,t){return this._sortedMarkers.filter(function(n){return n.end>t||n.end>e})}},{key:"getAll",value:function(){return this._sortedMarkers}},{key:"resetMarkers",value:function(){this._sortedMarkers=[],this._markersWithId={}}},{key:"sortBy",value:function(e){this._sortedMarkers.sort(function(t,n){return t[e]-n[e]})}},{key:"getMarkersData",value:function(){return this.getAll().map(function(e){return{start:e.start,end:e.end,id:e.id}})}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(51),l=tui,s=l.util,u=function(){function e(t){r(this,e),this._dmp=new a,this.markerList=t,this.oldTextContent=null}return o(e,[{key:"resetContent",value:function(e){this.oldTextContent=s.isString(e)?e:null}},{key:"updateMarkersByContent",value:function(e){if(s.isNull(this.oldTextContent))return this.resetContent(e),[];var t=this._makeMarkerDiffs(e);return this.oldTextContent=e,this._getUpdateMarkersWithDiffs(t)}},{key:"_makeMarkerDiffs",value:function(e){var t=this.markerList,n=this,r={};return this._forEachChanges(e,function(e,i,o){t.forEachByRangeAffected(e,i,function(t){var a=r[t.id],l=n._calculateStartDiff(e,i,o,t),s=n._calculateEndDiff(e,i,o,t);a?(a.start+=l,a.end+=s):r[t.id]={start:l,end:s}})}),r}},{key:"_forEachChanges",value:function(e,t){var n=0,r=0;this._dmp.diff_main(this.oldTextContent,e).forEach(function(e){var o=i(e,2),a=o[0],l=o[1],s=0,u=l.length;if(n=r,0===a)return n+=u,void(r+=u);1===a?s+=u:-1===a&&(s-=u,r+=u),t(n,r,s)})}},{key:"_calculateStartDiff",value:function(e,t,n,r){return e<=r.start&&t<=r.start?n:e<=r.start&&t>r.start?e-r.start:0}},{key:"_calculateEndDiff",value:function(e,t,n,r){return t<=r.end?n:e<=r.end&&t>r.start?e-r.end:0}},{key:"_getUpdateMarkersWithDiffs",value:function(e){var t=[],n=this.markerList;return s.forEachOwnProperties(e,function(e,r){var i=n.getMarker(r);n.updateMarker(r,{start:i.start+=e.start,end:i.end+=e.end}),t.push(i)}),t}}]),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=window.getSelection(),t=void 0;return e&&e.rangeCount?t=e.getRangeAt(0).cloneRange():(t=document.createRange(),t.selectNodeContents(this.preview.$el[0]),t.collapse(!0)),t}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=/(\n)|(\r\n)|(\r)/g,s=function(){function e(t){r(this,e),this.preview=t}return o(e,[{key:"getTextContent",value:function(){return this.preview.$el[0].textContent.replace(l,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetNode([e.start,e.end]),n=document.createRange();n.setStart(t[0].container,t[0].offsetInContainer),n.setEnd(t[1].container,t[1].offsetInContainer);var r=this._getExtraInfoOfRange(n);return e.text=r.text,e.top=r.top,e.left=r.left,e.height=r.height,e}},{key:"_getExtraInfoOfRange",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,u=e.cloneContents().textContent.replace(l,"");if(e.setStart(e.endContainer,e.endOffset),e.collapse(!0),(r=e.getBoundingClientRect())&&!r.top){a=document.createElement("SPAN"),a.textContent="​",e.endContainer.parentNode.insertBefore(a,e.endContainer),r=a.getBoundingClientRect();s=a.parentNode,s.removeChild(a)}if(r){i=this.preview.$el.offset(),t=r.top+this.preview.$el.scrollTop()-i.top+$("body").scrollTop(),n=r.left-i.left;o=r.height}else o=t=n=0;return{text:u,top:t,left:n,height:o}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,o=i();return $.contains(this.preview.$el[0],o.commonAncestorContainer)&&this._extendRangeToTextNodeIfHasNone(o)?(e=o.cloneRange(),e.setStart(this.preview.$el[0],0),e.setEnd(o.startContainer,o.startOffset),r=this._getExtraInfoOfRange(o),t=e.cloneContents().textContent.length,n=t+r.text.length,{start:t,end:n,text:r.text,top:r.top,left:r.left,height:r.height}):null}},{key:"_extendRangeToTextNodeIfHasNone",value:function(e){var t=a.getChildNodeByOffset(e.endContainer,e.endOffset),n=void 0;if(!a.isTextNode(e.endContainer))if(a.isTextNode(t))e.setEnd(t,0);else{if(!(n=a.getPrevTextNode(t)))return!1;e.setEnd(n,n.length)}return!0}},{key:"_findOffsetNode",value:function(e){return a.findOffsetNode(this.preview.$el[0],e,function(e){return e.replace(l,"")})}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetNode([e,t]),r=document.createRange(),i=window.getSelection();r.setStart(n[0].container,n[0].offsetInContainer),r.setEnd(n[1].container,n[1].offsetInContainer),i.removeAllRanges(),i.addRange(r)}},{key:"clearSelect",value:function(){window.getSelection().removeAllRanges()}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=/\u200B/g,l=function(){function e(t){r(this,e),this.sqe=t}return i(e,[{key:"getTextContent",value:function(){return this.sqe.get$Body()[0].textContent.replace(a,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetNode([e.start,e.end]),n=this.sqe.getSelection().cloneRange();n.setStart(t[0].container,t[0].offsetInContainer),n.setEnd(t[1].container,t[1].offsetInContainer);var r=this._getExtraInfoOfRange(n);return e.text=r.text,e.top=r.top,e.left=r.left,e.height=r.height,e}},{key:"_getExtraInfoOfRange",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,l=void 0,s=void 0,u=void 0,c=e.endContainer,d=e.endOffset,f=e.cloneContents().textContent.replace(a,"");if(o.getChildNodeByOffset(c,d)&&(e.setStart(c,d),e.collapse(!0),r=e.getBoundingClientRect()),r&&!r.top&&this.sqe.modifyDocument(function(){l=document.createElement("SPAN"),l.textContent="​",e.endContainer.parentNode.insertBefore(l,e.endContainer),r=l.getBoundingClientRect(),s=l.parentNode,s.removeChild(l)}),r){u=this.sqe.get$Body().parent().offset(),t=this.sqe.scrollTop()+r.top-u.top+$("body").scrollTop(),n=r.left-u.left;i=r.height}else i=t=n=0;return{text:f,top:t,left:n,height:i}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,i=this.sqe.getSelection().cloneRange();return this._extendRangeToTextNodeIfHasNone(i)?(e=i.cloneRange(),e.setStart(this.sqe.get$Body()[0],0),e.setEnd(i.startContainer,i.startOffset),r=this._getExtraInfoOfRange(i),t=e.cloneContents().textContent.length,n=t+r.text.length,{start:t,end:n,text:r.text,top:r.top,left:r.left,height:r.height}):null}},{key:"_extendRangeToTextNodeIfHasNone",value:function(e){var t=o.getChildNodeByOffset(e.endContainer,e.endOffset),n=void 0;if(!o.isTextNode(e.endContainer)||!t.nodeValue.replace(a,"").length)if(o.isTextNode(t))e.setEnd(t,0);else{if(!(n=o.getPrevTextNode(t)))return!1;e.setEnd(n,n.length)}return!0}},{key:"_findOffsetNode",value:function(e){return o.findOffsetNode(this.sqe.get$Body()[0],e,function(e){return e.replace(a,"")})}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetNode([e,t]),r=this.sqe.getSelection().cloneRange();r.setStart(n[0].container,n[0].offsetInContainer),r.setEnd(n[1].container,n[1].offsetInContainer),this.sqe.setSelection(r)}},{key:"clearSelect",value:function(){var e=this.sqe.getSelection().cloneRange();e.collapse(!0),this.sqe.setSelection(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";var r=n(5),i=function(e){return e&&e.__esModule?e:{default:e}}(r);i.default.setLang(["ko","ko_KR"],{"Merge cells":"셀 병합","Unmerge cells":"셀 병합해제","Cannot change part of merged cell":"병합 된 셀의 일부를 변경할 수 없습니다.","Cannot paste row merged cells into the table header":"테이블 헤더에는 행 병합된 셀을 붙여넣을 수 없습니다."}),i.default.setLang(["en","en_US"],{"Merge cells":"Merge cells","Unmerge cells":"Unmerge cells","Cannot change part of merged cell":"Cannot change part of merged cell.","Cannot paste row merged cells into the table header":"Cannot paste row merged cells into the table header."}),i.default.setLang(["ja","ja_JP"],{"Merge cells":"セルの結合","Unmerge cells":"セルの結合を解除","Cannot change part of merged cell":"結合されたセルの一部を変更することはできません。","Cannot paste row merged cells into the table header":"行にマージされたセルをヘッダーに貼り付けることはできません。"}),i.default.setLang(["nl","nl_NL"],{"Merge cells":"cellen samenvoegen","Unmerge cells":"Samenvoegen cellen ongedaan maken","Cannot change part of merged cell":"Kan geen deel uit van samengevoegde cel te veranderen.","Cannot paste row merged cells into the table header":"Kan niet plakken rij samengevoegde cellen in de koptekst. "}),i.default.setLang(["zh","zh_CN"],{"Merge cells":"合并单元格","Unmerge cells":"取消合并单元格","Cannot change part of merged cell":"无法更改合并单元格的一部分。","Cannot paste row merged cells into the table header":"无法将行合并单元格粘贴到标题中。"})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){var r,o=n+1,a=(r=[]).concat.apply(r,i(e.map(function(e){return e.slice(t,o)}))),l=a.filter(function(e){var t=e.content;return t&&t!==k});return l.length?l[0].content:k}function a(e,t,n){var r,o=n+1,a=e.map(function(e){return e.slice(t,o)});(r=[]).concat.apply(r,i(a)).slice(1).forEach(function(e){var t=e.nodeName;b.forEach(e,function(t,n){return delete e[n]}),e.nodeName=t})}function l(e,t,n,r){var i=n+1;e.forEach(function(e){e.slice(t,i).forEach(function(e){e.rowMergeWith=r})})}function s(e,t,n,r){var i=n+1;e.forEach(function(e){e.slice(t,i).forEach(function(e){e.colMergeWith=r})})}function u(e,t){var n=t.start,r=t.end,i=n.rowIndex,u=n.colIndex,c=r.rowIndex,d=r.colIndex,f=e[i][u],h=e.slice(i,c+1),g=c-i+1,p=d-u+1;f.rowspan=g,f.colspan=p,f.content=o(h,u,d),a(h,u,d),g>1&&l(h.slice(1),u,d,i),p>1&&s(h,u+1,d,u)}function c(e,t,n){var r=g.default.createTableData(e),i=g.default.findElementIndex(r,t,n);return e.find("tr").eq(i.rowIndex).find("td, th")[i.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._mergeCells=u;var d=n(0),f=r(d),h=n(2),g=r(h),p=n(3),v=r(p),m=n(4),y=r(m),_=tui,b=_.util,k=b.browser.msie?"":"<br>",w=f.default.command("wysiwyg",{name:"MergeCells",exec:function(e){var t=e.getEditor();if(e.focus(),t.hasFormat("TABLE")){var n=e.componentManager.getManager("tableSelection"),r=n.getSelectedCells();if(!(r.length<2||n.hasSelectedBothThAndTd(r))){var i=t.getSelection().cloneRange(),o=$(i.startContainer),a=o.closest("table"),l=g.default.createTableData(a),s=v.default.getTableSelectionRange(l,r,o);u(l,s);var d=y.default.replaceTable(a,l),f=c(d,s.start.rowIndex,s.start.colIndex);y.default.focusToCell(t,i,f)}}}});t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return{nodeName:t,colMergeWith:e}}function a(e,t,n,r){var i=e[n],a=void 0;if(_.isExisty(i.colMergeWith)){var l=i.colMergeWith,s=e[l],u=l+s.colspan-1;_.isExisty(s.rowMergeWith)&&r?a=_.extend({},r):u>n&&(s.colspan+=1,a=_.extend({},i))}else i.colspan>1&&(i.colspan+=1,a=o(n,i.nodeName));return a||(a=h.default.createBasicCell(t,n+1,i.nodeName)),a}function l(e,t,n){var r=_.range(t,n+1),i=[],o=null;return e.forEach(function(e,t){var l=r.map(function(r,i){var l=o?o[i-1]:null;return a(e,t,n,l)});o=l,i.push(l)}),i}function s(e,t){var n=t.end,r=h.default.findColMergedLastIndex(e,n.rowIndex,n.colIndex),o=l(e,t.start.colIndex,r),a=r+1;e.forEach(function(e,t){e.splice.apply(e,i([a,0].concat(o[t])))})}function u(e,t,n){var r=h.default.createTableData(e),i=h.default.findColMergedLastIndex(r,t,n)+1,o=h.default.findElementIndex(r,t,i);return e.find("tr").eq(o.rowIndex).find("td, th")[o.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._createNewColumns=l,t._addColumns=s;var c=n(0),d=r(c),f=n(2),h=r(f),g=n(3),p=r(g),v=n(4),m=r(v),y=tui,_=y.util,b=d.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),i=r.closest("table"),o=h.default.createTableData(i),a=e.componentManager.getManager("tableSelection").getSelectedCells(),l=p.default.getTableSelectionRange(o,a,r);s(o,l);var c=m.default.replaceTable(i,o),d=u(c,l.start.rowIndex,l.end.colIndex);m.default.focusToCell(t,n,d)}}});t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return{nodeName:"TD",rowMergeWith:e}}function a(e,t){var n=null;return e[t].map(function(r,i){var a=void 0;if(y.isExisty(r.rowMergeWith)){var l=r.rowMergeWith,s=e[l][i],u=l+s.rowspan-1;y.isExisty(s.colMergeWith)&&n?a=y.extend({},n):u>t&&(s.rowspan+=1,a=y.extend({},r))}else r.rowspan>1&&(r.rowspan+=1,a=o(t));return a||(a=f.default.createBasicCell(t+1,i)),n=a,a})}function l(e,t){var n=t.start.rowIndex,r=t.end,o=f.default.findRowMergedLastIndex(e,r.rowIndex,r.colIndex),l=y.range(n,o+1).map(function(){return a(e,o)});e.splice.apply(e,i([o+1,0].concat(l)))}function s(e,t,n){var r=f.default.createTableData(e),i=f.default.findRowMergedLastIndex(r,t,n)+1,o=f.default.findElementIndex(r,i,n);return e.find("tr").eq(o.rowIndex).find("td")[o.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._createNewRow=a,t._addRow=l;var u=n(0),c=r(u),d=n(2),f=r(d),h=n(3),g=r(h),p=n(4),v=r(p),m=tui,y=m.util,_=c.default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),i=r.closest("table"),o=f.default.createTableData(i),a=e.componentManager.getManager("tableSelection").getSelectedCells(),u=g.default.getTableSelectionRange(o,a,r);l(o,u);var c=v.default.replaceTable(i,o),d=s(c,u.end.rowIndex,u.start.colIndex);v.default.focusToCell(t,n,d)}}});t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){p.range(t,n+1).forEach(function(t){var n=e[t];p.isExisty(n.colMergeWith)?e[n.colMergeWith].align=r:n.align=r})}function o(e,t){var n=u.default.findElementRowIndex(t),r=u.default.findElementColIndex(t);return e.find("tr").eq(n).find("td, th")[r]}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),l=r(a),s=n(2),u=r(s),c=n(3),d=r(c),f=n(4),h=r(f),g=tui,p=g.util,v=l.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),r=n.getSelection().cloneRange();if(e.focus(),n.hasFormat("TABLE")){var a=$(r.startContainer),l=a.closest("table"),s=u.default.createTableData(l),c=e.componentManager.getManager("tableSelection").getSelectedCells(),f=d.default.getTableSelectionRange(s,c,a);i(s[0],f.start.colIndex,f.end.colIndex,t);var g=h.default.replaceTable(l,s),p=o(g,a);h.default.focusToCell(n,r,p)}}});t.default=v},function(e,t,n){"use strict";function r(e,t,n){var r=new RegExp("^((?:"+n+"=[0-9]+:)?)"+t+"=([0-9]+):(.*)"),i=r.exec(e),o=1;return i&&(o=parseInt(i[2],10),e=i[1]+i[3]),[o,e]}function i(e){var t=e.nodeName,n=e.align||"",i=e.innerHTML.trim(),o=null,a=null,l=r(i,"@cols","@rows"),s=f(l,2);o=s[0],i=s[1];var u=r(i,"@rows","@cols"),c=f(u,2);return a=c[0],i=c[1],{nodeName:t,colspan:o,rowspan:a,content:i,align:n}}function o(e){return e.find("tr").get().map(function(e){return $(e).find("td, th").get().map(i)})}function a(e,t){var n=-1;return tui.util.forEach(e,function(e,r){var i=!0;return t(e,r)&&(n=r,i=!1),i}),n}function l(e){var t=a(e,function(e){return"TD"===e[0].nodeName});return[e.slice(0,t),e.slice(t)]}function s(e){e.forEach(function(e){var t=e.length,n=0;e.forEach(function(e){n+=e.colspan-1}),e.splice(t-n)})}function u(e){var t=e.map(function(e,t){return t}),n=t.map(function(){return 0});return e.forEach(function(e,r){var i=e.filter(function(e){return e.rowspan>1}),o=r+1;i.forEach(function(e){var r=e.colspan,i=o+(e.rowspan-1);t.slice(o,i).forEach(function(e){n[e]+=r})})}),n}function c(e){var t=u(e);e.forEach(function(e,n){e.splice(e.length-t[n])})}function d(e){var t=o($(e)),n=l(t),r=f(n,2),i=r[0],a=r[1];return s(i),s(a),c(a),$(g.default.createTableHtml(t))[0]}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t._extractPropertiesForMerge=r,t._parseTableCell=i,t._createTableObjectFrom$Table=o,t._divideTrs=l,t._mergeByColspan=s,t._getRemovalTdCountsByRowspan=u,t._mergeByRowspan=c,t.default=d;var h=n(4),g=function(e){return e&&e.__esModule?e:{default:e}}(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){e.forEach(function(e){m.range(t,n+1).forEach(function(t){var r=e[t];if(m.isExisty(r.colMergeWith)){var i=e[r.colMergeWith];i.colspan&&(i.colspan-=1)}else if(r.colspan>1){var o=t+r.colspan-1;r.colspan-=n-t+1,o>n&&(e[n+1]=m.extend({},r))}})})}function o(e,t,n){e.forEach(function(e){e.slice(n+1).forEach(function(e){m.isExisty(e.colMergeWith)&&e.colMergeWith>=t&&(e.colMergeWith=n+1)})})}function a(e,t){var n=t.start.colIndex,r=t.end,a=d.default.findColMergedLastIndex(e,r.rowIndex,r.colIndex),l=a-n+1;l!==e[0].length&&(i(e,n,a),o(e,n,a),e.forEach(function(e){e.splice(n,l)}))}function l(e,t,n){var r=d.default.createTableData(e);r[0].length-1<n&&(n-=1);var i=d.default.findElementIndex(r,t,n);return e.find("tr").eq(i.rowIndex).find("td, th")[i.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._removeColumns=a;var s=n(0),u=r(s),c=n(2),d=r(c),f=n(3),h=r(f),g=n(4),p=r(g),v=tui,m=v.util,y=u.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),i=r.closest("table"),o=d.default.createTableData(i),s=e.componentManager.getManager("tableSelection").getSelectedCells(),u=h.default.getTableSelectionRange(o,s,r),c=o[0].length;if(a(o,u),c!==o[0].length){var f=p.default.replaceTable(i,o),g=l(f,u.start.rowIndex,u.end.colIndex);p.default.focusToCell(t,n,g)}}}});t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){m.range(t,n+1).forEach(function(t){e[t].forEach(function(r,i){if(m.isExisty(r.rowMergeWith)){var o=e[r.rowMergeWith][i];o.rowspan&&(o.rowspan-=1)}else if(r.rowspan>1){var a=t+r.rowspan-1;r.rowspan-=n-t+1,a>n&&(e[n+1][i]=m.extend({},r))}})})}function o(e,t,n){e.slice(n+1).forEach(function(e){e.forEach(function(e){m.isExisty(e.rowMergeWith)&&e.rowMergeWith>=t&&(e.rowMergeWith=n+1)})})}function a(e,t){var n=t.start.rowIndex,r=t.end,a=d.default.findRowMergedLastIndex(e,r.rowIndex,r.colIndex),l=a-n+1;l!==e.length-1&&(i(e,n,a),o(e,n,a),e.splice(n,l))}function l(e,t,n){var r=d.default.createTableData(e);r.length-1<t&&(t-=1);var i=d.default.findElementIndex(r,t,n);return e.find("tr").eq(i.rowIndex).find("td")[i.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._removeRow=a;var s=n(0),u=r(s),c=n(2),d=r(c),f=n(3),h=r(f),g=n(4),p=r(g),v=tui,m=v.util,y=u.default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),i=r.closest("table"),o=d.default.createTableData(i),s=o.length,u=e.componentManager.getManager("tableSelection").getSelectedCells(),c=h.default.getTableSelectionRange(o,u,r);if(a(o,c),s!==o.length){var f=p.default.replaceTable(i,o),g=l(f,c.end.rowIndex,c.start.colIndex);p.default.focusToCell(t,n,g)}}}});t.default=y},function(e,t,n){"use strict";function r(e){var t=['<button type="button" class="te-table-add-row">'+l.default.get("Add row")+"</button>",'<button type="button" class="te-table-add-col">'+l.default.get("Add col")+"</button>",'<button type="button" class="te-table-remove-row">'+l.default.get("Remove row")+"</button>",'<button type="button" class="te-table-remove-col">'+l.default.get("Remove col")+"</button>","<hr/>",'<button type="button" class="te-table-merge">'+l.default.get("Merge cells")+"</button>",'<button type="button" class="te-table-unmerge">'+l.default.get("Unmerge cells")+"</button>","<hr/>",'<button type="button" class="te-table-col-align-left">'+l.default.get("Align left")+"</button>",'<button type="button" class="te-table-col-align-center">'+l.default.get("Align center")+"</button>",'<button type="button" class="te-table-col-align-right">'+l.default.get("Align right")+"</button>","<hr/>",'<button type="button" class="te-table-remove">'+l.default.get("Remove table")+"</button>"].join(""),n=$(t);e.setContent(n)}function i(e,t,n){var r=e.$content,i=$(r[5]),o=$(r[6]),a=$(r[7]);e.on("click .te-table-merge",function(){t.emit("command","MergeCells")}),e.on("click .te-table-unmerge",function(){t.emit("command","UnmergeCells")}),t.listen("openPopupTableUtils",function(){var e=n.getSelectedCells(),t=e.length;t?(t<2||n.hasSelectedBothThAndTd(e)?i.hide():i.show(),e.is("[rowspan], [colspan]")?o.show():o.hide(),a.show()):(i.hide(),o.hide(),a.hide())})}function o(e,t,n){r(e),i(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={updateContextMenu:o}},function(e,t,n){"use strict";function r(e){var t=$(e),n=t.attr("colspan")||"",r=t.attr("rowspan")||"",i=t.html();n&&(i="@cols="+n+":"+i),r&&(i="@rows="+r+":"+i),i&&t.html(i)}function i(e){return $(e).find("td, th").get().forEach(r),e}Object.defineProperty(t,"__esModule",{value:!0}),t._prependMergeSyntaxToContent=r,t.default=i},function(e,t,n){"use strict";function r(e,t){return tui.util.range(0,t).map(function(){return e}).join("")}function i(e){var t=e.align,n=(e.textContent||e.innerText).replace(u,""),i=n.length,o="",a="";return t&&("left"===t?(o=":",i-=1):"right"===t?(a=":",i-=1):"center"===t&&(a=":",o=":",i-=2)),i=Math.max(i,3),o+r("-",i)+a}function o(e){var t=0;return e.filter(function(e){return $(e).attr("colspan")}).forEach(function(e){t+=parseInt($(e).attr("colspan"),10)-1}),t}function a(e,t){var n=$(e).find("th").get(),a=n.map(function(e){return" "+i(e)+" |"}).join("");return a+=r(" --- |",o(n)),t?t+"|"+a+"\n":""}Object.defineProperty(t,"__esModule",{value:!0}),t._getAdditionalThCount=o,t._createTheadMarkdown=a;var l=window,s=l.toMark,u=/@cols=[0-9]+:/g;t.default=s.Renderer.factory(s.gfmRenderer,{THEAD:a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){var n,r=t.start,o=t.end,a=r.colIndex,l=o.colIndex+1,s=e.slice(r.rowIndex,o.rowIndex+1),u=s.map(function(e){return e.slice(a,l)});return!!(n=[]).concat.apply(n,i(u)).filter(function(e){return e.colspan>1||e.rowspan>1}).length}function a(e,t,n,r,i){var o=t+r,a=n+i,l=y.range(n,a);y.range(t,o).forEach(function(n){var r=e[n],i=n===t?1:0;l.slice(i).forEach(function(e){r[e]=f.default.createBasicCell(n,e,r[e].nodeName)})})}function l(e,t){var n=t.start,r=t.end,i=y.range(n.colIndex,r.colIndex+1);y.range(n.rowIndex,r.rowIndex+1).forEach(function(t){i.forEach(function(n){var r=e[t][n],i=r.colspan,o=r.rowspan;(i>1||o>1)&&(r.colspan=1,r.rowspan=1,a(e,t,n,o,i))})})}function s(e,t,n){var r=f.default.createTableData(e),i=f.default.findElementIndex(r,t,n);return e.find("tr").eq(i.rowIndex).find("td, th")[i.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._hasMergedCell=o,t._unmergeCells=l;var u=n(0),c=r(u),d=n(2),f=r(d),h=n(3),g=r(h),p=n(4),v=r(p),m=tui,y=m.util,_=c.default.command("wysiwyg",{name:"UnmergeCells",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),i=r.closest("table"),a=f.default.createTableData(i),u=e.componentManager.getManager("tableSelection").getSelectedCells(),c=g.default.getTableSelectionRange(a,u,r);if(o(a,c)){l(a,c);var d=v.default.replaceTable(i,a),h=s(d,c.start.rowIndex,c.start.colIndex);v.default.focusToCell(t,n,h)}}}});t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=!1;return w.forEach(e,function(e){return!(n=t(e))}),n}var u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(20),f=r(d),h=n(2),g=r(h),p=n(4),v=r(p),m=n(3),y=r(m),_=n(5),b=r(_),k=tui,w=k.util,C=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"_updateCopyDataMergeWith",value:function(e,t){e.forEach(function(e){e.forEach(function(e){w.isExisty(e.rowMergeWith)&&(e.rowMergeWith-=t.rowIndex),w.isExisty(e.colMergeWith)&&(e.colMergeWith-=t.colIndex)})})}},{key:"_createCopyTableData",value:function(e,t,n){var r=e.slice(t.rowIndex,n.rowIndex+1);return r=r.map(function(e){return e.slice(t.colIndex,n.colIndex+1)}),this._updateCopyDataMergeWith(r,t),r}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection").getSelectedCells();if(t.length){var n=g.default.createTableData($(t[0]).closest("TABLE")),r=y.default.getTableSelectionRange(n,t),i=r.start,o=r.end,a=this._createCopyTableData(n,i,o),l=g.default.createCellIndexData(a),s=g.default.createRenderData(a,l);e.html(v.default.createTableHtml(s))}}},{key:"prepareToTableCellStuffing",value:function(e){var t=e[0].length,n=!1;return e.slice(1).forEach(function(e){var r=e.length;t!==r&&(n=!0,t<r&&(t=r))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=$(e),n=g.default.createTableData(t),r=g.default.addTbodyOrTheadIfNeed(n),i=this.prepareToTableCellStuffing(n),o=i.needTableCellStuffingAid;o&&g.default.stuffCellsIntoIncompleteRow(n,i.maximumCellLength),(r||o)&&v.default.replaceTable(t,n)}},{key:"_findStartCell",value:function(e){return 1===e.length?e.get(0):this.wwe.getEditor().getSelection().startContainer}},{key:"_findStartCellIndex",value:function(e,t){var n=g.default.createCellIndexData(e);return g.default.findCellIndex(n,t)}},{key:"_hasRowMergedHeader",value:function(e,t,n){var r="TH"===t[n.rowIndex][n.colIndex].nodeName,i=s(e[0],function(e){return e.rowspan&&e.rowspan>1});return r&&i}},{key:"_isExactlyFit",value:function(e,t,n){return t%e.length==0&&n%e[0].length==0}},{key:"_updateClipboardTableData",value:function(e,t,n){var r=e.length,o=e[0].length,a=parseInt(t/r,10),l=parseInt(n/o,10);if(a>1){var s=JSON.parse(JSON.stringify(e));w.range(0,a-1).forEach(function(){var t=JSON.parse(JSON.stringify(s));e.push.apply(e,i(t))})}if(l>1){var u=JSON.parse(JSON.stringify(e));w.range(0,l-1).forEach(function(){var t=JSON.parse(JSON.stringify(u));e.forEach(function(e,n){e.push.apply(e,i(t[n]))})})}}},{key:"_updateTableDataByClipboardData",value:function(e,t,n){var r=n.rowIndex,i=n.colIndex;e.forEach(function(e,n){var o=r+n;e.forEach(function(e,n){var r=i+n,a=t[o][r];e.nodeName=a.nodeName,t[o][r]=e})})}},{key:"_isPossibleToPaste",value:function(e,t,n){var r=t.rowIndex,i=t.colIndex,o=n.rowIndex,a=n.colIndex,l=e.slice(r,o+1),u=l[0].slice(i,a+1),c=!s(u,function(e){return w.isExisty(e.rowMergeWith)});if(c){c=!s(w.pluck(l,i),function(e){return w.isExisty(e.colMergeWith)})}if(c&&e.length>o+1){c=!s(e[o+1].slice(i,a+1),function(e){return w.isExisty(e.rowMergeWith)})}if(c&&e[0].length>a+1){c=!s(w.pluck(l,a+1),function(e){return w.isExisty(e.colMergeWith)})}return c}},{key:"_spliceClipboardData",value:function(e,t,n){e.splice(t),e.forEach(function(e){e.splice(n)})}},{key:"_bookmarkLastTd",value:function(e){var t=e.rowIndex,n=e.colIndex,r=this.wwe.getEditor(),i=r.get$Body().find(".tui-paste-table-bookmark"),o=g.default.createTableData(i),a=o[t][n];t=w.isExisty(a.rowMergeWith)?a.rowMergeWith:t,n=w.isExisty(a.colMergeWith)?a.colMergeWith:n;var l=o[t][n].elementIndex,s=i.find("tr").eq(l.rowIndex).children()[l.colIndex];i.removeClass("tui-paste-table-bookmark"),$(s).addClass("tui-paste-table-cell-bookmark")}},{key:"_updateClipboardDataForPasteToSamllerSelectedArea",value:function(e,t,n,r,i){var o=!0,a={rowIndex:0,colIndex:0},l={rowIndex:n-1,colIndex:r-1};return this._isPossibleToPaste(e,a,l)?(this._spliceClipboardData(e,n,r),this._updateTableDataByClipboardData(e,t,i)):o=!1,o}},{key:"_pasteToSelectedArea",value:function(e,t,n,r){var i=y.default.getTableSelectionRange(n,r),o=i.start,a=i.end,l=a.rowIndex-o.rowIndex+1,s=a.colIndex-o.colIndex+1,u=t.length,c=t[0].length,d=l>=u&&s>=c,f=b.default.get("Cannot change part of merged cell"),h=!0,g=void 0;this._hasRowMergedHeader(t,n,o)?(f=b.default.get("Cannot paste row merged cells into the table header"),h=!1):this._isExactlyFit(t,l,s)?(g=a,this._updateClipboardTableData(t,l,s),this._updateTableDataByClipboardData(t,n,o)):d?(g={rowIndex:o.rowIndex+u-1,colIndex:o.colIndex+c-1},this._isPossibleToPaste(n,o,g)?this._updateTableDataByClipboardData(t,n,o):h=!1):(g={rowIndex:o.rowIndex+l-1,colIndex:o.colIndex+s-1},h=this._updateClipboardDataForPasteToSamllerSelectedArea(t,n,l,s,o)),h?(n.className+=" tui-paste-table-bookmark",v.default.replaceTable(e,n),this._bookmarkLastTd(g)):(alert(f),this.wwe.focus())}},{key:"_findEndCellIndex",value:function(e,t){var n=t.rowIndex,r=t.colIndex;return{rowIndex:n+e.length-1,colIndex:r+e[0].length-1}}},{key:"_expandRow",value:function(e,t){var n=e.length,r=e[0].length,o=w.range(n,n+t).map(function(e){return w.range(0,r).map(function(t){return g.default.createBasicCell(e,t)})});e.push.apply(e,i(o))}},{key:"_expandCoumn",value:function(e,t){var n=e[0].length,r=w.range(n,n+t);e.forEach(function(e,t){var n=u(e,1),o=n[0].nodeName,a=r.map(function(e){return g.default.createBasicCell(t,e,o)});e.push.apply(e,i(a))})}},{key:"_expandTableDataIfNeed",value:function(e,t,n){var r=n.rowIndex-e.length+1,i=n.colIndex-e[0].length+1;r>0&&this._expandRow(e,r),i>0&&this._expandCoumn(e,i)}},{key:"_pasteAllClipboardTableData",value:function(e,t,n,r){var i=this._findEndCellIndex(t,r);if(this._hasRowMergedHeader(t,n,r))return alert(b.default.get("Cannot paste row merged cells into the table header")),void this.wwe.focus();this._expandTableDataIfNeed(n,r,i),this._isPossibleToPaste(n,r,i)?(this._updateTableDataByClipboardData(t,n,r),n.className+=" tui-paste-table-bookmark",v.default.replaceTable(e,n),this._bookmarkLastTd(i)):(alert(b.default.get("Cannot change part of merged cell")),this.wwe.focus())}},{key:"pasteClipboardData",value:function(e){var t=g.default.createTableData(e),n=this.wwe.componentManager.getManager("tableSelection"),r=n.getSelectedCells(),i=$(this._findStartCell(r)),o=i.closest("table"),a=g.default.createTableData(o),l=this._findStartCellIndex(a,i);r.length>1?this._pasteToSelectedArea(o,t,a,r):this._pasteAllClipboardTableData(o,t,a,l)}}]),t}(f.default);e.exports=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(21),u=r(s),c=n(2),d=r(c),f=n(3),h=r(f),g=tui,p=g.util,v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._tableData=null,n.mergedTableSelectionManager=!0,n}return a(t,e),l(t,[{key:"_addClassToSelectedCells",value:function(e,t,n){var r=n.start,i=n.end,o=p.range(r.colIndex,i.colIndex+1),a=e.find("tr");p.range(r.rowIndex,i.rowIndex+1).forEach(function(e){var n=t[e],r=a.eq(e).find("td, th");return o.forEach(function(e){n[e].elementIndex&&r.eq(n[e].elementIndex.colIndex).addClass("te-cell-selected")})})}},{key:"onDragStart",value:function(e){var t=$(e).closest("[contenteditable=true] table");this._tableData=d.default.createTableData(t)}},{key:"onDragEnd",value:function(){this._tableData=null}},{key:"highlightTableCellsBy",value:function(e,t){var n=$(e),r=$(t),i=n.closest("[contenteditable=true] table"),o=h.default.findSelectionRange(this._tableData,n,r);this.removeClassAttrbuteFromAllCellsIfNeed(),this._addClassToSelectedCells(i,this._tableData,o)}},{key:"styleToSelectedCells",value:function(e){var t=this.wwe.getEditor(),n=t.getSelection().cloneRange();$(n.startContainer).closest("[contenteditable=true] table").find("tr").get().forEach(function(r){var i=$(r).find(".te-cell-selected"),o=i.first().get(0),a=i.last().get(0);i.length&&(n.setStart(o,0),n.setEnd(a,a.childNodes.length),t.setSelection(n),e(t))})}},{key:"hasSelectedBothThAndTd",value:function(e){return e=e||this.getSelectedCells(),e.first()[0].nodeName!==e.last()[0].nodeName}}]),t}(u.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","","","","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","@","!",'"',"#","$","%","&","_","(",")","*","+","|","-","{","}","~","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","-",".","/","`","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","'","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""],a=void 0,l=function(){function e(t){r(this,e),this._setSplitter(t)}return i(e,[{key:"_setSplitter",value:function(e){var t=e?e.splitter:"+";this._splitter=t}},{key:"convert",value:function(e){var t=[];e.shiftKey&&t.push("SHIFT"),e.ctrlKey&&t.push("CTRL"),e.metaKey&&t.push("META"),e.altKey&&t.push("ALT");var n=this._getKeyCodeChar(e.keyCode);return n&&t.push(n),t.join(this._splitter)}},{key:"_getKeyCodeChar",value:function(e){return o[e]}}],[{key:"getSharedInstance",value:function(){return a||(a=new e),a}},{key:"keyCode",value:function(e){return o.indexOf(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=function(){function e(){r(this,e),this.globalTOID=null,this.lazyRunFunctions={}}return i(e,[{key:"run",value:function(e,t,n,r){var i=void 0;return a.isString(e)?i=this._runRegisteredRun(e,t,n,r):(i=this._runSingleRun(e,t,n,r,this.globalTOID),this.globalTOID=i),i}},{key:"registerLazyRunFunction",value:function(e,t,n,r){r=r||this,this.lazyRunFunctions[e]={fn:t,delay:n,context:r,TOID:null}}},{key:"_runSingleRun",value:function(e,t,n,r,i){return this._clearTOIDIfNeed(i),i=setTimeout(function(){e.call(n,t)},r)}},{key:"_runRegisteredRun",value:function(e,t,n,r){var i=this.lazyRunFunctions[e],o=i.fn,a=i.TOID;return r=r||i.delay,n=n||i.context,a=this._runSingleRun(o,t,n,r,a),i.TOID=a,a}},{key:"_clearTOIDIfNeed",value:function(e){e&&clearTimeout(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e){switch(e){case 9:case 32:return!0}return!1}e.exports=function(e,t,n,i){var o,a,l,s,u,c,d,f,h,g,p,v,m,y,_,b,k=/(?:-|\*|\d+\.) {1,4}(?:> {0,3})[^>]*$/,w=e.src.split("\n"),C=w[t],E=e.bMarks[t]+e.tShift[t],T=e.eMarks[t];if(C.match(k)||62!==e.src.charCodeAt(E++))return!1;if(i)return!0;for(32===e.src.charCodeAt(E)&&E++,c=e.blkIndent,e.blkIndent=0,h=g=e.sCount[t]+E-(e.bMarks[t]+e.tShift[t]),u=[e.bMarks[t]],e.bMarks[t]=E;E<T&&(p=e.src.charCodeAt(E),r(p));)9===p?g+=4-g%4:g++,E++;for(a=E>=T,s=[e.sCount[t]],e.sCount[t]=g-h,l=[e.tShift[t]],e.tShift[t]=E-e.bMarks[t],v=e.md.block.ruler.getRules("blockquote"),o=t+1;o<n&&!(e.sCount[o]<c)&&(E=e.bMarks[o]+e.tShift[o],T=e.eMarks[o],!(E>=T));o++)if(62!==e.src.charCodeAt(E++)){if(a)break;for(b=!1,y=0,_=v.length;y<_;y++)if(v[y](e,o,n,!0)){b=!0;break}if(b)break;u.push(e.bMarks[o]),l.push(e.tShift[o]),s.push(e.sCount[o]),e.sCount[o]=-1}else{for(32===e.src.charCodeAt(E)&&E++,h=g=e.sCount[o]+E-(e.bMarks[o]+e.tShift[o]),u.push(e.bMarks[o]),e.bMarks[o]=E;E<T&&(p=e.src.charCodeAt(E),r(p));)9===p?g+=4-g%4:g++,E++;a=E>=T,s.push(e.sCount[o]),e.sCount[o]=g-h,l.push(e.tShift[o]),e.tShift[o]=E-e.bMarks[o]}for(d=e.parentType,e.parentType="blockquote",m=e.push("blockquote_open","blockquote",1),m.markup=">",m.map=f=[t,0],e.md.block.tokenize(e,t,o),m=e.push("blockquote_close","blockquote",-1),m.markup=">",e.parentType=d,f[1]=e.line,y=0;y<l.length;y++)e.bMarks[y+t]=u[y],e.tShift[y+t]=l[y],e.sCount[y+t]=s[y];return e.blkIndent=c,!0}},function(e,t,n){"use strict";function r(e,t,n){var r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i}function i(e){return!0===e.block&&"code"===e.tag&&"fence"===e.type}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var a=function(e){e.core.ruler.after("block","tui-code-block",function(e){var t,n,a=e.tokens;for(n=0;n<a.length;n+=1)t=a[n],i(t)&&t.info&&r(t,"data-language",o(t.info.replace(" ",""),!0))})};e.exports=a},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o,a=/ {0,3}(?:-|\*|\d\.) /,l=e.src.split("\n"),s=l[t],u=0;if(s.match(a)||e.sCount[t]-e.blkIndent<4)return!1;for(i=r=t+1;r<n;)if(e.isEmpty(r)){if(++u>=2&&"list"===e.parentType)break;r++}else{if(u=0,!(e.sCount[r]-e.blkIndent>=4))break;r++,i=r}return e.line=i,o=e.push("code_block","code",0),o.content=e.getLines(t,i,4+e.blkIndent,!0),o.map=[t,e.line],!0}},function(e,t,n){"use strict";var r=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^<("+r.join("|")+")","i"),/^\/?>$/,!0],[new RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|pre|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)\s*$/,/^$/,!1]];e.exports=function(e,t,n,r){var o,a,l,s,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(u))return!1;for(s=e.src.slice(u,c),o=0;o<i.length;o++)if(i[o][0].test(s)){if(5===o)return!1;break}if(o===i.length)return!1;if(r)return i[o][2];if(a=t+1,!i[o][1].test(s))for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(u=e.bMarks[a]+e.tShift[a],c=e.eMarks[a],s=e.src.slice(u,c),i[o][1].test(s)){0!==s.length&&a++;break}return e.line=a,l=e.push("html_block","",0),l.map=[t,a],l.content=e.getLines(t,a,e.blkIndent,!0),!0}},function(e,t,n){"use strict";function r(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function i(e){var t,n=[],r=0,i=e.length,o=0,a=0,l=!1,s=0;for(t=e.charCodeAt(r);r<i;)96===t&&o%2==0?(l=!l,s=r):124!==t||o%2!=0||l?92===t?o+=1:o=0:(n.push(e.substring(a,r)),a=r+1),r+=1,r===i&&l&&(l=!1,r=s+1),t=e.charCodeAt(r);return n.push(e.substring(a)),n}e.exports=function(e,t,n,o){var a,l,s,u,c,d,f,h,g,p,v,m,y;if(t+2>n)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if((s=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(a=e.src.charCodeAt(s))&&45!==a&&58!==a)return!1;if(l=r(e,t+1),!/^[-:| ]+$/.test(l))return!1;for(d=l.split("|"),g=[],u=0;u<d.length;u+=1){if(!(v=d[u].trim())){if(0===u||u===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?g.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?g.push("left"):g.push("")}if(p=g.length,l=r(e,t).trim(),-1===l.indexOf("|"))return!1;if(d=i(l.replace(/^\||\|$/g,"")),(f=d.length)>p)return!1;if(f<p){for(u=0;u<p-f;u+=1)d.push("");f=d.length}if(o)return!0;for(h=e.push("table_open","table",1),h.map=m=[t,0],h=e.push("thead_open","thead",1),h.map=[t,t+1],h=e.push("tr_open","tr",1),h.map=[t,t+1],u=0;u<f;u+=1)h=e.push("th_open","th",1),h.map=[t,t+1],g[u]&&(h.attrs=[["align",g[u]]]),h=e.push("inline","",0),h.content=d[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),h=e.push("tbody_open","tbody",1),h.map=y=[t+2,0],c=t+2;c<n&&!(e.sCount[c]<e.blkIndent)&&(l=r(e,c),-1!==l.indexOf("|"));c+=1){for(d=i(l.replace(/^\||\|\s*$/g,"")),h=e.push("tr_open","tr",1),u=0;u<f;u+=1)h=e.push("td_open","td",1),g[u]&&(h.attrs=[["align",g[u]]]),h=e.push("inline","",0),h.content=d[u]?d[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),m[1]=y[1]=c,e.line=c,!0}},function(e,t,n){"use strict";function r(e){e.content=e.content.slice(4),e.children[0].content=e.children[0].content.slice(4)}function i(e){var t=!1;return 0!==e.content.indexOf("[x]")&&0!==e.content.indexOf("[X]")||(t=!0),t}function o(e,t,n){var r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i}function a(e,t){return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===e[t].content.indexOf("[ ]")||0===e[t].content.indexOf("[x]")||0===e[t].content.indexOf("[X]"))}var l=function(e){e.core.ruler.after("inline","tui-task-list",function(e){var t,n,l=e.tokens;for(n=2;n<l.length;n+=1)a(l,n)&&(t=i(l[n])?"task-list-item checked":"task-list-item",r(l[n]),o(l[n-2],"class",t),o(l[n-2],"data-te-task",""))})};e.exports=l},function(e,t,n){"use strict";function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.Diff,r.prototype.diff_main=function(e,t,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var o=n,a=this.diff_commonPrefix(e,t),l=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var s=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var u=this.diff_compute_(e,t,o,i);return l&&u.unshift([0,l]),s&&u.push([0,s]),this.diff_cleanupMerge(u),u},r.prototype.diff_compute_=function(e,t,n,r){var i;if(!e)return[[1,t]];if(!t)return[[-1,e]];var o=e.length>t.length?e:t,a=e.length>t.length?t:e,l=o.indexOf(a);if(-1!=l)return i=[[1,o.substring(0,l)],[0,a],[1,o.substring(l+a.length)]],e.length>t.length&&(i[0][0]=i[2][0]=-1),i;if(1==a.length)return[[-1,e],[1,t]];var s=this.diff_halfMatch_(e,t);if(s){var u=s[0],c=s[1],d=s[2],f=s[3],h=s[4],g=this.diff_main(u,d,n,r),p=this.diff_main(c,f,n,r);return g.concat([[0,h]],p)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},r.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var i=r.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,i),this.diff_cleanupSemantic(o),o.push([0,""]);for(var a=0,l=0,s=0,u="",c="";a<o.length;){switch(o[a][0]){case 1:s++,c+=o[a][1];break;case-1:l++,u+=o[a][1];break;case 0:if(l>=1&&s>=1){o.splice(a-l-s,l+s),a=a-l-s;for(var r=this.diff_main(u,c,!1,n),d=r.length-1;d>=0;d--)o.splice(a,0,r[d]);a+=r.length}s=0,l=0,u="",c=""}a++}return o.pop(),o},r.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,i=t.length,o=Math.ceil((r+i)/2),a=o,l=2*o,s=new Array(l),u=new Array(l),c=0;c<l;c++)s[c]=-1,u[c]=-1;s[a+1]=0,u[a+1]=0;for(var d=r-i,f=d%2!=0,h=0,g=0,p=0,v=0,m=0;m<o&&!((new Date).getTime()>n);m++){for(var y=-m+h;y<=m-g;y+=2){var _,b=a+y;_=y==-m||y!=m&&s[b-1]<s[b+1]?s[b+1]:s[b-1]+1;for(var k=_-y;_<r&&k<i&&e.charAt(_)==t.charAt(k);)_++,k++;if(s[b]=_,_>r)g+=2;else if(k>i)h+=2;else if(f){var w=a+d-y;if(w>=0&&w<l&&-1!=u[w]){var C=r-u[w];if(_>=C)return this.diff_bisectSplit_(e,t,_,k,n)}}}for(var E=-m+p;E<=m-v;E+=2){var C,w=a+E;C=E==-m||E!=m&&u[w-1]<u[w+1]?u[w+1]:u[w-1]+1;for(var T=C-E;C<r&&T<i&&e.charAt(r-C-1)==t.charAt(i-T-1);)C++,T++;if(u[w]=C,C>r)v+=2;else if(T>i)p+=2;else if(!f){var b=a+d-E;if(b>=0&&b<l&&-1!=s[b]){var _=s[b],k=a+_-b;if(C=r-C,_>=C)return this.diff_bisectSplit_(e,t,_,k,n)}}}}return[[-1,e],[1,t]]},r.prototype.diff_bisectSplit_=function(e,t,n,r,i){var o=e.substring(0,n),a=t.substring(0,r),l=e.substring(n),s=t.substring(r),u=this.diff_main(o,a,!1,i),c=this.diff_main(l,s,!1,i);return u.concat(c)},r.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,o=-1,a=r.length;o<e.length-1;){o=e.indexOf("\n",n),-1==o&&(o=e.length-1);var l=e.substring(n,o+1);n=o+1,(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(t+=String.fromCharCode(a),i[l]=a,r[a++]=l)}return t}var r=[],i={};return r[0]="",{chars1:n(e),chars2:n(t),lineArray:r}},r.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],i=[],o=0;o<r.length;o++)i[o]=t[r.charCodeAt(o)];e[n][1]=i.join("")}},r.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},r.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var o=0,a=1;;){var l=e.substring(i-a),s=t.indexOf(l);if(-1==s)return o;a+=s,0!=s&&e.substring(i-a)!=t.substring(0,a)||(o=a,a++)}},r.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var r,i,o,l,s=e.substring(n,n+Math.floor(e.length/4)),u=-1,c="";-1!=(u=t.indexOf(s,u+1));){var d=a.diff_commonPrefix(e.substring(n),t.substring(u)),f=a.diff_commonSuffix(e.substring(0,n),t.substring(0,u));c.length<f+d&&(c=t.substring(u-f,u)+t.substring(u,u+d),r=e.substring(0,n-f),i=e.substring(n+d),o=t.substring(0,u-f),l=t.substring(u+d))}return 2*c.length>=e.length?[r,i,o,l,c]:null}if(this.Diff_Timeout<=0)return null;var r=e.length>t.length?e:t,i=e.length>t.length?t:e;if(r.length<4||2*i.length<r.length)return null;var o,a=this,l=n(r,i,Math.ceil(r.length/4)),s=n(r,i,Math.ceil(r.length/2));if(!l&&!s)return null;o=s?l&&l[4].length>s[4].length?l:s:l;var u,c,d,f;return e.length>t.length?(u=o[0],c=o[1],d=o[2],f=o[3]):(d=o[0],f=o[1],u=o[2],c=o[3]),[u,c,d,f,o[4]]},r.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,i=null,o=0,a=0,l=0,s=0,u=0;o<e.length;)0==e[o][0]?(n[r++]=o,a=s,l=u,s=0,u=0,i=e[o][1]):(1==e[o][0]?s+=e[o][1].length:u+=e[o][1].length,i&&i.length<=Math.max(a,l)&&i.length<=Math.max(s,u)&&(e.splice(n[r-1],0,[-1,i]),e[n[r-1]+1][0]=1,r--,r--,o=r>0?n[r-1]:-1,a=0,l=0,s=0,u=0,i=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var c=e[o-1][1],d=e[o][1],f=this.diff_commonOverlap_(c,d),h=this.diff_commonOverlap_(d,c);f>=h?(f>=c.length/2||f>=d.length/2)&&(e.splice(o,0,[0,d.substring(0,f)]),e[o-1][1]=c.substring(0,c.length-f),e[o+1][1]=d.substring(f),o++):(h>=c.length/2||h>=d.length/2)&&(e.splice(o,0,[0,c.substring(0,h)]),e[o-1][0]=1,e[o-1][1]=d.substring(0,d.length-h),e[o+1][0]=-1,e[o+1][1]=c.substring(h),o++),o++}o++}},r.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),i=t.charAt(0),o=n.match(r.nonAlphaNumericRegex_),a=i.match(r.nonAlphaNumericRegex_),l=o&&n.match(r.whitespaceRegex_),s=a&&i.match(r.whitespaceRegex_),u=l&&n.match(r.linebreakRegex_),c=s&&i.match(r.linebreakRegex_),d=u&&e.match(r.blanklineEndRegex_),f=c&&t.match(r.blanklineStartRegex_);return d||f?5:u||c?4:o&&!l&&s?3:l||s?2:o||a?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var i=e[n-1][1],o=e[n][1],a=e[n+1][1],l=this.diff_commonSuffix(i,o);if(l){var s=o.substring(o.length-l);i=i.substring(0,i.length-l),o=s+o.substring(0,o.length-l),a=s+a}for(var u=i,c=o,d=a,f=t(i,o)+t(o,a);o.charAt(0)===a.charAt(0);){i+=o.charAt(0),o=o.substring(1)+a.charAt(0),a=a.substring(1);var h=t(i,o)+t(o,a);h>=f&&(f=h,u=i,c=o,d=a)}e[n-1][1]!=u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=c,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,i=null,o=0,a=!1,l=!1,s=!1,u=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(s||u)?(n[r++]=o,a=s,l=u,i=e[o][1]):(r=0,i=null),s=u=!1):(-1==e[o][0]?u=!0:s=!0,i&&(a&&l&&s&&u||i.length<this.Diff_EditCost/2&&a+l+s+u==3)&&(e.splice(n[r-1],0,[-1,i]),e[n[r-1]+1][0]=1,r--,i=null,a&&l?(s=u=!0,r=0):(r--,o=r>0?n[r-1]:-1,s=u=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},r.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,r=0,i=0,o="",a="";n<e.length;)switch(e[n][0]){case 1:i++,a+=e[n][1],n++;break;case-1:r++,o+=e[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(t=this.diff_commonPrefix(a,o),0!==t&&(n-r-i>0&&0==e[n-r-i-1][0]?e[n-r-i-1][1]+=a.substring(0,t):(e.splice(0,0,[0,a.substring(0,t)]),n++),a=a.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(a,o))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),o=o.substring(0,o.length-t))),0===r?e.splice(n-i,r+i,[1,a]):0===i?e.splice(n-r,r+i,[-1,o]):e.splice(n-r-i,r+i,[-1,o],[1,a]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,o="",a=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},r.prototype.diff_xIndex=function(e,t){var n,r=0,i=0,o=0,a=0;for(n=0;n<e.length&&(1!==e[n][0]&&(r+=e[n][1].length),-1!==e[n][0]&&(i+=e[n][1].length),!(r>t));n++)o=r,a=i;return e.length!=n&&-1===e[n][0]?a:a+(t-o)},r.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,a=0;a<e.length;a++){var l=e[a][0],s=e[a][1],u=s.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case-1:t[a]='<del style="background:#ffe6e6;">'+u+"</del>";break;case 0:t[a]="<span>"+u+"</span>"}}return t.join("")},r.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},r.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},r.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var o=e[i][0],a=e[i][1];switch(o){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:t+=Math.max(n,r),n=0,r=0}}return t+=Math.max(n,r)},r.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,i=0,o=t.split(/\t/g),a=0;a<o.length;a++){var l=o[a].substring(1);switch(o[a].charAt(0)){case"+":try{n[r++]=[1,decodeURI(l)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var s=parseInt(l,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+l);var u=e.substring(i,i+=s);"="==o[a].charAt(0)?n[r++]=[0,u]:n[r++]=[-1,u];break;default:if(o[a])throw new Error("Invalid diff operation in diff_fromDelta: "+o[a])}}if(i!=e.length)throw new Error("Delta length ("+i+") does not equal source text length ("+e.length+").");return n},r.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},r.prototype.match_bitap_=function(e,t,n){function r(e,r){var i=e/t.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),o=this,a=this.Match_Threshold,l=e.indexOf(t,n);-1!=l&&(a=Math.min(r(0,l),a),-1!=(l=e.lastIndexOf(t,n+t.length))&&(a=Math.min(r(0,l),a)));var s=1<<t.length-1;l=-1;for(var u,c,d,f=t.length+e.length,h=0;h<t.length;h++){for(u=0,c=f;u<c;)r(h,n+c)<=a?u=c:f=c,c=Math.floor((f-u)/2+u);f=c;var g=Math.max(1,n-c+1),p=Math.min(n+c,e.length)+t.length,v=Array(p+2);v[p+1]=(1<<h)-1;for(var m=p;m>=g;m--){var y=i[e.charAt(m-1)];if(v[m]=0===h?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(d[m+1]|d[m])<<1|1|d[m+1],v[m]&s){var _=r(h,m-1);if(_<=a){if(a=_,!((l=m-1)>n))break;g=Math.max(1,2*n-l)}}}if(r(h+1,n)>a)break;d=v}return l},r.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},r.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var i=t.substring(e.start2-r,e.start2);i&&e.diffs.unshift([0,i]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+r);o&&e.diffs.push([0,o]),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+o.length,e.length2+=i.length+o.length}},r.prototype.patch_make=function(e,t,n){var o,a;if("string"==typeof e&&"string"==typeof t&&void 0===n)o=e,a=this.diff_main(o,t,!0),a.length>2&&(this.diff_cleanupSemantic(a),this.diff_cleanupEfficiency(a));else if(e&&"object"==(void 0===e?"undefined":i(e))&&void 0===t&&void 0===n)a=e,o=this.diff_text1(a);else if("string"==typeof e&&t&&"object"==(void 0===t?"undefined":i(t))&&void 0===n)o=e,a=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=(void 0===n?"undefined":i(n)))throw new Error("Unknown call format to patch_make.");o=e,a=n}if(0===a.length)return[];for(var l=[],s=new r.patch_obj,u=0,c=0,d=0,f=o,h=o,g=0;g<a.length;g++){var p=a[g][0],v=a[g][1];switch(u||0===p||(s.start1=c,s.start2=d),p){case 1:s.diffs[u++]=a[g],s.length2+=v.length,h=h.substring(0,d)+v+h.substring(d);break;case-1:s.length1+=v.length,s.diffs[u++]=a[g],h=h.substring(0,d)+h.substring(d+v.length);break;case 0:v.length<=2*this.Patch_Margin&&u&&a.length!=g+1?(s.diffs[u++]=a[g],s.length1+=v.length,s.length2+=v.length):v.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(s,f),l.push(s),s=new r.patch_obj,u=0,f=h,c=d)}1!==p&&(c+=v.length),-1!==p&&(d+=v.length)}return u&&(this.patch_addContext_(s,f),l.push(s)),l},r.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=new r.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=i.diffs[a].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,t[n]=o}return t},r.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,i=[],o=0;o<e.length;o++){var a,l=e[o].start2+r,s=this.diff_text1(e[o].diffs),u=-1;if(s.length>this.Match_MaxBits?-1!=(a=this.match_main(t,s.substring(0,this.Match_MaxBits),l))&&(-1==(u=this.match_main(t,s.substring(s.length-this.Match_MaxBits),l+s.length-this.Match_MaxBits))||a>=u)&&(a=-1):a=this.match_main(t,s,l),-1==a)i[o]=!1,r-=e[o].length2-e[o].length1;else{i[o]=!0,r=a-l;var c;if(c=-1==u?t.substring(a,a+s.length):t.substring(a,u+this.Match_MaxBits),s==c)t=t.substring(0,a)+this.diff_text2(e[o].diffs)+t.substring(a+s.length);else{var d=this.diff_main(s,c,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(d)/s.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(d);for(var f,h=0,g=0;g<e[o].diffs.length;g++){var p=e[o].diffs[g];0!==p[0]&&(f=this.diff_xIndex(d,h)),1===p[0]?t=t.substring(0,a+f)+p[1]+t.substring(a+f):-1===p[0]&&(t=t.substring(0,a+f)+t.substring(a+this.diff_xIndex(d,h+p[1].length))),-1!==p[0]&&(h+=p[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,i]},r.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var i=e[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t;else if(t>o[0][1].length){var a=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=a,i.start2-=a,i.length1+=a,i.length2+=a}if(i=e[e.length-1],o=i.diffs,0==o.length||0!=o[o.length-1][0])o.push([0,n]),i.length1+=t,i.length2+=t;else if(t>o[o.length-1][1].length){var a=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,a),i.length1+=a,i.length2+=a}return n},r.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var i=e[n];e.splice(n--,1);for(var o=i.start1,a=i.start2,l="";0!==i.diffs.length;){var s=new r.patch_obj,u=!0;for(s.start1=o-l.length,s.start2=a-l.length,""!==l&&(s.length1=s.length2=l.length,s.diffs.push([0,l]));0!==i.diffs.length&&s.length1<t-this.Patch_Margin;){var c=i.diffs[0][0],d=i.diffs[0][1];1===c?(s.length2+=d.length,a+=d.length,s.diffs.push(i.diffs.shift()),u=!1):-1===c&&1==s.diffs.length&&0==s.diffs[0][0]&&d.length>2*t?(s.length1+=d.length,o+=d.length,u=!1,s.diffs.push([c,d]),i.diffs.shift()):(d=d.substring(0,t-s.length1-this.Patch_Margin),s.length1+=d.length,o+=d.length,0===c?(s.length2+=d.length,a+=d.length):u=!1,s.diffs.push([c,d]),d==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(d.length))}l=this.diff_text2(s.diffs),l=l.substring(l.length-this.Patch_Margin);var f=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==f&&(s.length1+=f.length,s.length2+=f.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=f:s.diffs.push([0,f])),u||e.splice(++n,0,s)}}},r.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},r.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<n.length;){var a=n[i].match(o);if(!a)throw new Error("Invalid patch string: "+n[i]);var l=new r.patch_obj;for(t.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),i++;i<n.length;){var s=n[i].charAt(0);try{var u=decodeURI(n[i].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==s)l.diffs.push([-1,u]);else if("+"==s)l.diffs.push([1,u]);else if(" "==s)l.diffs.push([0,u]);else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+u)}i++}}return t},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,r=["@@ -"+e+" +"+t+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}r[i+1]=n+encodeURI(this.diffs[i][1])+"\n"}return r.join("").replace(/%20/g," ")},e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=window,a=o.CodeMirror,l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.editorContainerEl=t,this.cm=null,this._init(n)}return i(e,[{key:"_init",value:function(e){var t=document.createElement("textarea");this.editorContainerEl.appendChild(t),e=$.extend(!0,{lineWrapping:!0,theme:"default",extraKeys:{"Shift-Tab":"indentLess","Alt-Up":"replaceLineTextToUpper","Alt-Down":"replaceLineTextToLower"},indentUnit:4},e),this.cm=a.fromTextArea(t,e)}},{key:"getCurrentRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{from:e,to:t,collapsed:e.line===t.line&&e.ch===t.ch}}},{key:"focus",value:function(){this.cm.focus()}},{key:"blur",value:function(){this.cm.getInputField().blur()}},{key:"remove",value:function(){this.cm.toTextArea()}},{key:"setValue",value:function(e){this.cm.setValue(e),this.moveCursorToEnd(),this.cm.refresh()}},{key:"getValue",value:function(){return this.cm.getValue("\n")}},{key:"getEditor",value:function(){return this.cm}},{key:"reset",value:function(){this.setValue("")}},{key:"getCaretPosition",value:function(){return this.cm.cursorCoords()}},{key:"addWidget",value:function(e,t,n,r){r&&(e.ch+=r),this.cm.addWidget(e.end,t,!0,n)}},{key:"replaceSelection",value:function(e,t){t&&this.cm.setSelection(t.from,t.to),this.cm.replaceSelection(e),this.focus()}},{key:"replaceRelativeOffset",value:function(e,t,n){var r=this.cm.getCursor(),i={from:{line:r.line,ch:r.ch+t},to:{line:r.line,ch:r.ch+t+n}};this.replaceSelection(e,i)}},{key:"setHeight",value:function(e){this.getWrapperElement().style.height=tui.util.isNumber(e)?e+"px":e}},{key:"getWrapperElement",value:function(){return this.cm.getWrapperElement()}},{key:"getCursor",value:function(e){return this.cm.getCursor(e)}},{key:"moveCursorToEnd",value:function(){var e=this.getEditor().getDoc(),t=e.lastLine();e.setCursor(t,e.getLine(t).length)}},{key:"moveCursorToStart",value:function(){var e=this.getEditor().getDoc(),t=e.firstLine();e.setCursor(t,0)}},{key:"scrollTop",value:function(e){return e&&this.cm.scrollTo(0,e),this.cm.getScrollInfo().top}},{key:"getRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{start:{line:e.line,ch:e.ch},end:{line:t.line,ch:t.ch}}}},{key:"on",value:function(e,t){this.cm.on(e,t)}},{key:"off",value:function(e,t){this.cm.off(e,t)}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._managers={},this._editor=t}return i(e,[{key:"addManager",value:function(e,t){t||(t=e,e=null);var n=new t(this._editor);this._managers[e||n.name]=n}},{key:"getManager",value:function(e){return this._managers[e]}},{key:"removeManager",value:function(e){var t=this.getManager(e);t&&(t.destroy&&t.destroy(),delete this._managers[e])}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l=/(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})(\/([^\s]*))?/g,s=function(){function e(t){r(this,e),this.eventManager=t,this._lastState=null,this._initEvent(),this._initDefaultImageImporter()}return i(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("stateChange",function(t){e._lastState=t}),this.eventManager.listen("drop",function(t){var n=t.data.dataTransfer&&t.data.dataTransfer.files;e._processBlobItems(n,t.data)}),this.eventManager.listen("paste",function(t){e._processClipboard(t.data)}),this.eventManager.listen("pasteBefore",function(t){e._decodeURL(t)})}},{key:"_initDefaultImageImporter",value:function(){this.eventManager.listen("addImageBlobHook",function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)})}},{key:"_emitAddImageBlobHook",value:function(e,t){var n=this,r=e.name?e:e.getAsFile();this.eventManager.emit("addImageBlobHook",r,function(e,t){n.eventManager.emit("command","AddImage",{imageUrl:e,altText:t||r.name||"image"})},t)}},{key:"_decodeURL",value:function(t){if("markdown"===t.source&&t.data.text){var n=[];t.data.text.forEach(function(t){t=t.replace(l,function(t){return e.decodeURIGraceful(t)}),n.push(t)}),t.data.update(null,null,n)}else if("wysiwyg"===t.source&&t.$clipboardContainer.find("A")){var r=t.$clipboardContainer.find("A");r.each(function(t,n){var r=$(n).text(),i=r.match(l)?decodeURI:decodeURIComponent;$(n).text(e.decodeURIGraceful(r,i))})}}},{key:"_processClipboard",value:function(e){var t=e.clipboardData||window.clipboardData,n=t&&t.items,r=t.types;n&&r&&1===r.length&&-1!==a.inArray("Files",r)&&this._processBlobItems(n,e)}},{key:"_processBlobItems",value:function(e,t){var n=this;e&&a.forEachArray(e,function(e){return-1===e.type.indexOf("image")||(t.preventDefault(),t.codemirrorIgnore=!0,n._emitAddImageBlobHook(e,t.type),!1)})}},{key:"_isInBlockFormat",value:function(){var e=this._lastState;return e&&(e.codeBlock||e.list||e.task||e.code)}}],[{key:"decodeURIGraceful",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:decodeURI,n=void 0;try{n=t(e),n=n.replace(/ /g,"%20").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\[/g,"%5B").replace(/\]/g,"%5D").replace(/</g,"%3C").replace(/>/g,"%3E")}catch(t){n=e}return n}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(8),s=n(108),u=new s,c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"button",className:e.className+" tui-toolbar-icons",rootElement:e.$el}));return n._setOptions(e),n._render(),n.on("click",n._onClick.bind(n)),e.tooltip&&(n.on("mouseover",n._onOver.bind(n)),n.on("mouseout",n._onOut.bind(n))),n}return o(t,e),a(t,[{key:"_setOptions",value:function(e){this._command=e.command,this._event=e.event,this._text=e.text,this._tooltip=e.tooltip,this._style=e.style,this._state=e.state}},{key:"_render",value:function(){this.$el.text(this._text),this.$el.attr("type","button"),this._style&&this.$el.attr("style",this._style)}},{key:"_onClick",value:function(){this._command?this.trigger("command",this._command):this._event&&this.trigger("event",this._event),this.trigger("clicked")}},{key:"_onOver",value:function(){u.show(this.$el,this._tooltip)}},{key:"_onOut",value:function(){u.hide()}}]),t}(l);e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"te-tab"}));return n.sections=e.sections,n._$activeButton=null,n._render(e),n._initEvent(e),n}return o(t,e),a(t,[{key:"_initEvent",value:function(e){var t=e.onItemClick;t&&this.on("itemClick",t),this.on("click button",this._onTabButton.bind(this))}},{key:"_render",value:function(e){for(var t=e.items,n=e.initName,r=[],i=0,o=t.length;i<o;i+=1)r.push('<button type="button" data-index="'+i+'">'+t[i]+"</button>");this.$el.html(r.join("")),this.activate(n)}},{key:"activate",value:function(e){var t=this.$el.find('button:contains("'+e+'")');this._activateTabByButton(t)}},{key:"_onTabButton",value:function(e){var t=$(e.target);this._activateTabByButton(t),this.trigger("itemClick",t.text())}},{key:"_activateTabByButton",value:function(e){this._isActivatedButton(e)||this._updateClassByButton(e)}},{key:"_updateClassByButton",value:function(e){if(this._$activeButton){var t=this._$activeButton.attr("data-index");this._$activeButton.removeClass("te-tab-active"),this.sections&&this.sections[t].removeClass("te-tab-active")}e.addClass("te-tab-active"),this._$activeButton=e;var n=e.attr("data-index");this.sections&&this.sections[n].addClass("te-tab-active")}},{key:"_isActivatedButton",value:function(e){return this._$activeButton&&this._$activeButton.text()===e.text()}}]),t}(s.default);e.exports=u},function(e,t,n){"use strict";function r(e){return i(e)&&e.anchor.ch===e.head.ch}function i(e){return e.anchor.line===e.head.line}function o(e,t,n,i){var o=e.getLine(n.line),a=e.getLine(n.line+i),l={anchor:t,head:n};e.replaceRange(a,{line:n.line,ch:0},{line:n.line,ch:o.length},"+input"),e.replaceRange(o,{line:n.line+i,ch:0},{line:n.line+i,ch:a.length},"+input"),r(l)?e.setCursor({line:n.line+i,ch:n.ch}):e.setSelection({line:t.line+i,ch:t.ch},{line:n.line+i,ch:n.ch})}function a(e,t,n,r){var i=e.getRange({line:t.line,ch:0},{line:n.line,ch:e.getLine(n.line).length}),o=r>0?n:t,a=e.getLine(o.line+r),l=void 0;l=r>0?t:n,e.replaceRange(a,{line:l.line,ch:0},{line:l.line,ch:e.getLine(l.line).length},"+input"),e.replaceRange(i,{line:t.line+r,ch:0},{line:n.line+r,ch:e.getLine(n.line+r).length},"+input"),e.setSelection({line:t.line+r,ch:t.ch},{line:n.line+r,ch:n.ch})}CodeMirror.commands.replaceLineTextToUpper=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var l=t[n],s=l.anchor,u=l.head;if(i(l)&&u.line>0)o(e,s,u,-1);else if(!r(l)){var c=s.line<u.line?s.line:u.line;if(c>0){var d=s.line===c?s:u,f=s.line===c?u:s;a(e,d,f,-1)}}}},CodeMirror.commands.replaceLineTextToLower=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var l=t[n],s=l.anchor,u=l.head,c=u.line===e.lastLine();if(i(l)&&!c)o(e,s,u,1);else if(!r(l)){var d=s.line<u.line?s.line:u.line,f=s.line===d?s:u,h=s.line===d?u:s;h.line<e.lastLine()&&a(e,f,h,1)}}}},function(e,t,n){"use strict";var r=/^(\s*)(>[> ]*|[*+-]\s(?:\[(?:x|\s)\]\s)?|(\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(\s*)/,i=/^(\s*)(>[> ]*|[*+-]\s(?:\[(?:x|\s)\]\s)?|(\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(\s*)$/,o=/^ *(`{3,}|~{3,})[ \.]*\S+ */,a=/[*+-]\s/;CodeMirror.commands.subListIndentTab=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n].head,o=e.getLine(i.line),a=o.substr(0,i.ch);r.test(a)?(e.replaceRange(Array(e.getOption("indentUnit")+1).join(" ")+o,{line:i.line,ch:0},{line:i.line,ch:o.length},"+input"),e.setCursor(i.line,i.ch+4)):e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertSoftTab")}},CodeMirror.commands.newlineAndIndentContinue=function(e){if(e.getOption("disableInput"))return CodeMirror.Pass;for(var t=e.listSelections(),n=[],l=0;l<t.length;l++){var s=t[l].head,u=e.getStateAfter(s.line),c=!1!==u.base.list,d=0!==u.base.quote,f=e.getLine(s.line),h=o.test(f),g=r.exec(f),p=e.getCursor();if(!t[l].empty()||!c&&!d&&!h||!g&&!h)return void e.execCommand("newlineAndIndent");if(h&&(p=e.getCursor(),p.line!==s.line||p.ch!==f.length))return void e.execCommand("newlineAndIndent");if(i.test(f)&&p.ch>0)e.replaceRange("",{line:s.line,ch:0},{line:s.line,ch:f.length}),n[l]="\n";else if(h)n[l]="\n\n```";else{var v,m=g[1],y=g[5];v=m.length===s.ch?"":a.test(g[2])||g[2].indexOf(">")>=0?g[2]:parseInt(g[3],10)+1+g[4],n[l]="\n"+m+v+y}}e.replaceSelections(n),h&&e.setCursor(s.line+1,0)}},function(e,t,n){"use strict";CodeMirror.defineMode("gfm",function(e,t){function n(e){return e.code=!1,null}var r=0,i={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?(t.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;if("`"===e.peek()){e.next();var n=e.pos;e.eatWhile("`");var i=1+e.pos-n;return t.code?i===r&&(t.code=!1):(r=i,t.code=!0),null}return t.code?(e.next(),null):e.eatSpace()?(t.ateSpace=!0,null):((e.sol()||t.ateSpace)&&(t.ateSpace=!1),e.next(),null)},blankLine:n},o={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:"```",strikethrough:!0};for(var a in t)o[a]=t[a];return o.name="markdown",CodeMirror.overlayMode(CodeMirror.getMode(e,o),i)},"markdown"),CodeMirror.defineMIME("text/x-gfm","gfm")},function(e,t,n){"use strict";CodeMirror.defineMode("markdown",function(e,t){function n(t){if(CodeMirror.findModeByName){var n=CodeMirror.findModeByName(t);n&&(t=n.mime||n.mimes[0])}var r=CodeMirror.getMode(e,t);return"null"==r.name?null:r}function r(e,t,n){return t.f=t.inline=n,n(e,t)}function i(e){return!e||!/\S/.test(e.string)}function o(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,b||e.f!=l||(e.f=f,e.block=a),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function a(e,o){var a=e.sol(),l=!1!==o.list,u=o.indentedCode;o.indentedCode=!1,l&&(o.indentationDiff>=0&&(o.indentationDiff<4&&(o.indentation-=o.indentationDiff),o.list=null),o.indentation>0?(o.list=null,o.listDepth=Math.floor(o.indentation/4)+1):(o.list=!1,o.listDepth=0));var d=null;if(o.indentationDiff>=4)return e.skipToEnd(),u||i(o.prevLine)?(o.indentation-=4,o.indentedCode=!0,E):null;if(e.eatSpace())return null;if((d=e.match(U))&&d[1].length<=6)return o.header=d[1].length,t.highlightFormatting&&(o.formatting="header"),o.f=o.inline,c(o);if(!(i(o.prevLine)||o.quote||l||u)&&(d=e.match(V)))return o.header="="==d[0].charAt(0)?1:2,t.highlightFormatting&&(o.formatting="header"),o.f=o.inline,c(o);if(e.eat(">"))return o.quote=a?1:o.quote+1,t.highlightFormatting&&(o.formatting="quote"),e.eatSpace(),c(o);if("["===e.peek())return r(e,o,v);if(e.match(H,!0))return o.hr=!0,I;if((i(o.prevLine)||l)&&(e.match(F,!1)||e.match(j,!1))){var f=null;return e.match(F,!0)?f="ul":(e.match(j,!0),f="ol"),o.indentation=e.column()+e.current().length,o.list=!0,o.listDepth++,t.taskLists&&e.match(W,!1)&&(o.taskList=!0,o.task=!0),o.f=o.inline,t.highlightFormatting&&(o.formatting=["list","list-"+f]),c(o)}return t.fencedCodeBlocks&&(d=e.match(K,!0))?(o.fencedChars=d[1],o.localMode=n(d[2]),o.localMode&&(o.localState=o.localMode.startState()),o.f=o.block=s,t.highlightFormatting&&(o.formatting="code-block"),o.code=!0,c(o)):r(e,o,o.inline)}function l(e,t){var n=k.token(e,t.htmlState);return(b&&null===t.htmlState.tagStart&&!t.htmlState.context&&t.htmlState.tokenize.isInText||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=f,t.block=a,t.htmlState=null),n}function s(e,t){return e.sol()&&t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=u,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),E)}function u(e,n){e.match(n.fencedChars),n.block=a,n.f=f,n.fencedChars=null,t.highlightFormatting&&(n.formatting="code-block"),n.code=!0;var r=c(n);return n.code=!1,r}function c(e){var n=[];if(e.formatting){n.push($),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)n.push($+"-"+e.formatting[r]),"header"===e.formatting[r]&&n.push($+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push($+"-"+e.formatting[r]+"-"+e.quote):n.push("error"))}if(e.taskOpen)return n.push("meta"),n.length?n.join(" "):null;if(e.taskClosed)return n.push("property"),n.length?n.join(" "):null;if(e.linkHref?n.push(L,"url"):(e.strong&&n.push(R),e.em&&n.push(P),e.strikethrough&&n.push(D),e.linkText&&n.push(B),e.code&&n.push(E)),e.header&&(n.push(C),n.push(C+"-"+e.header)),e.quote&&(n.push(T),!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(T+"-"+e.quote):n.push(T+"-"+t.maxBlockquoteDepth)),!1!==e.list){var i=(e.listDepth-1)%3;i?1===i?n.push(S):n.push(x):n.push(M)}return e.trailingSpaceNewLine?n.push("trailing-space-new-line"):e.trailingSpace&&n.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),n.length?n.join(" "):null}function d(e,t){if(e.match(q,!0))return c(t)}function f(e,n){var r=n.text(e,n);if(void 0!==r)return r;if(n.list)return n.list=null,c(n);if(n.taskList){return"x"!==e.match(W,!0)[1]?n.taskOpen=!0:n.taskClosed=!0,t.highlightFormatting&&(n.formatting="task"),n.taskList=!1,c(n)}if(n.taskOpen=!1,n.taskClosed=!1,n.header&&e.match(/^#+$/,!0))return t.highlightFormatting&&(n.formatting="header"),c(n);var i=e.sol(),o=e.next();if("\\"===o&&(e.next(),t.highlightFormatting)){var a=c(n);return a?a+" formatting-escape":"formatting-escape"}if(n.linkTitle){n.linkTitle=!1;var l=o;"("===o&&(l=")"),l=(l+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var s="^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(e.match(new RegExp(s),!0))return L}if("`"===o){var u=n.formatting;t.highlightFormatting&&(n.formatting="code");var d=c(n),f=e.pos;e.eatWhile("`");var p=1+e.pos-f;return n.code?p===w?(n.code=!1,d):(n.formatting=u,c(n)):(w=p,n.code=!0,c(n))}if(n.code)return c(n);if("!"===o&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),O;if("["===o&&e.match(/.*\](\(.*\)| ?\[.*\])/,!1))return n.linkText=!0,t.highlightFormatting&&(n.formatting="link"),c(n);if("]"===o&&n.linkText&&e.match(/\(.*\)| ?\[.*\]/,!1)){t.highlightFormatting&&(n.formatting="link");var a=c(n);return n.linkText=!1,n.inline=n.f=g,a}if("<"===o&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=h,t.highlightFormatting&&(n.formatting="link");var a=c(n);return a?a+=" ":a="",a+N}if("<"===o&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){n.f=n.inline=h,t.highlightFormatting&&(n.formatting="link");var a=c(n);return a?a+=" ":a="",a+A}var v=!1;if(!t.underscoresBreakWords&&"_"===o&&"_"!==e.peek()&&e.match(/(\w)/,!1)){var m=e.pos-2;if(m>=0){var y=e.string.charAt(m);"_"!==y&&y.match(/(\w)/,!1)&&(v=!0)}}if("*"===o||"_"===o&&!v)if(i&&" "===e.peek());else{if(n.strong===o&&e.eat(o)){t.highlightFormatting&&(n.formatting="strong");var d=c(n);return n.strong=!1,d}if(!n.strong&&e.eat(o))return n.strong=o,t.highlightFormatting&&(n.formatting="strong"),c(n);if(n.em===o){t.highlightFormatting&&(n.formatting="em");var d=c(n);return n.em=!1,d}if(!n.em)return n.em=o,t.highlightFormatting&&(n.formatting="em"),c(n)}else if(" "===o&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return c(n);e.backUp(1)}if(t.strikethrough)if("~"===o&&e.eatWhile(o)){if(n.strikethrough){t.highlightFormatting&&(n.formatting="strikethrough");var d=c(n);return n.strikethrough=!1,d}if(e.match(/^[^\s]/,!1))return n.strikethrough=!0,t.highlightFormatting&&(n.formatting="strikethrough"),c(n)}else if(" "===o&&e.match(/^~~/,!0)){if(" "===e.peek())return c(n);e.backUp(2)}return" "===o&&(e.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),c(n)}function h(e,n){if(">"===e.next()){n.f=n.inline=f,t.highlightFormatting&&(n.formatting="link");var r=c(n);return r?r+=" ":r="",r+N}return e.match(/^[^>]+/,!0),N}function g(e,n){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(n.f=n.inline=p("("===r?")":"]"),t.highlightFormatting&&(n.formatting="link-string"),n.linkHref=!0,c(n)):"error"}function p(e){return function(n,r){if(n.next()===e){r.f=r.inline=f,t.highlightFormatting&&(r.formatting="link-string");var i=c(r);return r.linkHref=!1,i}return n.match(_(e),!0)&&n.backUp(1),r.linkHref=!0,c(r)}}function v(e,n){return e.match(/^[^\]]*\]:/,!1)?(n.f=m,e.next(),t.highlightFormatting&&(n.formatting="link"),n.linkText=!0,c(n)):r(e,n,f)}function m(e,n){if(e.match(/^\]:/,!0)){n.f=n.inline=y,t.highlightFormatting&&(n.formatting="link");var r=c(n);return n.linkText=!1,r}return e.match(/^[^\]]+/,!0),B}function y(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=f,L+" url")}function _(e){return Y[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),Y[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),Y[e]}var b=CodeMirror.modes.hasOwnProperty("xml"),k=CodeMirror.getMode(e,b?{name:"xml",htmlMode:!0}:"text/plain");void 0===t.highlightFormatting&&(t.highlightFormatting=!1),void 0===t.maxBlockquoteDepth&&(t.maxBlockquoteDepth=0),void 0===t.underscoresBreakWords&&(t.underscoresBreakWords=!0),void 0===t.taskLists&&(t.taskLists=!1),void 0===t.strikethrough&&(t.strikethrough=!1);var w=0,C="header",E="comment",T="quote",M="variable-2",S="variable-3",x="keyword",I="hr",O="tag",$="formatting",N="link",A="link",B="link",L="string",P="em",R="strong",D="strikethrough",H=/^([*\-_])(?:\s*\1){2,}\s*$/,F=/^[*\-+]\s+/,j=/^[0-9]+([.)])\s+/,W=/^\[(x| )\](?=\s)/,U=t.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,V=/^ *(?:\={1,}|-{1,})\s*$/,q=/^[^#!\[\]*_\\<>` "'(~]+/,K=new RegExp("^("+(!0===t.fencedCodeBlocks?"~~~+|```+":t.fencedCodeBlocks)+")[ \\t]*([\\w+#]*)"),Y=[],z={startState:function(){return{f:a,prevLine:null,thisLine:null,block:a,htmlState:null,indentation:0,inline:f,text:d,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,hr:!1,task:!1,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.this,block:e.block,htmlState:e.htmlState&&CodeMirror.copyState(k,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkTitle:e.linkTitle,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,header:e.header,hr:e.hr,taskList:e.taskList,task:e.task,list:e.list,listDepth:e.listDepth,quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedChars:e.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var n=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||n){if(o(t),!n)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.task=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((r-t.indentation)/4);i>4&&(i=4);var a=t.indentation+i;if(t.indentationDiff=a-t.indentation,t.indentation=a,r>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==l?{state:e.htmlState,mode:k}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:z}},blankLine:o,getType:c,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return z},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown")},function(e,t,n){"use strict";CodeMirror.overlayMode=function(e,t,n){return{startState:function(){return{base:CodeMirror.startState(e),overlay:CodeMirror.startState(t),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:CodeMirror.copyState(e,n.base),overlay:CodeMirror.copyState(t,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(r,i){return(r!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<r.start)&&(i.streamSeen=r,i.basePos=i.overlayPos=r.start),r.start==i.basePos&&(i.baseCur=e.token(r,i.base),i.basePos=r.pos),r.start==i.overlayPos&&(r.pos=r.start,i.overlayCur=t.token(r,i.overlay),i.overlayPos=r.pos),r.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||n&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:e.indent&&function(t,n){return e.indent(t.base,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(n){e.blankLine&&e.blankLine(n.base),t.blankLine&&t.blankLine(n.overlay)}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(91),l=r(a),s=n(18),u=r(s),c=n(141),d=r(c),f=n(75),h=r(f),g=n(16),p=r(g),v=n(0),m=r(v),y=n(6),_=r(y),b=n(54),k=r(b),w=n(14),C=r(w),E=n(15),T=r(E),M=n(22),S=r(M),x=n(5),I=r(x),O=n(97),N=r(O),A=n(79),B=r(A),L=n(84),P=r(L),R=n(87),D=r(R),H=n(78),F=r(H),j=n(82),W=r(j),U=n(86),V=r(U),q=n(83),K=r(q),Y=n(77),z=r(Y),G=n(76),X=r(G),J=n(90),Q=r(J),Z=n(85),ee=r(Z),te=n(88),ne=r(te),re=n(89),ie=r(re),oe=n(80),ae=r(oe),le=n(81),se=r(le),ue=n(121),ce=r(ue),de=n(128),fe=r(de),he=n(131),ge=r(he),pe=n(120),ve=r(pe),me=n(118),ye=r(me),_e=n(119),be=r(_e),ke=n(126),we=r(ke),Ce=n(125),Ee=r(Ce),Te=n(130),Me=r(Te),Se=n(140),xe=r(Se),Ie=n(129),Oe=r(Ie),$e=n(132),Ne=r($e),Ae=n(134),Be=r(Ae),Le=n(133),Pe=r(Le),Re=n(138),De=r(Re),He=n(137),Fe=r(He),je=n(135),We=r(je),Ue=n(136),Ve=r(Ue),qe=n(127),Ke=r(qe),Ye=n(124),ze=r(Ye),Ge=n(139),Xe=r(Ge),Je=n(122),Qe=r(Je),Ze=n(123),et=r(Ze),tt=tui,nt=tt.util,rt=[],it=function(){function e(t){i(this,e);var n=this;this.options=$.extend({previewStyle:"tab",initialEditType:"markdown",height:300,language:"en_US",useDefaultHTMLSanitizer:!0,useCommandShortcut:!0,codeBlockLanguages:C.default.getHighlightJSLanguages()},t),this.eventManager=new p.default,this.importManager=new k.default(this.eventManager),this.commandManager=new m.default(this,{useCommandShortcut:this.options.useCommandShortcut}),this.convertor=new T.default(this.eventManager),this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&nt.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&nt.forEach(this.options.events,function(e,t){n.on(t,e)}),this.layout=new h.default(t,this.eventManager),this.i18n=I.default,this.i18n.setCode(this.options.language),this.setUI(this.options.UI||new N.default(this)),this.mdEditor=l.default.factory(this.layout.getMdEditorContainerEl(),this.eventManager),this.preview=new u.default(this.layout.getPreviewEl(),this.eventManager,this.convertor),this.wwEditor=d.default.factory(this.layout.getWwEditorContainerEl(),this.eventManager,{useCommandShortcut:this.options.useCommandShortcut}),this.toMarkOptions=null,this.changePreviewStyle(this.options.previewStyle),this.changeMode(n.options.initialEditType,!0),this.contentHeight(n.options.height),this.setValue(n.options.initialValue),_.default.applyExtension(n,n.options.exts),this.eventManager.emit("load",n),rt.push(this)}return o(e,[{key:"changePreviewStyle",value:function(e){this.layout.changePreviewStyle(e),this.mdPreviewStyle=e,this.eventManager.emit("changePreviewStyle",e),this.eventManager.emit("previewNeedsRefresh")}},{key:"exec",value:function(){var e;(e=this.commandManager).exec.apply(e,arguments)}},{key:"addCommand",value:function(e,t){t?this.commandManager.addCommand(m.default.command(e,t)):this.commandManager.addCommand(e)}},{key:"afterAddedCommand",value:function(){this.eventManager.emit("afterAddedCommand",this)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"removeHook",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"getCodeMirror",value:function(){return this.mdEditor.getEditor()}},{key:"getSquire",value:function(){return this.wwEditor.getEditor()}},{key:"focus",value:function(){this.getCurrentModeEditor().focus()}},{key:"blur",value:function(){this.getCurrentModeEditor().blur()}},{key:"moveCursorToEnd",value:function(){this.getCurrentModeEditor().moveCursorToEnd()}},{key:"moveCursorToStart",value:function(){this.getCurrentModeEditor().moveCursorToStart()}},{key:"setMarkdown",value:function(e){e=e||"",this.isMarkdownMode()?this.mdEditor.setValue(e):this.wwEditor.setValue(this.convertor.toHTML(e)),this.eventManager.emit("setMarkdownAfter",e)}},{key:"setHtml",value:function(e){if(e=e||"",this.wwEditor.setValue(e),this.isMarkdownMode()){var t=this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions);this.mdEditor.setValue(t),this.eventManager.emit("setMarkdownAfter",t)}}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"getMarkdown",value:function(){return this.isMarkdownMode()?this.mdEditor.getValue():this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)}},{key:"getHtml",value:function(){return this.isWysiwygMode()&&this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)),this.convertor.toHTML(this.mdEditor.getValue())}},{key:"getValue",value:function(){return this.getMarkdown()}},{key:"insertText",value:function(e){this.isMarkdownMode()?this.mdEditor.replaceSelection(e):this.wwEditor.insertText(e)}},{key:"addWidget",value:function(e,t,n,r){this.getCurrentModeEditor().addWidget(e,t,n,r)}},{key:"contentHeight",value:function(e){return e&&(this._contentHeight=e,this.mdEditor.setHeight(e),this.preview.setHeight(e),this.wwEditor.setHeight(e)),this._contentHeight}},{key:"getCurrentModeEditor",value:function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor}},{key:"isMarkdownMode",value:function(){return"markdown"===this.currentMode}},{key:"isWysiwygMode",value:function(){return"wysiwyg"===this.currentMode}},{key:"isViewOnly",value:function(){return!1}},{key:"getCurrentPreviewStyle",value:function(){return this.mdPreviewStyle}},{key:"changeMode",value:function(e,t){this.currentMode!==e&&(this.eventManager.emit("changeModeBefore",this.currentMode),this.currentMode=e,this.isWysiwygMode()?(this.layout.switchToWYSIWYG(),this.wwEditor.setValue(this.convertor.toHTML(this.mdEditor.getValue())),this.eventManager.emit("changeModeToWysiwyg")):(this.layout.switchToMarkdown(),this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)),this.getCodeMirror().refresh(),this.eventManager.emit("changeModeToMarkdown")),this.eventManager.emit("changeMode",e),t||this.focus())}},{key:"remove",value:function(){var e=this,t=rt.length-1;for(this.wwEditor.remove(),this.mdEditor.remove(),this.layout.remove(),this.getUI()&&this.getUI().remove(),this.eventManager.emit("removeEditor"),this.eventManager.events.forEach(function(t,n){e.off(n)}),this.eventManager=null;t>=0;t-=1)rt[t]===this&&rt.splice(t,1)}},{key:"hide",value:function(){this.eventManager.emit("hide",this)}},{key:"show",value:function(){this.eventManager.emit("show",this),this.getCodeMirror().refresh()}},{key:"scrollTop",value:function(e){return this.getCurrentModeEditor().scrollTop(e)}},{key:"setUI",value:function(e){this._ui=e}},{key:"getUI",value:function(){return this._ui}},{key:"reset",value:function(){this.wwEditor.reset(),this.mdEditor.reset()}},{key:"getRange",value:function(){return this.getCurrentModeEditor().getRange()}},{key:"getTextObject",value:function(e){return this.getCurrentModeEditor().getTextObject(e)}},{key:"getSelectedText",value:function(){var e=this.getRange();return this.getTextObject(e).getTextContent()||""}},{key:"getMarkdownHighlightRenderer",value:function(){return this.convertor.getMarkdownHighlightRenderer()}},{key:"setMarkdownHighlightRenderer",value:function(e){this.convertor.setMarkdownHighlightRenderer(e)}}],[{key:"getInstances",value:function(){return rt}},{key:"defineExtension",value:function(e,t){_.default.defineExtension(e,t)}},{key:"factory",value:function(t){var n=void 0;return t.viewOnly?n=new S.default(t):(n=new e(t),n.addCommand(B.default),n.addCommand(P.default),n.addCommand(F.default),n.addCommand(W.default),n.addCommand(V.default),n.addCommand(K.default),n.addCommand(z.default),n.addCommand(X.default),n.addCommand(Q.default),n.addCommand(ee.default),n.addCommand(ne.default),n.addCommand(ie.default),n.addCommand(ae.default),n.addCommand(se.default),n.addCommand(D.default),n.addCommand(ce.default),n.addCommand(fe.default),n.addCommand(ve.default),n.addCommand(xe.default),n.addCommand(Oe.default),n.addCommand(ye.default),n.addCommand(be.default),n.addCommand(we.default),n.addCommand(Ee.default),n.addCommand(Me.default),n.addCommand(Ke.default),n.addCommand(ze.default),n.addCommand(Xe.default),n.addCommand(Ne.default),n.addCommand(Be.default),n.addCommand(Pe.default),n.addCommand(De.default),n.addCommand(Fe.default),n.addCommand(We.default),n.addCommand(Ve.default),n.addCommand(Qe.default),n.addCommand(et.default),n.addCommand(ge.default)),n}}]),e}();it.i18n=I.default,e.exports=it},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(6),o=r(i),a=n(71),l=r(a),s=n(72),u=r(s),c=n(55),d=r(c),f=n(5),h=r(f);o.default.defineExtension("scrollFollow",function(e){function t(){"vertical"===e.mdPreviewStyle&&"markdown"===e.currentMode?c.$el.show():c.$el.hide()}var n={active:h.default.get("Auto scroll enabled"),inActive:h.default.get("Auto scroll disabled")};if(!e.isViewOnly()){var r=e.getCodeMirror(),i=new u.default(r,e.preview),o=new l.default(i,r,e.preview.$el),a=!1,s=!0,c=void 0;"default"===e.getUI().name&&(c=new d.default({className:"tui-scrollfollow",command:"scrollFollowToggle",tooltip:n.active,$el:$('<button class="active tui-scrollfollow" type="button"></button>')}),e.getUI().toolbar.addButton(c),t(),e.on("changeMode",t),e.on("changePreviewStyle",t),e.addCommand("markdown",{name:"scrollFollowToggle",exec:function(){s=!s,c._onOut(),s?(c.$el.addClass("active"),c.tooltip=n.active):(c.$el.removeClass("active"),c.tooltip=n.inActive),c._onOver()}})),r.on("change",function(){a=!1,i.makeSectionList()}),e.on("previewRenderAfter",function(){i.sectionMatch(),o.syncPreviewScrollTopToMarkdown(),a=!0}),e.eventManager.listen("scroll",function(t){s&&(a&&e.preview.isVisible()?"markdown"!==t.source||o.isMarkdownScrollEventBlocked?"preview"!==t.source||o.isPreviewScrollEventBlocked||o.syncMarkdownScrollTopToPreview():o.syncPreviewScrollTopToMarkdown():o.saveScrollInfo())})}})},function(e,t,n){"use strict";tui.Editor.i18n.setLang(["en","en_US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task","Insert link":"Insert link","Insert codeblock":"Insert codeblock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file",Description:"Description",OK:"OK",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row":"Add row","Add col":"Add col","Remove row":"Remove row","Remove col":"Remove col","Align left":"Align left","Align center":"Align center","Align right":"Align right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Cannot paste values ​​other than a table in the cell selection state":"Cannot paste values ​​other than a table in the cell selection state.","Choose language":"Choose language"})},function(e,t,n){"use strict";tui.Editor.i18n.setLang(["ja","ja_JP"],{Markdown:"マークダウン",WYSIWYG:"WYSIWYG",Headings:"見出し",Paragraph:"本文",Bold:"太字",Italic:"イタリック",Strike:"ストライク",Code:"コード",Line:"ライン",Blockquote:"引用","Unordered list":"番号なしリスト","Ordered list":"順序付きリスト",Task:"タスク","Insert link":"リンク挿入","Insert codeblock":"コードブロック挿入","Insert table":"テーブル挿入","Insert image":"画像挿入",Heading:"見出し","Image URL":"イメージURL","Select image file":"画像ファイル選択",Description:"ディスクリプション ",OK:"はい",Cancel:"キャンセル",File:"ファイル",URL:"URL","Link text":"リンクテキスト","Add row":"行追加","Add col":"列追加","Remove row":"行削除","Remove col":"列削除","Align left":"左揃え","Align center":"中央揃え","Align right":"右揃え","Remove table":"テーブル削除","Would you like to paste as table?":"テーブルを貼り付けますか?","Text color":"文字色相","Auto scroll enabled":"自動スクロールが有効","Auto scroll disabled":"自動スクロールを無効に","Cannot paste values ​​other than a table in the cell selection state":"表以外の値をセル選択状態に貼り付けることはできません。","Choose language":"言語選択"})},function(e,t,n){"use strict";tui.Editor.i18n.setLang(["ko","ko_KR"],{Markdown:"마크다운",WYSIWYG:"위지윅",Headings:"제목크기",Paragraph:"본문",Bold:"굵게",Italic:"기울임꼴",Strike:"취소선",Code:"코드",Line:"문단나눔",Blockquote:"인용구","Unordered list":"글머리 기호","Ordered list":"번호 매기기",Task:"체크박스","Insert link":"링크 삽입","Insert codeblock":"코드블럭 삽입","Insert table":"표 삽입","Insert image":"이미지 삽입",Heading:"제목","Image URL":"이미지 주소","Select image file":"이미지 파일을 선택하세요.",Description:"설명",OK:"확인",Cancel:"취소",File:"파일",URL:"주소","Link text":"링크 텍스트","Add row":"행 추가","Add col":"열 추가","Remove row":"행 삭제","Remove col":"열 삭제","Align left":"왼쪽 정렬","Align center":"가운데 정렬","Align right":"오른쪽 정렬","Remove table":"표 삭제","Would you like to paste as table?":"표형태로 붙여 넣겠습니까?","Text color":"글자 색상","Auto scroll enabled":"자동 스크롤 켜짐","Auto scroll disabled":"자동 스크롤 꺼짐","Cannot paste values ​​other than a table in the cell selection state.":"셀 선택 상태에서는 테이블 이외의 값은 붙여넣을 수 없습니다.","Choose language":"언어 선택"})},function(e,t,n){"use strict";tui.Editor.i18n.setLang(["nl","nl_NL"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Headings:"Koppen",Paragraph:"tekst",Bold:"Vet",Italic:"Cursief",Strike:"Doorhalen",Code:"Code",Line:"Regel",Blockquote:"Citaatblok","Unordered list":"Opsomming","Ordered list":"Genummerde opsomming",Task:"Taak","Insert link":"Link invoegen","Insert codeblock":"Codeblok toevoegen","Insert table":"Tabel invoegen","Insert image":"Afbeelding invoegen",Heading:"Kop","Image URL":"Afbeelding URL","Select image file":"Selecteer een afbeelding",Description:"Omschrijving",OK:"OK",Cancel:"Annuleren",File:"Bestand",URL:"URL","Link text":"Link tekst","Add row":"Rij toevoegen","Add col":"Kolom toevoegen","Remove row":"Rij verwijderen","Remove col":"Kolom verwijderen","Align left":"Links uitlijnen","Align center":"Centreren","Align right":"Rechts uitlijnen","Remove table":"Verwijder tabel","Would you like to paste as table?":"Wil je dit als tabel plakken?","Text color":"Tekstkleur","Auto scroll enabled":"Autoscroll ingeschakeld","Auto scroll disabled":"Autoscroll uitgeschakeld","Cannot paste values ​​other than a table in the cell selection state":"Kan geen waardes anders dan de tabel in de cell plakken","Choose language":"Kies een taal"})},function(e,t,n){"use strict";tui.Editor.i18n.setLang(["zh","zh_CN"],{Markdown:"Markdown",WYSIWYG:"所见即所得",Headings:"标题",Paragraph:"文本",Bold:"加粗",Italic:"斜体字",Strike:"删除线",Code:"内嵌代码",Line:"画水平线",Blockquote:"引用块","Unordered list":"无序列表","Ordered list":"有序列表",Task:"任务","Insert link":"插入链接","Insert codeblock":"插入代码块","Insert table":"插入表格","Insert image":"插入图片",Heading:"标题","Image URL":"图片网址","Select image file":"选择映像文件",Description:"说明",OK:"确认",Cancel:"取消",File:"文件",URL:"URL","Link text":"链接文本","Add row":"添加一行","Add col":"添加列","Remove row":"删除行","Remove col":"删除列","Align left":"左对齐","Align center":"居中对齐","Align right":"右对齐","Remove table":"删除表","Would you like to paste as table?":"你想粘贴表吗?","Text color":"文字色相","Auto scroll enabled":"自动滚动启用","Auto scroll disabled":"自动的滚动作非使用","Cannot paste values ​​other than a table in the cell selection state":"在单元格选择状态下无法粘贴表格以外的值。","Choose language":"选择语言"})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(52),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{singleCursorHeightPerLine:!1,theme:"none"}));return n._language="",n._initEvent(),n}return o(t,e),a(t,[{key:"_initEvent",value:function(){this.on("cursorActivity",this._onRequireScrollIntoView.bind(this))}},{key:"_onRequireScrollIntoView",value:function(){var e=this.getCursor(),t=this.getWrapperElement();setTimeout(function(){var n=t.querySelector("pre:nth-child("+(e.line+1)+")");$(n).trigger("requireScrollIntoView")},0)}},{key:"load",value:function(e){var t=e.cloneNode(!0),n=[],r=t.querySelectorAll("div");[].slice.call(r).forEach(function(e){n.push(e.innerText.replace(/\n$/,""))}),this.setLanguage(t.getAttribute("data-language")||""),this.setEditorCodeText(n.join("\n"))}},{key:"save",value:function(e){e.innerHTML="",this.getEditorCodeText().split("\n").forEach(function(t){var n=document.createElement("div");e.appendChild(n);var r=void 0;r=t.length>0?document.createTextNode(t):document.createElement("br"),n.appendChild(r)}),e.setAttribute("data-language",this._language)}},{key:"clear",value:function(){this.setLanguage(""),this.setEditorCodeText("")}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._language=e}},{key:"getEditorCodeText",value:function(){return this.getValue()}},{key:"setEditorCodeText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setValue(e)}},{key:"refresh",value:function(){this.cm.refresh()}}]),t}(s.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(19),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n,o,a){r(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,!0));return l._codeBlockEditor=a,l._initEvent(),l}return o(t,e),a(t,[{key:"_initEvent",value:function(){var e=this;this._codeBlockEditor.on("update",function(){return e.lazyRunner.run("refresh")})}},{key:"refresh",value:function(){var e=this._codeBlockEditor.getLanguage(),n=this._codeBlockEditor.getEditorCodeText();l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this,"```"+e+"\n"+n+"\n```"),this.$el.trigger("requireScrollSync")}},{key:"clear",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,"")}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){r(this,e),this.sectionManager=t,this.cm=n,this.$previewContainerEl=i,this.$contents=this.$previewContainerEl.find(".tui-editor-contents"),this.releaseTimer=null,this._currentTimeoutId=null,this._savedScrollInfo=null}return i(e,[{key:"_getEditorSectionHeight",value:function(e){var t=this.cm.heightAtLine(e.end,"local");return t-=this.cm.heightAtLine(e.start>0?e.start-1:0,"local")}},{key:"_getEditorLineHeightGapInSection",value:function(e,t){var n=this.cm.heightAtLine(t,"local");return n-=this.cm.heightAtLine(e.start>0?e.start-1:0,"local"),Math.max(n,0)}},{key:"_getEditorSectionScrollRatio",value:function(e,t){var n=e.end===e.start;return n?0:this._getEditorLineHeightGapInSection(e,t)/this._getEditorSectionHeight(e)}},{key:"_getScrollFactorsOfEditor",value:function(){var e=this.cm,t=e.getScrollInfo(),n=void 0,r=void 0,i=void 0,o=void 0;t=this._fallbackScrollInfoIfIncorrect(t);var a=t.height-t.top<=t.clientHeight;return a?o={isEditorBottom:a}:(n=e.coordsChar({left:t.left,top:t.top},"local").line,r=this.sectionManager.sectionByLine(n),i=this._getEditorSectionScrollRatio(r,n),o={section:r,sectionRatio:i}),o}},{key:"_getScrollInfoForMarkdown",value:function(){var e=this,t=this.sectionManager.getSectionList(),n=void 0;return tui.util.forEachArray(t,function(t){var r=t.$previewSectionEl,i=r.parent().parent(),o=i[0].clientHeight-i.scrollTop()<=i[0].height,a=!0;return o?(n={isPreviewBottom:o},a=!1):e._isTopSection(i,r)&&(n={section:t,sectionRatio:e._getMarkdownEditorScrollRatio(i,r)},a=!1),a}),n}},{key:"_getMarkdownEditorScrollRatio",value:function(e,t){return(e.scrollTop()-t[0].offsetTop)/t.height()}},{key:"_getScrollTopForPreview",value:function(){var e=void 0,t=this._getScrollFactorsOfEditor(),n=t.section,r=t.sectionRatio;return t.isEditorBottom?e=this.$contents.height():n.$previewSectionEl&&(e=n.$previewSectionEl[0].offsetTop,e+=n.$previewSectionEl.height()*r-20),e=e&&Math.max(e,0)}},{key:"_getScrollTopForMarkdown",value:function(){var e=void 0,t=this._getScrollInfoForMarkdown(),n=t.sectionRatio;if(t.isPreviewBottom)e=this.cm.getScrollInfo().height;else if(t.section){var r=t.section,i=this.cm.charCoords({line:r.start,char:0},"local"),o=this.cm.charCoords({line:r.end,char:0},"local");e=i.top,e+=(o.top-i.top)*n}return e=e&&Math.max(e,0)}},{key:"syncPreviewScrollTopToMarkdown",value:function(){var e=this,t=this.$previewContainerEl,n=t.scrollTop(),r=this._getScrollTopForPreview();this.isPreviewScrollEventBlocked=!0,this._animateRun(n,r,function(n){clearTimeout(e.releaseTimer),t.scrollTop(n),e.releaseTimer=setTimeout(function(){e.isPreviewScrollEventBlocked=!1},15)})}},{key:"syncMarkdownScrollTopToPreview",value:function(){var e=this,t=this.cm,n=t.getScrollInfo(),r=n.top,i=this._getScrollTopForMarkdown();this.isMarkdownScrollEventBlocked=!0,this._animateRun(r,i,function(n){clearTimeout(e.releaseTimer),t.scrollTo(0,n),e.releaseTimer=setTimeout(function(){e.isMarkdownScrollEventBlocked=!1},15)})}},{key:"_animateRun",value:function(e,t,n){function r(){var l=Date.now(),s=(l-o)/200,u=void 0;s<1?(u=e+i*Math.cos((1-s)*Math.PI/2),n(Math.ceil(u)),a._currentTimeoutId=setTimeout(r,1)):(n(t),a._currentTimeoutId=null)}var i=t-e,o=Date.now(),a=this;this._currentTimeoutId&&clearTimeout(this._currentTimeoutId),r()}},{key:"_fallbackScrollInfoIfIncorrect",value:function(e){return e.height<0&&this._savedScrollInfo?this._savedScrollInfo:e}},{key:"saveScrollInfo",value:function(){this._savedScrollInfo=this.cm.getScrollInfo()}},{key:"_isTopSection",value:function(e,t){var n=e.scrollTop(),r=t[0].offsetTop,i=t.height(),o=n>=r-57,a=n>r+i;return o&&!a}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return this.nodeType===Node.ELEMENT_NODE}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/,l=/^ *(\*|-|\d+\.|[*-] \[[ xX]])\s/,s=/^ {0,3}(> ?)+\s/,u=/^ {0,3}!\[([^[\]]*)]\(([^)]*)\)/,c=/^ *(?:={1,}|-{1,})\s*$/,d=/^ *(`{3,}|~{3,})[ ]*$/,f=/^ *(`{3,}|~{3,})[ .]*(\S+)? */,h=/\s/g,g=function(){function e(t,n){r(this,e),this.cm=t,this.preview=n,this.$previewContent=n.$el.find(".tui-editor-contents"),this._sectionList=null,this._currentSection=null}return o(e,[{key:"_addNewSection",value:function(e,t){var n=this._makeSectionData(e,t);this._sectionList.push(n),this._currentSection=n}},{key:"getSectionList",value:function(){return this._sectionList}},{key:"_makeSectionData",value:function(e,t){return{start:e,end:t,$previewSectionEl:null}}},{key:"_updateCurrentSectionEnd",value:function(e){this._currentSection.end=e}},{key:"_eachLineState",value:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,a=!0,l=!1,s=!1,u="",c=!1,d=!1,f=void 0,h=this.cm.getDoc().lineCount();for(n=0;n<h;n+=1){t=!1,r=this.cm.getLine(n),i=this.cm.getLine(n+1)||"",o=this.cm.getLine(n-1)||"";var g=this._isCodeBlockEnd(o)&&f!==n-1;if(!l||r&&this._isTableCode(r)?!l&&this._isTable(r,i)&&(l=!0):l=!1,s&&g&&(s=!1),!s&&this._isCodeBlockStart(r)&&(s=this._doFollowedLinesHaveCodeBlockEnd(n,h),f=n),d&&0!==r.length?(this._isIndependentImage(s,l,r,o)?(c=!0,d=!0):(c=!1,d=!1),t=!0):this._isAtxHeader(r)?(c=!1,t=!0,d=!1):this._isCodeBlockEnd(r)||l||!this._isSeTextHeader(r,i)?this._isIndependentImage(s,l,r,o)?(c=!0,t=!0,d=!1):c&&0===r.length&&(c=!1,d=!0):(c=!1,t=!0,d=!1),a){if(!(u+=r.trim()))continue;a=!1}e(t,n)}}},{key:"_isIndependentImage",value:function(e,t,n,r){return!e&&!t&&this._isImage(n)&&!this._isList(n)&&!this._isQuote(n)&&0===r.length}},{key:"_doFollowedLinesHaveCodeBlockEnd",value:function(e,t){for(var n=!1,r=e+1;r<t;r+=1)if(this._isCodeBlockEnd(this.cm.getLine(r))){n=!0;break}return n}},{key:"_isCodeBlockStart",value:function(e){return f.test(e)}},{key:"_isCodeBlockEnd",value:function(e){return d.test(e)}},{key:"_isTable",value:function(e,t){return this._isTableCode(e)&&this._isTableAligner(t)}},{key:"_isTableCode",value:function(e){return/(^\S?.*\|.*)/.test(e)}},{key:"_isTableAligner",value:function(e){return/(\s*[-:]+\s*\|)+/.test(e)}},{key:"_isAtxHeader",value:function(e){return a.test(e)}},{key:"_isSeTextHeader",value:function(e,t){return""!==e.replace(h,"")&&t&&c.test(t)}},{key:"_isImage",value:function(e){return u.test(e)}},{key:"_isList",value:function(e){return l.test(e)}},{key:"_isQuote",value:function(e){return s.test(e)}},{key:"makeSectionList",value:function(){var e=this;this._sectionList=[],this._eachLineState(function(t,n){t||!e._sectionList.length?e._addNewSection(n,n):e._updateCurrentSectionEnd(n)})}},{key:"sectionMatch",value:function(){if(this._sectionList){var e=this._getPreviewSections();this._matchPreviewSectionsWithSectionlist(e)}}},{key:"_matchPreviewSectionsWithSectionlist",value:function(e){var t=this;e.forEach(function(e,n){if(t._sectionList[n]){var r=$("<div class='content-id-"+n+"'></div>");t._sectionList[n].$previewSectionEl=$(e).wrapAll(r).parent()}})}},{key:"_getPreviewSections",value:function(){var e=[],t=0,n=!1;return e[0]=[],this.$previewContent.contents().filter(i).each(function(r,i){var o="P"===i.tagName,a=i.tagName.match(/^(H1|H2|H3|H4|H5|H6)$/),l=o&&"IMG"===i.childNodes[0].nodeName;(a||l||n)&&e[t].length&&(e.push([]),t+=1,n=!1),l&&(n=!0),e[t].push(i)}),e}},{key:"sectionByLine",value:function(e){var t=void 0,n=this._sectionList,r=n.length;for(t=0;t<r&&!(e<=n[t].end);t+=1);return t===r&&(t=r-1),n[t]}}]),e}();e.exports=g},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=n(62),o=function(e){return e&&e.__esModule?e:{default:e}}(i);n(61),n(60),n(59),n(58),n(57),n(13),n(63),n(10),n(11),n(12),n(9),window.tui=window.tui||{},window.tui.Editor=o.default,n(64),n(66),n(68),n(65),n(67),$.fn.tuiEditor=function(){var e=void 0,t=void 0,n=this.get(0);if(n){for(var i=arguments.length,a=Array(i),l=0;l<i;l++)a[l]=arguments[l];if(e=a[0]||{},t=$.data(n,"tuiEditor")){if("string"==typeof e){var s;return(s=t)[e].apply(s,r(a.slice(1)))}}else e.el=n,t=o.default.factory(e),$.data(n,"tuiEditor",t)}return this}},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=['<div class="tui-editor">','<div class="te-md-container">','<div class="te-editor" />','<div class="te-md-splitter" />','<div class="te-preview" />',"</div>",'<div class="te-ww-container">','<div class="te-editor" />',"</div>","</div>"].join(""),a=function(){function e(t,n){r(this,e),this.$el=$(t.el),this.height=t.height,this.type=t.initialEditType,this.eventManager=n,this.init(),this._initEvent()}return i(e,[{key:"init",value:function(){this._renderLayout(),this._initMarkdownAndPreviewSection(),this._initWysiwygSection()}},{key:"_initEvent",value:function(){this.eventManager.listen("hide",this.hide.bind(this)),this.eventManager.listen("show",this.show.bind(this))}},{key:"_renderLayout",value:function(){this.$containerEl=$(o).appendTo(this.$el)}},{key:"switchToWYSIWYG",value:function(){this.$containerEl.removeClass("te-md-mode"),this.$containerEl.addClass("te-ww-mode")}},{key:"switchToMarkdown",value:function(){this.$containerEl.removeClass("te-ww-mode"),this.$containerEl.addClass("te-md-mode")}},{key:"_initMarkdownAndPreviewSection",value:function(){this.$mdEditorContainerEl=this.$containerEl.find(".te-md-container .te-editor"),this.$previewEl=this.$containerEl.find(".te-md-container .te-preview")}},{key:"_initWysiwygSection",value:function(){this.$wwEditorContainerEl=this.$containerEl.find(".te-ww-container .te-editor")}},{key:"_verticalSplitStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-tab"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-vertical")}},{key:"_tabStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-vertical"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-tab")}},{key:"changePreviewStyle",value:function(e){"tab"===e?this._tabStyle():"vertical"===e&&this._verticalSplitStyle()}},{key:"hide",value:function(){this.$el.find(".tui-editor").addClass("te-hide")}},{key:"show",value:function(){this.$el.find(".tui-editor").removeClass("te-hide")}},{key:"remove",value:function(){this.$el.find(".tui-editor").remove()}},{key:"getEditorEl",value:function(){return this.$containerEl}},{key:"getPreviewEl",value:function(){return this.$previewEl}},{key:"getMdEditorContainerEl",value:function(){return this.$mdEditorContainerEl}},{key:"getWwEditorContainerEl",value:function(){return this.$wwEditorContainerEl}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("markdown",{name:"AddImage",exec:function(e,t){var n=e.getEditor(),r=n.getDoc(),i=e.getCurrentRange(),o={line:i.from.line,ch:i.from.ch},a={line:i.to.line,ch:i.to.ch},l="!["+t.altText+"]("+t.imageUrl+")";r.replaceRange(l,o,a,"+addImage"),n.focus()}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("markdown",{name:"AddLink",exec:function(e,t){var n=e.getEditor(),r=n.getDoc(),i=e.getCurrentRange(),o={line:i.from.line,ch:i.from.ch},a={line:i.to.line,ch:i.to.ch},l="["+t.linkText+"]("+t.url+")";r.replaceRange(l,o,a),n.focus()}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("markdown",{name:"Blockquote",keyMap:["CTRL+Q","META+Q"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),r=e.getCurrentRange(),i={line:r.from.line,ch:0},o={line:r.to.line,ch:n.getLineHandle(r.to.line).text.length},a=n.getRange(i,o),l=a.split("\n"),s=l.length,u=0;u<s;u+=1)l[u]=">"+l[u];n.replaceRange(l.join("\n"),i,o),r.to.ch+=1,n.setCursor(r.to),t.focus()}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=/^[*_]{2,}[^*_]*[*_]{2,}$/,a=i.default.command("markdown",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),r=n.getCursor(),i=n.getSelection(),o=!i;if(o&&r.ch>1){i=this.expendSelection(n,r)||i}var a=this.isNeedRemove(i),l=a?this.remove(i):this.append(i);n.replaceSelection(l,"around"),o&&!a&&this.setCursorToCenter(n,r),t.focus()},isNeedRemove:function(e){return o.test(e)},append:function(e){return"**"+e+"**"},remove:function(e){return e.substr(2,e.length-4)},expendSelection:function(e,t){var n=e.getSelection(),r=void 0,i={line:t.line,ch:t.ch-2},o={line:t.line,ch:t.ch+2};return e.setSelection(i,o),"****"===n||"____"===n?r=n:e.setSelection(t),r},setCursorToCenter:function(e,t){e.setCursor(t.line,t.ch+2)}});e.exports=a},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("markdown",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),r=n.getSelection(),i=t.getCursor();n.replaceSelection(this.append(r),"around"),r||n.setCursor(i.line,i.ch+1),t.focus()},append:function(e){return"`"+e+"`"}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("markdown",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),r=e.getCurrentRange(),i=["```",n.getSelection(),"```"],o=1;0!==r.from.ch&&(i.unshift(""),o+=1),r.to.ch!==n.getLine(r.to.line).length&&i.push(""),n.replaceSelection(i.join("\n")),t.setCursor(r.from.line+o,0),t.focus()}});e.exports=o},function(e,t,n){"use strict";function r(e,t){var n=e.match(u),r="";do{r+="#",t-=1}while(t>0);if(n){var o=e.split(n[0]);e=i(o,2)[1]}return r+" "+e}var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=tui,s=l.util,u=/^#+\s/g,c=a.default.command("markdown",{name:"Heading",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),o=e.getCurrentRange(),a={line:o.from.line,ch:0},l={line:o.to.line,ch:i.getLineHandle(o.to.line).text.length},u=i.getLine(l.line).length,c=i.getRange(a,l),d=c.split("\n");s.forEachArray(d,function(e,n){d[n]=r(e,t)}),i.replaceRange(d.join("\n"),a,l),o.to.ch+=i.getLine(l.line).length-u,i.setSelection(a,o.to),n.focus()}});e.exports=c},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("markdown",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),r="",i=e.getCurrentRange(),o={line:i.from.line,ch:i.from.ch},a={line:i.to.line,ch:i.to.ch};i.collapsed&&(r=n.getLine(o.line),o.ch=0,a.ch=n.getLineHandle(i.to.line).text.length),n.getLine(o.line).length?r+="\n\n* * *\n\n":r+="\n* * *\n",n.replaceRange(r,o,a),t.focus()}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=/^[*_]{3,}[^*_]*[*_]{3,}$/,a=/^[*_][^*_]*[*_]$/,l=i.default.command("markdown",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),r=n.getCursor(),i=n.getSelection(),o=!i,a=!1,l=void 0;o&&(r.ch>2&&(l=this.expendWithBoldSelection(n,r))&&(a="with"),"with"!==a&&r.ch>1&&(a=this.expendOnlyBoldSelection(n,r)),!a&&r.ch>0&&(this.expendSelection(n,r),i=l||i));var s=this.isNeedRemove(i),u=s?this.remove(i):this.append(i);n.replaceSelection(u,"around"),o&&this.setCursorToCenter(n,r,s),t.focus()},isNeedRemove:function(e){return a.test(e)||o.test(e)},append:function(e){return"_"+e+"_"},remove:function(e){return e.substr(1,e.length-2)},expendWithBoldSelection:function(e,t){var n=e.getSelection(),r=void 0,i={line:t.line,ch:t.ch-3},o={line:t.line,ch:t.ch+3};return e.setSelection(i,o),"******"===n||"______"===n?r=n:e.setSelection(t),r},expendOnlyBoldSelection:function(e,t){var n=e.getSelection(),r=!1,i={line:t.line,ch:t.ch-2},o={line:t.line,ch:t.ch+2};return e.setSelection(i,o),"****"!==n&&"____"!==n||(e.setSelection(t),r="only"),r},expendSelection:function(e,t){var n=e.getSelection(),r=void 0,i={line:t.line,ch:t.ch-2},o={line:t.line,ch:t.ch+2};return e.setSelection(i,o),"****"===n||"____"===n?r=n:e.setSelection(t),r},setCursorToCenter:function(e,t,n){var r=n?-1:1;e.setCursor(t.line,t.ch+r)}});e.exports=l},function(e,t,n){"use strict";function r(e){return!(!e||!e.match(s)&&!e.match(l))}var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^[ \t]*[\d]+\. .*/,l=/^[ \t]*[-*] .*/,s=/^[ \t]*[-*]( \[[ xX]])? .*/,u=o.default.command("markdown",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),o=e.componentManager.getManager("list"),l=o.expandLineRangeIfNeed(n,i,r),s=l.start,u=l.end,c=1,d=void 0,f=void 0,h=s;h<=u&&(f={line:h,ch:0},d=n.getLine(h),o.isListOrParagraph(d));h+=1)r(d)?o.replaceLineText(n,h,/[*-] /,c+". "):d.match(a)||n.replaceRange(c+". ",f),c+=1,h===u&&o.appendBlankLineIfNeed(t,h,u,s);t.focus()}});e.exports=u},function(e,t,n){"use strict";function r(e){var t=/^(#{1,6}| *((?:\*|-|\d\.)(?: \[[ xX]])?)) /;return e.replace(t,"")}var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=tui,l=a.util,s=o.default.command("markdown",{name:"Paragraph",exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),o={line:i.from.line,ch:0},a={line:i.to.line,ch:n.getLineHandle(i.to.line).text.length},s=n.getLine(a.line).length,u=n.getRange(o,a),c=u.split("\n");l.forEachArray(c,function(e,t){c[t]=r(e)}),n.replaceRange(c.join("\n"),o,a),i.to.ch+=n.getLine(a.line).length-s,n.setSelection(o,a),t.focus()}});e.exports=s},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=/^[~~](.*[\s\n]*.*)*[~~]$/,a=i.default.command("markdown",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),r=n.getCursor(),i=n.getSelection(),o=this.hasStrikeSyntax(i),a=void 0;a=o?this.remove(i):this.append(i),n.replaceSelection(a,"around"),!i&&!o&&this.setCursorToCenter(n,r,o),t.focus()},hasStrikeSyntax:function(e){return o.test(e)},append:function(e){return"~~"+e+"~~"},remove:function(e){return e.substr(2,e.length-4)},setCursorToCenter:function(e,t,n){var r=n?-2:2;e.setCursor(t.line,t.ch+r)}});e.exports=a},function(e,t,n){"use strict";function r(e,t){for(var n="|",r="|",i=0;e;)t?(n+=" "+t[i]+" |",i+=1):n+="  |",r+=" --- |",e-=1;return n+"\n"+r+"\n"}function i(e,t,n){for(var r="",i=e,o=0;o<t;o+=1){r+="|";for(var a=0;a<e;a+=1)n?(r+=" "+n[i]+" |",i+=1):r+="  |";r+="\n"}return r=r.replace(/\n$/g,"")}var o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=a.default.command("markdown",{name:"Table",exec:function(e,t,n,o){var a=e.getEditor(),l=a.getDoc(),s="\n";a.getCursor().ch>0&&(s+="\n"),s+=r(t,o),s+=i(t,n-1,o),l.replaceSelection(s),o||a.setCursor(a.getCursor().line-n,2),e.focus()}});e.exports=l},function(e,t,n){"use strict";function r(e){return!(!e||!e.match(l)&&!e.match(a))}var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^[ \t]*[\d]+\. .*/,l=/^[ \t]*[-*] .*/,s=/^[ \t]*[-*]( \[[ xX]])? .*/,u=/([*-] |[\d]+\. )(\[[ xX]] )/,c=o.default.command("markdown",{name:"Task",keyMap:["CTRL+T","META+T"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),o=e.componentManager.getManager("list"),a=o.createSortedLineRange(i),l=a.start,c=a.end,d=void 0,f=void 0,h=l;h<=c;h+=1){f={line:h,ch:0},d=n.getLine(h);var g=!!d.match(u);if(!o.isListOrParagraph(d))break;r(d)&&g?o.replaceLineText(n,h,u,"$1"):r(d)&&!g?o.replaceLineText(n,h,/([*-] |[\d]+\. )/,"$1[ ] "):d.match(s)||n.replaceRange("* [ ] ",f),h===c&&o.appendBlankLineIfNeed(t,h,c,l)}t.focus()}});e.exports=c},function(e,t,n){"use strict";function r(e){return!(!e||!e.match(s)&&!e.match(a))}var i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=/^[ \t]*[\d]+\. .*/,l=/^[ \t]*[-*] .*/,s=/^[ \t]*[-*]( \[[ xX]])? .*/,u=o.default.command("markdown",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){for(var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),o=e.componentManager.getManager("list"),a=o.expandLineRangeIfNeed(n,i,r),s=a.start,u=a.end,c=void 0,d=void 0,f=s;f<=u&&(d={line:f,ch:0},c=n.getLine(f),o.isListOrParagraph(c));f+=1)r(c)?o.replaceLineText(n,f,/[\d]+\. /,"* "):c.match(l)||n.replaceRange("* ",d),f===u&&o.appendBlankLineIfNeed(t,f,u,s);t.focus()}});e.exports=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(52),c=r(u),d=n(43),f=r(d),h=n(92),g=r(h),p=n(53),v=r(p),m=n(93),y=r(m),_=f.default.getSharedInstance(),b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.get(0),{mode:"gfm",dragDrop:!0,allowDropFileTypes:["image"],extraKeys:{Enter:"newlineAndIndentContinue",Tab:"subListIndentTab"}}));return r.eventManager=n,r.componentManager=new v.default(r),r.componentManager.addManager(g.default),r._latestState=null,r._initEvent(),r}return a(t,e),l(t,[{key:"_initEvent",value:function(){var e=this;this.cm.getWrapperElement().addEventListener("click",function(){e.eventManager.emit("click",{source:"markdown"})}),this.cm.on("beforeChange",function(t,n){"paste"===n.origin&&e.eventManager.emit("pasteBefore",{source:"markdown",data:n})}),this.cm.on("change",function(t,n){e._emitMarkdownEditorContentChangedEvent(),e._emitMarkdownEditorChangeEvent(n)}),this.cm.on("focus",function(){e.eventManager.emit("focus",{source:"markdown"}),e.getEditor().refresh()}),this.cm.on("blur",function(){e.eventManager.emit("blur",{source:"markdown"})}),this.cm.on("scroll",function(t,n){e.eventManager.emit("scroll",{source:"markdown",data:n})}),this.cm.on("keydown",function(t,n){e.eventManager.emit("keydown",{source:"markdown",data:n}),e.eventManager.emit("keyMap",{source:"markdown",keyMap:_.convert(n),data:n})}),this.cm.on("keyup",function(t,n){e.eventManager.emit("keyup",{source:"markdown",data:n})}),this.cm.on("copy",function(t,n){e.eventManager.emit("copy",{source:"markdown",data:n})}),this.cm.on("cut",function(t,n){e.eventManager.emit("cut",{source:"markdown",data:n})}),this.cm.on("paste",function(t,n){e.eventManager.emit("paste",{source:"markdown",data:n})}),this.cm.on("drop",function(t,n){n.preventDefault(),e.eventManager.emit("drop",{source:"markdown",data:n})}),this.cm.on("cursorActivity",function(){var t=e.cm.getTokenAt(e.cm.getCursor()),n=t.state,r=n.base,i=n.overlay,o={bold:!!r.strong,italic:!!r.em,strike:!!r.strikethrough,code:!!i.code,codeBlock:!!i.codeBlock,quote:!!r.quote,list:!!r.list,task:!!r.task,source:"markdown"};e._latestState&&!e._isStateChanged(e._latestState,o)||(e.eventManager.emit("stateChange",o),e._latestState=o)})}},{key:"setValue",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e),this._emitMarkdownEditorContentChangedEvent()}},{key:"getTextObject",value:function(e){return new y.default(this,e)}},{key:"_emitMarkdownEditorContentChangedEvent",value:function(){this.eventManager.emit("contentChangedFromMarkdown",this)}},{key:"_emitMarkdownEditorChangeEvent",value:function(e){if("setValue"!==e.origin){var t={source:"markdown"};this.eventManager.emit("changeFromMarkdown",t),this.eventManager.emit("change",t)}}},{key:"_isStateChanged",value:function(e,t){var n=!1;return tui.util.forEach(t,function(t,r){return!(n=e[r]!==t)}),n}}],[{key:"factory",value:function(e,n){return new t(e,n)}}]),t}(c.default);e.exports=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=/^[ \t]*[\d]+\. .*/,a=/^[ \t]*[-*] .*/,l=/^[ \t]*[-*]( \[[ xX]])? .*/,s=/^\|([-\s\w\d\t<>?!@#$%^&*()_=+\\/'";: \r[\]]*\|+)+/i,u=/^#+\s/,c=/^ {0,3}(```|\||>)/,d=function(){function e(t){r(this,e),this.mde=t,this.eventManager=t.eventManager,this.name="list"}return i(e,[{key:"isListOrParagraph",value:function(e){return!c.test(e)&&!s.test(e)&&!u.test(e)}},{key:"appendBlankLineIfNeed",value:function(e,t,n,r){var i=e.getDoc(),o=0,a=r!==n,l=i.getLine(this._getEndLineNumberOfList(i,n)+1),s=i.getLine(this._getStartLineNumberOfList(i,r)-1),u=i.getLine(t+1);(a&&this._isNeedAppendBlankLine(l)||!a&&this._isNeedAppendBlankLine(u))&&i.replaceRange("\n",{line:t,ch:i.getLine(t).length});var c=i.getLine(t-1);if((a&&this._isNeedAppendBlankLine(s)||!a&&this._isNeedAppendBlankLine(c))&&(i.replaceRange("\n",{line:r,ch:0}),o+=1),!a){var d=t+o;e.setCursor(d,i.getLine(d).length)}}},{key:"_isNeedAppendBlankLine",value:function(e){return e&&0!==e.length&&!this._isAList(e)}},{key:"createSortedLineRange",value:function(e){var t=e.from.line>e.to.line;return{start:{line:t?e.to.line:e.from.line,ch:0}.line,end:{line:t?e.from.line:e.to.line,ch:0}.line}}},{key:"expandLineRangeIfNeed",value:function(e,t,n){var r=this.createSortedLineRange(t),i=r.start,o=r.end,a=this._isDifferentListType(n,e.getLine(i)),l=this._isDifferentListType(n,e.getLine(o));return a&&(i=this._getStartLineNumberOfList(e,i)),l&&(o=this._getEndLineNumberOfList(e,o)),{start:i,end:o}}},{key:"replaceLineText",value:function(e,t,n,r){var i=e.getLine(t),o={line:t,ch:0},a={line:t,ch:i.length};i=i.replace(n,r),e.replaceRange(i,o,a)}},{key:"_isDifferentListType",value:function(e,t){return t&&0!==t.length&&e.call(this,t)}},{key:"_isAList",value:function(e){return e&&0!==e.length&&this._isListLine(e)}},{key:"_isListLine",value:function(e){return!!(e.match(l)||e.match(a)||e.match(o))}},{key:"_getStartLineNumberOfList",value:function(e,t){var n=void 0;for(n=t;n>0;n-=1){var r=e.getLine(n-1);if(!r||!this._isListLine(r))break}return n}},{key:"_getEndLineNumberOfList",value:function(e,t){var n=e.lineCount(),r=void 0;for(r=t;r<n;r+=1){var i=e.getLine(r+1);if(!i||!this._isListLine(i))break}return r}}]),e}();e.exports=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this._mde=t,this.setRange(n||t.getRange())}return i(e,[{key:"_setStart",value:function(e){this._start=e}},{key:"_setEnd",value:function(e){this._end=e}},{key:"setRange",value:function(e){this._setStart(e.start),this._setEnd(e.end)}},{key:"setEndBeforeRange",value:function(e){this._setEnd(e.start)}},{key:"expandStartOffset",value:function(){var e=this._start;0!==e.ch&&(e.ch-=1)}},{key:"expandEndOffset",value:function(){var e=this._end;e.ch<this._mde.getEditor().getDoc().getLine(e.line).length&&(e.ch+=1)}},{key:"getTextContent",value:function(){return this._mde.getEditor().getRange(this._start,this._end)}},{key:"replaceContent",value:function(e){this._mde.getEditor().replaceRange(e,this._start,this._end,"+input")}},{key:"deleteContent",value:function(){this._mde.getEditor().replaceRange("",this._start,this._end,"+delete")}},{key:"peekStartBeforeOffset",value:function(e){var t={line:this._start.line,ch:Math.max(this._start.ch-e,0)};return this._mde.getEditor().getRange(t,this._start)}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(l),u=window,c=u.Squire,d=tui,f=d.util,h=/\b(H[\d]|LI|P|BLOCKQUOTE|TD)\b/,g=/Trident\/[456]\./.test(navigator.userAgent),p=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return l._decorateHandlerToCancelable("copy"),l._decorateHandlerToCancelable(g?"beforecut":"cut"),l._decorateHandlerToCancelable(g?"beforepaste":"paste"),l.get$Body=function(){return l.$body=l.$body||$(l.getRoot()),l.$body},l}return o(t,e),a(t,[{key:"_decorateHandlerToCancelable",value:function(e){var t=this._events[e];if(t.length>1)throw new Error("too many"+e+"handlers in squire");var n=t[0].bind(this);t[0]=function(e){e.defaultPrevented||e.squirePrevented||n(e)}}},{key:"changeBlockFormat",value:function(e,t){var n=this;this.modifyBlocks(function(r){var i=void 0,o=void 0,a=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(r.childNodes.length?i=r.childNodes.item(0):(i=n.createDefaultBlock(),r.appendChild(i)),e){for(;i.firstChild;)i=i.firstChild;for(d=function(e){l.appendChild(e)};i!==r;){if(u=i.tagName,f.isFunction(e)?e(u):u===e){l=i.childNodes.item(0),(!s.default.isElemNode(l)||i.childNodes.length>1)&&(l=n.createDefaultBlock(),f.forEachArray(f.toArray(i.childNodes),d),(c=l.lastChild)&&"BR"===s.default.getNodeName(c)&&l.removeChild(c)),a=t?n.createElement(t,[l]):l,o=n.getDocument().createDocumentFragment(),o.appendChild(a),r=o;break}i=i.parentNode}}return o&&e||!t||"DIV"!==s.default.getNodeName(r.childNodes[0])||(r=n.createElement(t,[r.childNodes[0]])),r})}},{key:"changeBlockFormatTo",value:function(e){this.changeBlockFormat(function(e){return h.test(e)},e)}},{key:"getCaretPosition",value:function(){return this.getCursorPosition()}},{key:"replaceSelection",value:function(e,t){t&&this.setSelection(t),this._ignoreChange=!0,this.insertHTML(e)}},{key:"replaceRelativeOffset",value:function(e,t,n){var r=this.getSelection().cloneRange();this._replaceRelativeOffsetOfSelection(e,t,n,r)}},{key:"_replaceRelativeOffsetOfSelection",value:function(e,t,n,r){var i=void 0,o=void 0,a=void 0,l=r.endContainer,u=r.endOffset;"TEXT"!==s.default.getNodeName(l)&&(l=this._getClosestTextNode(l,u))&&(u=s.default.isTextNode(l)?l.nodeValue.length:l.textContent.length),l?(i=this.getSelectionInfoByOffset(l,u+t),r.setStart(i.element,i.offset),a=u+(t+n),o=this.getSelectionInfoByOffset(l,a),r.setEnd(o.element,o.offset),this.replaceSelection(e,r)):this.replaceSelection(e)}},{key:"_getClosestTextNode",value:function(e,t){var n=s.default.getChildNodeByOffset(e,t-1);return"TEXT"!==s.default.getNodeName(n)&&(n=n.previousSibling),n}},{key:"getSelectionInfoByOffset",value:function(e,t){var n=void 0,r=void 0,i=void 0,o=void 0,a=t>=0?"next":"previous",l=Math.abs(t),u=n;for(n="next"===a?e:e.previousSibling,i=l,o=0;n&&(r=s.default.isTextNode(n)?n.nodeValue.length:n.textContent.length,o+=r,!(l<=o));)i-=r,s.default.getTextLength(n)>0&&(u=n),n=n[a+"Sibling"];return n||(n=u,i=s.default.getTextLength(n)),"previous"===a&&(i=s.default.getTextLength(n)-i),{element:n,offset:i}}},{key:"getSelectionPosition",value:function(e,t,n){var r=this.createElement("INPUT"),i=e.cloneRange(),o=this.getSelectionInfoByOffset(e.endContainer,e.endOffset+(n||0));i.setStart(i.startContainer,i.startOffset),i.setEnd(o.element,o.offset),this._ignoreChange=!0,this.insertElement(r,i);var a=$(r).offset();return"over"!==t&&(a.top+=$(r).outerHeight()),r.parentNode.removeChild(r),e.setStart(e.endContainer,e.endOffset),e.collapse(!0),this.setSelection(e),a}},{key:"removeLastUndoStack",value:function(){this._undoStack.length&&(this._undoStackLength-=1,this._undoIndex-=1,this._undoStack.pop(),this._isInUndoState=!1)}},{key:"replaceParent",value:function(e,t,n){var r=$(e).closest(t);r.length&&(r.wrapInner("<"+n+"/>"),r.children().unwrap())}},{key:"preserveLastLine",value:function(){var e=this.get$Body().children().last();"DIV"!==s.default.getNodeName(e[0])&&(this._ignoreChange=!0,$(this.createDefaultBlock()).insertAfter(e))}},{key:"scrollTop",value:function(e){return f.isUndefined(e)?this.get$Body().scrollTop():this.get$Body().scrollTop(e)}},{key:"isIgnoreChange",value:function(){return this._ignoreChange}},{key:"focus",value:function(){c.prototype.focus.call(this)}},{key:"blockCommandShortcuts",value:function(){var e=this,t=/Mac/.test(navigator.platform),n=t?"meta":"ctrl";["b","i","u","shift-7","shift-5","shift-6","shift-8","shift-9","[","]"].forEach(function(t){e.setKeyHandler(n+"-"+t,function(e,t){t.preventDefault()})})}}]),t}(c);e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.eventManager,i=t.container,o=t.attachedSelector;r(this,e),this._eventManager=n,this._attachedSelector="[contenteditable=true] "+o,this._$container=$(i),this._$attachedElement=null,this.active=!1,this._createElement(),this._initEvent()}return i(e,[{key:"_createElement",value:function(){this.$el=$('<div class="te-ww-block-overlay">'),this.$el.css({position:"absolute",display:"none","z-index":1}),this._$container.append(this.$el)}},{key:"_initEvent",value:function(){var e=this;this._eventManager.listen("change",this._onChange.bind(this)),this._eventManager.listen("mouseover",this._onMouseOver.bind(this)),this._eventManager.listen("focus",function(){e.setVisibility(!1)}),this._eventManager.listen("mousedown",function(){e.setVisibility(!1)})}},{key:"_onChange",value:function(){this._$attachedElement&&$.contains(document,this._$attachedElement[0])?this.syncLayout():this.setVisibility(!1)}},{key:"_onMouseOver",value:function(e){var t=e.data,n=$(t.target),r=n.closest(this._attachedSelector);r.length?(this._$attachedElement=r,this.setVisibility(!0)):n.closest(this.$el).length?this.setVisibility(!0):this.active||this.setVisibility(!1)}},{key:"syncLayout",value:function(){this.$el.offset(this._$attachedElement.offset()),this.$el.width(this._$attachedElement.outerWidth()),this.$el.height(this._$attachedElement.outerHeight())}},{key:"getAttachedElement",value:function(){return this._$attachedElement?this._$attachedElement.get(0):null}},{key:"getVisibility",value:function(){return"block"===this.$el.css("display")}},{key:"setVisibility",value:function(e){e&&this._$attachedElement?this.getVisibility()||(this.$el.css("display","block"),this.syncLayout(),this.onShow()):e||this.getVisibility()&&(this.active=!1,this._$attachedElement=null,this.$el.css("display","none"),this.onHide())}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(95),c=r(u),d=n(43),f=r(d),h=n(5),g=r(h),p=function(e){function t(e){var n=e.eventManager,r=e.container,a=e.wysiwygEditor;i(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{eventManager:n,container:r,attachedSelector:"pre"}));return l._wysiwygEditor=a,l._popupCodeBlockLanguages=null,l._initDOM(),l._initDOMEvent(),l}return a(t,e),l(t,[{key:"_initDOM",value:function(){this.$el.addClass("code-block-header"),this._$inputLanguage=$('<input type="text" class="te-input-language" maxlength="20" placeholder="'+g.default.get("Choose language")+'">'),this._$buttonOpenModalEditor=$('<button type="button">edit</button>'),this.$el.append(this._$inputLanguage),this.$el.append(this._$buttonOpenModalEditor)}},{key:"_initDOMEvent",value:function(){var e=this;this._$inputLanguage.on("focus",function(){e._showPopupCodeBlockLanguages()}),this._$inputLanguage.on("focusout",function(){e._restoreInputLanguage()}),this._$inputLanguage.on("keydown",function(t){if(e._popupCodeBlockLanguages)switch(t.which){case f.default.keyCode("UP"):e._popupCodeBlockLanguages.prev(),t.preventDefault();break;case f.default.keyCode("DOWN"):e._popupCodeBlockLanguages.next(),t.preventDefault();break;case f.default.keyCode("ENTER"):case f.default.keyCode("TAB"):var n=e._popupCodeBlockLanguages.getCurrentLanguage();e._$inputLanguage.val(n),e._storeInputLanguage(),t.preventDefault();break;default:e._popupCodeBlockLanguages.hide()}else t.which!==f.default.keyCode("ENTER")&&t.which!==f.default.keyCode("TAB")||(e._storeInputLanguage(),t.preventDefault())}),this._$buttonOpenModalEditor.on("click",function(){e._eventManager.emit("openPopupCodeBlockEditor",e.getAttachedElement())})}},{key:"_getCodeBlockHeaderHeight",value:function(){if(!this._codeBlockHeaderHeight){var e=window.getComputedStyle(this.getAttachedElement(),":before");this._codeBlockHeaderHeight=parseInt(e.getPropertyValue("height"),10)+parseInt(e.getPropertyValue("padding-top"),10)+parseInt(e.getPropertyValue("padding-bottom"),10)}return this._codeBlockHeaderHeight}},{key:"_showPopupCodeBlockLanguages",value:function(){var e=this;this.active=!0;var t=this.$el.offset();this._popupCodeBlockLanguages=this._eventManager.emitReduce("openPopupCodeBlockLanguages",{language:this._getLanguage(),offset:{left:t.left,top:t.top+this._getCodeBlockHeaderHeight()},callback:{selected:function(t){e._$inputLanguage.val(t),e._storeInputLanguage()},dismissed:function(){e._popupCodeBlockLanguages=null}}})}},{key:"_hidePopupCodeBlockLanguages",value:function(){this._eventManager.emit("closePopupCodeBlockLanguages")}},{key:"_getLanguage",value:function(){var e=this.getAttachedElement();return e?e.getAttribute("data-language"):null}},{key:"_setLanguage",value:function(e){var t=this.getAttachedElement();t&&t.setAttribute("data-language",e)}},{key:"_focusCodeBlock",value:function(){var e=this.getAttachedElement().querySelector("div"),t=this._wysiwygEditor,n=t.getRange();window.setTimeout(function(){t.focus(),n.setStart(e,0),n.collapse(!0),t.setRange(n)},0)}},{key:"_storeInputLanguage",value:function(){this._setLanguage(this._$inputLanguage.val()),this._focusCodeBlock(),this._hidePopupCodeBlockLanguages()}},{key:"_restoreInputLanguage",value:function(){this._$inputLanguage.val(this._getLanguage()),this._hidePopupCodeBlockLanguages()}},{key:"onShow",value:function(){this._restoreInputLanguage()}},{key:"onHide",value:function(){this._restoreInputLanguage()}},{key:"syncLayout",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"syncLayout",this).call(this),this.$el.height(this._getCodeBlockHeaderHeight())}}]),t}(c.default);e.exports=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(107),l=r(a),s=n(56),u=r(s),c=n(7),d=r(c),f=n(98),h=r(f),g=n(101),p=r(g),v=n(100),m=r(v),y=n(105),_=r(y),b=n(102),k=r(b),w=n(99),C=r(w),E=n(104),T=r(E),M=n(103),S=r(M),x=function(){function e(t){i(this,e),this.name="default",this.toolbar=null,this.$el=null,this._editor=t,this._initialEditType=t.options.initialEditType,this._init(t.options.el),this._initEvent()}return o(e,[{key:"_init",value:function(e){this.$el=$('\n    <div class="tui-editor-defaultUI">\n        <div class="te-toolbar-section"></div>\n        <div class="te-markdown-tab-section"></div>\n        <div class="te-editor-section"></div>\n        <div class="te-mode-switch-section"></div>\n    </div>\n').appendTo(e),this.$el.find(".te-editor-section").append(this._editor.layout.getEditorEl()),this._initToolbar(),this._initModeSwitch(),this._initPopupAddLink(),this._initPopupAddImage(),this._initPopupAddTable(),this._initPopupAddHeading(),this._initPopupTableUtils(),this._initPopupCodeBlockLanguages(),this._initPopupCodeBlockEditor(),this._initMarkdownTab()}},{key:"_initEvent",value:function(){this._editor.eventManager.listen("hide",this.hide.bind(this)),this._editor.eventManager.listen("show",this.show.bind(this)),this._editor.eventManager.listen("changeMode",this._markdownTabControl.bind(this)),this._editor.eventManager.listen("changePreviewStyle",this._markdownTabControl.bind(this))}},{key:"_initToolbar",value:function(){this.toolbar=new l.default(this._editor.eventManager),this.$el.find(".te-toolbar-section").append(this.toolbar.$el)}},{key:"_initModeSwitch",value:function(){var e=this;this._modeSwitch=new h.default("markdown"===this._initialEditType?h.default.TYPE.MARKDOWN:h.default.TYPE.WYSIWYG),this.$el.find(".te-mode-switch-section").append(this._modeSwitch.$el),this._modeSwitch.on("modeSwitched",function(t,n){return e._editor.changeMode(n)})}},{key:"_initMarkdownTab",value:function(){var e=this._editor;this.markdownTab=new u.default({initName:"Editor",items:["Editor","Preview"],sections:[e.layout.getMdEditorContainerEl(),e.layout.getPreviewEl()]}),this._$markdownTabSection=this.$el.find(".te-markdown-tab-section"),this._$markdownTabSection.append(this.markdownTab.$el),this.markdownTab.on("itemClick",function(t,n){"Preview"===n?e.eventManager.emit("previewNeedsRefresh"):e.getCodeMirror().focus()})}},{key:"_markdownTabControl",value:function(){this._editor.isMarkdownMode()&&"tab"===this._editor.getCurrentPreviewStyle()?(this._$markdownTabSection.show(),this.markdownTab.activate("Editor")):this._$markdownTabSection.hide()}},{key:"_initPopupAddLink",value:function(){this.popupAddLink=new p.default({$target:this.$el,editor:this._editor})}},{key:"_initPopupAddImage",value:function(){this.popupAddImage=new m.default({$target:this.$el,eventManager:this._editor.eventManager})}},{key:"_initPopupAddTable",value:function(){this.popupAddTable=new k.default({$target:this.$el,eventManager:this._editor.eventManager,$button:this.$el.find("button.tui-table"),css:{position:"absolute"}})}},{key:"_initPopupAddHeading",value:function(){this.popupAddHeading=new C.default({$target:this.$el,eventManager:this._editor.eventManager,$button:this.$el.find("button.tui-heading"),css:{position:"absolute"}})}},{key:"_initPopupTableUtils",value:function(){var e=this;this._editor.eventManager.listen("contextmenu",function(t){$(t.data.target).parents("[contenteditable=true] table").length>0&&(t.data.preventDefault(),e._editor.eventManager.emit("openPopupTableUtils",t.data))}),this.popupTableUtils=new _.default({$target:this.$el,eventManager:this._editor.eventManager})}},{key:"_initPopupCodeBlockLanguages",value:function(){var e=this._editor;this.popupCodeBlockLanguages=new T.default({$target:this.$el,eventManager:e.eventManager,languages:e.convertor.getCodeBlockManager().getSupportedLanguages()})}},{key:"_initPopupCodeBlockEditor",value:function(){this.popupCodeBlockEditor=new S.default({$target:this.$el,eventManager:this._editor.eventManager,convertor:this._editor.convertor})}},{key:"hide",value:function(){this.$el.addClass("te-hide")}},{key:"show",value:function(){this.$el.removeClass("te-hide")}},{key:"remove",value:function(){this.$el.remove()}},{key:"createPopup",value:function(e){return new d.default(e)}}]),e}();e.exports=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=r(s),c=n(5),d=r(c),f=tui,h=f.util,g="markdown",p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"te-mode-switch"}));return n._render(),n._switchType(h.isExisty(e)?e:g),n}return a(t,e),l(t,[{key:"_render",value:function(){this.buttons={},this.buttons.$markdown=$('<button class="te-switch-button markdown" type="button">'+d.default.get("Markdown")+"</button>"),this.buttons.$wysiwyg=$('<button class="te-switch-button wysiwyg" type="button">'+d.default.get("WYSIWYG")+"</button>"),this.$el.append(this.buttons.$markdown),this.$el.append(this.buttons.$wysiwyg),this.on("click .markdown",this._changeMarkdown.bind(this)),this.on("click .wysiwyg",this._changeWysiwyg.bind(this))}},{key:"_changeMarkdown",value:function(){this._switchType(g)}},{key:"_changeWysiwyg",value:function(){this._switchType("wysiwyg")}},{key:"_setActiveButton",value:function(e){this.buttons.$markdown.removeClass("active"),this.buttons.$wysiwyg.removeClass("active"),this.buttons["$"+e].addClass("active")}},{key:"_switchType",value:function(e){this.type!==e&&(this.type=e,this._setActiveButton(e),this.trigger("modeSwitched",this.type))}}]),t}(u.default);p.TYPE={MARKDOWN:g,WYSIWYG:"wysiwyg"},e.exports=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(7),c=r(u),d=n(5),f=r(d),h=tui,g=h.util,p=function(e){function t(e){i(this,t);var n='\n            <ul>\n                <li data-value="1" data-type="Heading"><h1>'+f.default.get("Heading")+' 1</h1></li>\n                <li data-value="2" data-type="Heading"><h2>'+f.default.get("Heading")+' 2</h2></li>\n                <li data-value="3" data-type="Heading"><h3>'+f.default.get("Heading")+' 3</h3></li>\n                <li data-value="4" data-type="Heading"><h4>'+f.default.get("Heading")+' 4</h4></li>\n                <li data-value="5" data-type="Heading"><h5>'+f.default.get("Heading")+' 5</h5></li>\n                <li data-value="6" data-type="Heading"><h6>'+f.default.get("Heading")+' 6</h6></li>\n                <li data-type="Paragraph"><div>'+f.default.get("Paragraph")+"</div></li>\n            </ul>\n        ";return e=g.extend({header:!1,className:"te-heading-add",content:n},e),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._eventManager=e.eventManager,this._$button=e.$button}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click li",function(t){var n=$(t.target).closest("li");e._eventManager.emit("command",n.data("type"),n.data("value"))})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",this.hide.bind(this)),this._eventManager.listen("closeAllPopup",this.hide.bind(this)),this._eventManager.listen("openHeadingSelect",function(){e._eventManager.emit("closeAllPopup");var t=e._$button,n=t.position();e.$el.css({top:n.top+t.height()+5,left:n.left}),e.show()})}}]),t}(c.default);e.exports=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(7),c=r(u),d=n(56),f=r(d),h=n(5),g=r(h),p=tui,v=p.util,m="te-image-url-input",y="te-image-file-input",_="te-alt-text-input",b="te-ok-button",k="te-close-button",w="te-file-type",C="te-url-type",E="te-tab-section",T=function(e){function t(e){i(this,t);var n='\n            <div class="'+E+'"></div>\n            <div class="'+C+'">\n                <label for="">'+g.default.get("Image URL")+'</label>\n                <input type="text" class="'+m+'" />\n            </div>\n            <form enctype="multipart/form-data" class="'+w+'">\n                <label for="">'+g.default.get("Select image file")+'</label>\n                <input type="file" class="'+y+'" accept="image/*" />\n            </form>\n            <label for="url">'+g.default.get("Description")+'</label>\n            <input type="text" class="'+_+'" />\n            <div class="te-button-section">\n                <button type="button" class="'+b+'">'+g.default.get("OK")+'</button>\n                <button type="button" class="'+k+'">'+g.default.get("Cancel")+"</button>\n            </div>\n        ";return e=v.extend({header:!0,title:g.default.get("Insert image"),className:"te-popup-add-image tui-editor-popup",content:n},e),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager}},{key:"_initDOM",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this);var e=this.$el;this._$imageUrlInput=e.find("."+m),this._$imageFileInput=e.find("."+y),this._$altTextInput=e.find("."+_);var n=e.find("."+w),r=e.find("."+C),i=this.$body.find("."+E);this.tab=new f.default({initName:g.default.get("File"),items:[g.default.get("File"),g.default.get("URL")],sections:[n,r]}),i.append(this.tab.$el)}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("shown",function(){return e._$imageUrlInput.focus()}),this.on("hidden",function(){return e._resetInputs()}),this.on("change ."+y,function(){var t=e._$imageFileInput.val().split("\\").pop();e._$altTextInput.val(t)}),this.on("click ."+k,function(){return e.hide()}),this.on("click ."+b,function(){var t=e._$imageUrlInput.val(),n=e._$altTextInput.val();if(t)e._applyImage(t,n);else{var r=e._$imageFileInput.get(0).files.item(0),i=function(t,r){return e._applyImage(t,n||r)};e.eventManager.emit("addImageBlobHook",r,i,"ui")}e.hide()}),this.tab.on("itemClick",function(){return e._resetInputs()})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("openPopupAddImage",function(){e.eventManager.emit("closeAllPopup"),e.show()})}},{key:"_applyImage",value:function(e,t){this.eventManager.emit("command","AddImage",{imageUrl:e,altText:t||"image"}),this.hide()}},{key:"_resetInputs",value:function(){this.$el.find("input").val("")}}]),t}(c.default);e.exports=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(7),c=r(u),d=n(5),f=r(d),h=n(54),g=r(h),p=tui,v=p.util,m=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})(\/([^\s]*))?$/,y=function(e){function t(e){i(this,t);var n='\n            <label for="linkText">'+f.default.get("Link text")+'</label>\n            <input type="text" class="te-link-text-input" />\n            <label for="url">'+f.default.get("URL")+'</label>\n            <input type="text" class="te-url-input" />\n            <div class="te-button-section">\n                <button type="button" class="te-ok-button">'+f.default.get("OK")+'</button>\n                <button type="button" class="te-close-button">'+f.default.get("Cancel")+"</button>\n            </div>\n        ";return e=v.extend({header:!0,title:f.default.get("Insert link"),className:"te-popup-add-link tui-editor-popup",content:n},e),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._editor=e.editor,this._eventManager=e.editor.eventManager}},{key:"_initDOM",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this);var e=this.$el.get(0);this._inputText=e.querySelector(".te-link-text-input"),this._inputURL=e.querySelector(".te-url-input")}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click .te-close-button",function(){return e.hide()}),this.on("click .te-ok-button",function(){e._eventManager.emit("command","AddLink",e._getValue()),e.hide()}),this.on("shown",function(){var t=e._inputText,n=e._inputURL,r=e._editor.getSelectedText().trim();t.value=r,m.exec(r)&&(n.value=r),r.length>0&&n.value.length<1?n.focus():(t.focus(),t.setSelectionRange(0,r.length))}),this.on("hidden",function(){e._resetInputs()})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this);var n=this._eventManager;n.listen("focus",function(){return e.hide()}),n.listen("closeAllPopup",function(){return e.hide()}),n.listen("openPopupAddLink",function(){n.emit("closeAllPopup"),e.show()})}},{key:"_getValue",value:function(){return{linkText:g.default.decodeURIGraceful(this._inputText.value,decodeURIComponent),url:g.default.decodeURIGraceful(this._inputURL.value,decodeURI)}}},{key:"_resetInputs",value:function(){this._inputText.value="",this._inputURL.value=""}}]),t}(c.default);e.exports=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(7),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=tui,d=c.util,f='\n    <div class="te-table-selection">\n        <div class="te-table-header"></div>\n        <div class="te-table-body"></div>\n        <div class="te-selection-area"></div>\n    </div>\n    <p class="te-description"></p>\n',h=function(e){function t(e){return r(this,t),e=d.extend({header:!1,className:"te-popup-add-table",content:f},e),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"_initInstance",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._selectedBound={},this._tableBound={},this._eventManager=e.eventManager,this.$button=e.$button}},{key:"_initDOM",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this),this._cacheElements(),this._setTableSizeByBound(5,7)}},{key:"_initDOMEvent",value:function(e){var n=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this,e),this.on("mousemove .te-table-selection",function(e){var t=e.pageX-n._selectionOffset.left,r=e.pageY-n._selectionOffset.top,i=n._getSelectionBoundByOffset(t,r);n._resizeTableBySelectionIfNeed(i.col,i.row),n._setSelectionAreaByBound(i.col,i.row),n._setDisplayText(i.col,i.row),n._setSelectedBound(i.col,i.row)}),this.on("click .te-table-selection",function(){var e=n._getSelectedTableSize();n._eventManager.emit("command","Table",e.col,e.row)})}},{key:"_initEditorEvent",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",function(){return e.hide()}),this._eventManager.listen("closeAllPopup",function(){return e.hide()}),this._eventManager.listen("openPopupAddTable",function(){e._eventManager.emit("closeAllPopup"),e.$el.css({top:e.$button.position().top+e.$button.height()+5,left:e.$button.position().left}),e.show(),e._selectionOffset=e.$el.find(".te-table-selection").offset()})}},{key:"_cacheElements",value:function(){this.$header=this.$el.find(".te-table-header"),this.$body=this.$el.find(".te-table-body"),this.$selection=this.$el.find(".te-selection-area"),this.$desc=this.$el.find(".te-description")}},{key:"_resizeTableBySelectionIfNeed",value:function(e,t){var n=this._getResizedTableBound(e,t);n&&this._setTableSizeByBound(n.col,n.row)}},{key:"_getResizedTableBound",value:function(e,t){var n=void 0,r=void 0,i=void 0;return e>=5&&e<9?n=e+1:e<5&&(n=5),t>=7&&t<14?r=t+1:t<7&&(r=7),this._isNeedResizeTable(n,r)&&(i={row:r||this._tableBound.row,col:n||this._tableBound.col}),i}},{key:"_isNeedResizeTable",value:function(e,t){return e&&e!==this._tableBound.col||t&&t!==this._tableBound.row}},{key:"_getBoundByOffset",value:function(e,t){return{row:parseInt(t/17,10),col:parseInt(e/25,10)}}},{key:"_getOffsetByBound",value:function(e,t){return{x:25*e+25,y:17*t+17}}},{key:"_setTableSizeByBound",value:function(e,t){var n=this._getOffsetByBound(e,t-1);this._setTableSize(n.x,n.y),this._tableBound.row=t,this._tableBound.col=e}},{key:"_getSelectionBoundByOffset",value:function(e,t){var n=this._getBoundByOffset(e,t);return n.row<1?n.row=1:n.row>this._tableBound.row&&(n.row=this._tableBound.row),n.col<1?n.col=1:n.col>this._tableBound.col&&(n.col=this._tableBound.col),n}},{key:"_setSelectionAreaByBound",value:function(e,t){var n=this._getOffsetByBound(e,t);this._setSelectionArea(n.x,n.y)}},{key:"_setSelectedBound",value:function(e,t){this._selectedBound.col=e,this._selectedBound.row=t}},{key:"_getSelectedTableSize",value:function(){return{row:this._selectedBound.row+1,col:this._selectedBound.col+1}}},{key:"_setDisplayText",value:function(e,t){this.$desc.html(e+1+" x "+(t+1))}},{key:"_setTableSize",value:function(e,t){e+=1,t+=1,this.$header.css({height:17,width:e}),this.$body.css({height:t,width:e}),this.$el.css({width:e+30})}},{key:"_setSelectionArea",value:function(e,t){e+=1,t+=1,this.$selection.css({height:t,width:e})}}]),t}(u.default);h.CELL_WIDTH=25,h.CELL_HEIGHT=17,h.MIN_ROW_SELECTION_INDEX=1,h.MIN_COL_SELECTION_INDEX=1,e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(7),c=r(u),d=n(106),f=r(d),h=n(69),g=r(h),p=n(70),v=r(p),m=tui,y=m.util,_='\n    <button class="popup-editor-save">close</button>\n    <button class="popup-editor-toggle-preview">preview</button>\n    <button class="popup-editor-toggle-fit">max</button>\n',b=function(e){function t(e){return i(this,t),e=y.extend({header:!0,title:"CodeBlock Editor",content:"",className:"tui-popup-code-block-editor",headerButtons:_,modal:!0},e),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._codeBlockEditor=null,this._toggleFitButton=null,this._togglePreviewButton=null,this._scrollSyncSplit=null,this.eventManager=e.eventManager,this.convertor=e.convertor}},{key:"_initDOM",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this,e);var n=this.$el.get(0);this._toggleFitButton=n.querySelector(".popup-editor-toggle-fit"),this._togglePreviewButton=n.querySelector(".popup-editor-toggle-preview"),this._codeMirrorWrapper=this._createCodeBlockEditor(),this._previewWrapper=this._createPreview(),this._scrollSyncSplit=new f.default(this.$body.get(0),this._codeMirrorWrapper,this._previewWrapper),this._updateFitWindowButton(),this._updatePreviewButton()}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("scroll",function(e){return e.preventDefault()}),this.on("click .popup-editor-toggle-fit",this._toggleFitToWindow.bind(this)),this.on("click .popup-editor-toggle-preview",this._togglePreview.bind(this)),this.on("click .popup-editor-save",this._save.bind(this)),this.on("click .popup-editor-editor-wrapper",function(t){t.target===e._codeMirrorWrapper&&e._focusEditor(!0)})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("openPopupCodeBlockEditor",function(t){return e.eventManager.emit("closeAllPopup"),e.show(t),e}),this.eventManager.listen("closeAllPopup",this.hide.bind(this)),this.eventManager.listen("closePopupCodeBlockEditor",this.hide.bind(this))}},{key:"_createCodeBlockEditor",value:function(){var e=document.createElement("div");return e.classList.add("popup-editor-editor-wrapper"),this._codeBlockEditor=new g.default(e,this.eventManager),e}},{key:"_createPreview",value:function(){var e=document.createElement("div");return this._codeBlockPreview=new v.default($(e),this.eventManager,this.convertor,this._codeBlockEditor),e}},{key:"_updateFitWindowButton",value:function(){$(this._toggleFitButton).toggleClass("active",this.isFitToWindow())}},{key:"_updatePreviewButton",value:function(){$(this._togglePreviewButton).toggleClass("active",this._scrollSyncSplit.isSplitView())}},{key:"_focusEditor",value:function(e){this._codeBlockEditor.focus(),e?this._codeBlockEditor.moveCursorToEnd():this._codeBlockEditor.moveCursorToStart()}},{key:"_togglePreview",value:function(){this._scrollSyncSplit.toggleSplitView(),this._updatePreviewButton(),this._codeBlockEditor.refresh()}},{key:"_toggleFitToWindow",value:function(){this.toggleFitToWindow(),this._updateFitWindowButton(),this._codeBlockEditor.refresh()}},{key:"_save",value:function(){this._codeBlockEditor.save(this._codeBlockElement),this.hide()}},{key:"_load",value:function(e){this._codeBlockElement=e,this._codeBlockEditor.load(e),this._focusEditor(),this._codeBlockPreview.refresh()}},{key:"show",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),!e)throw new Error("should be called with codeBlockElement");this._load(e)}},{key:"hide",value:function(){this.setFitToWindow(!1),this._codeBlockEditor&&this._codeBlockEditor.clear(),this._codeBlockPreview&&this._codeBlockPreview.clear(),this._codeBlockElement=null,s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}(c.default);e.exports=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(7),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=tui,d=c.util,f="te-popup-code-block-lang-",h=function(e){function t(e){r(this,t);var n=[];return e.languages.forEach(function(e){return n.push('<button type="button" class="'+f+e+'" data-lang="'+e+'">'+e+"</button>")}),e=d.extend({header:!1,className:"te-popup-code-block-languages",content:n.join("")},e),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),a(t,[{key:"_initInstance",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._onSelectedLanguage=null,this._onDismissed=null,this._currentButton=null,this._$buttons=null,this._languages=e.languages,this.eventManager=e.eventManager}},{key:"_initDOM",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this,e),this._$buttons=this.$el.find("button"),this._activateButtonByIndex(0)}},{key:"_initDOMEvent",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this);var n=function(t){var n=$(t.target).data("lang");e._onSelectedLanguage&&e._onSelectedLanguage(n),e.hide()};this._languages.forEach(function(t){return e.on("mousedown ."+f+t,n)})}},{key:"_initEditorEvent",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("openPopupCodeBlockLanguages",function(t){return e.eventManager.emit("closeAllPopup"),e.show(t.callback),e.$el.offset(t.offset),e.setCurrentLanguage(t.language),e}),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("mousedown",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("closePopupCodeBlockLanguages",function(){return e.hide()}),this.eventManager.listen("scroll",function(){return e.hide()})}},{key:"_activateButtonByIndex",value:function(e){this._currentButton&&$(this._currentButton).removeClass("active"),this._currentButton=this._$buttons.get(e),$(this._currentButton).addClass("active"),this._currentButton.scrollIntoView()}},{key:"prev",value:function(){var e=this._$buttons.index(this._currentButton)-1;e<0&&(e=this._$buttons.length-1),this._activateButtonByIndex(e)}},{key:"next",value:function(){var e=this._$buttons.index(this._currentButton)+1;e>=this._$buttons.length&&(e=0),this._activateButtonByIndex(e)}},{key:"getCurrentLanguage",value:function(){return $(this._currentButton).data("lang")}},{key:"setCurrentLanguage",value:function(e){var t=this._$buttons.filter("."+f+e);if(t.length>0){var n=this._$buttons.index(t);this._activateButtonByIndex(n)}}},{key:"show",value:function(e){this._onSelectedLanguage=e.selected,this._onDismissed=e.dismissed,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"hide",value:function(){this._onDismissed&&this._onDismissed(),this._onSelectedLanguage=null,this._onDismissed=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}(u.default);e.exports=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=n(7),c=r(u),d=n(5),f=r(d),h=tui,g=h.util,p=function(e){function t(e){i(this,t);var n='\n            <button type="button" class="te-table-add-row">'+f.default.get("Add row")+'</button>\n            <button type="button" class="te-table-add-col">'+f.default.get("Add col")+'</button>\n            <button type="button" class="te-table-remove-row">'+f.default.get("Remove row")+'</button>\n            <button type="button" class="te-table-remove-col">'+f.default.get("Remove col")+'</button>\n            <hr/>\n            <button type="button" class="te-table-col-align-left">'+f.default.get("Align left")+'</button>\n            <button type="button" class="te-table-col-align-center">'+f.default.get("Align center")+'</button>\n            <button type="button" class="te-table-col-align-right">'+f.default.get("Align right")+'</button>\n            <hr/>\n            <button type="button" class="te-table-remove">'+f.default.get("Remove table")+"</button>\n        ";return e=g.extend({header:!1,className:"te-popup-table-utils",content:n},e),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),l(t,[{key:"_initInstance",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager}},{key:"_initDOMEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click .te-table-add-row",function(){return e.eventManager.emit("command","AddRow")}),this.on("click .te-table-add-col",function(){return e.eventManager.emit("command","AddCol")}),this.on("click .te-table-remove-row",function(){return e.eventManager.emit("command","RemoveRow")}),this.on("click .te-table-col-align-left",function(){return e.eventManager.emit("command","AlignCol","left")}),this.on("click .te-table-col-align-center",function(){return e.eventManager.emit("command","AlignCol","center")}),this.on("click .te-table-col-align-right",function(){return e.eventManager.emit("command","AlignCol","right")}),this.on("click .te-table-remove-col",function(){return e.eventManager.emit("command","RemoveCol")}),this.on("click .te-table-remove",function(){return e.eventManager.emit("command","RemoveTable")})}},{key:"_initEditorEvent",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("mousedown",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("openPopupTableUtils",function(t){var n=e.$el.parent().offset(),r=t.clientX-n.left,i=t.clientY-n.top+$(window).scrollTop();e.eventManager.emit("closeAllPopup"),e.$el.css({position:"absolute",top:i+5,left:r+10}),e.show()})}}]),t}(c.default);e.exports=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,a=o.util,l={left:"tui-split-content-left",right:"tui-split-content-right"},s=function(){function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r(this,e),o=a.extend({showScrollSyncButton:!1,scrollSync:!0,splitView:!0},o),this._baseElement=t,this._contentElements=[],this._initDom(n,i,o),this._initDomEvent()}return i(e,[{key:"_initDom",value:function(e,t,n){var r=document.createElement("div");r.className="tui-split-scroll",this._el=r;var i=document.createElement("div");i.className="tui-split-scroll-wrapper",this._scrollWrapper=i,this._setScrollSync(n.scrollSync),this.setSplitView(n.splitView);var o=document.createElement("div");o.className="tui-split-scroll-content",this._contentWrapper=o;var a=document.createElement("button");a.className="tui-scrollfollow",this._scrollSyncButton=a;var l=document.createElement("div");l.className="tui-splitter",this._baseElement.appendChild(r),r.appendChild(i),r.appendChild(a),i.appendChild(o),i.appendChild(l),this._setLeft(e),this._setRight(t)}},{key:"_initDomEvent",value:function(){this._contentWrapper.addEventListener("scroll",this.sync.bind(this)),this._scrollSyncButton.addEventListener("click",this._toggleScrollSync.bind(this))}},{key:"_requireScrollIntoView",value:function(e){var t=e.getBoundingClientRect(),n=t.top,r=t.bottom,i=this._contentWrapper.getBoundingClientRect(),o=i.top,a=i.bottom;n<o?this._contentWrapper.scrollTop=this._contentWrapper.scrollTop+n-o:r>a&&(this._contentWrapper.scrollTop=this._contentWrapper.scrollTop+r-a),this.sync()}},{key:"_setContentElement",value:function(e,t){var n=this,r=this._contentElements[t];r&&($(r).off("requireScrollIntoView"),this._contentWrapper.removeChild(r)),e.classList.add(l[t]),this._contentWrapper.appendChild(e),$(e).on("requireScrollIntoView",function(e){return n._requireScrollIntoView(e.target)}),$(e).on("requireScrollSync",this.sync.bind(this)),this._contentElements[t]=e,this.sync()}},{key:"_setLeft",value:function(e){this._setContentElement(e,"left")}},{key:"_setRight",value:function(e){this._setContentElement(e,"right")}},{key:"_setScrollSync",value:function(e){$(this._el).toggleClass("scroll-sync",e)}},{key:"_toggleScrollSync",value:function(){this._el.classList.toggle("scroll-sync")}},{key:"setSplitView",value:function(e){$(this._el).toggleClass("single-content",!e)}},{key:"toggleSplitView",value:function(){this._el.classList.toggle("single-content")}},{key:"isMultiScroll",value:function(){return!this._el.classList.contains("scroll-sync")}},{key:"isSplitView",value:function(){return!this._el.classList.contains("single-content")}},{key:"sync",value:function(){if(this._contentElements.left&&this._contentElements.right){var e=this._contentWrapper.clientHeight,t=this._contentWrapper.scrollTop,n=this._contentElements.left,r=this._contentElements.right,i=n.offsetHeight-e>0?n:r,o=i===n?r:n,a=i.offsetHeight,l=Math.max(a-e,0),s=Math.max(o.offsetHeight,e),u=a-s;i.style.top="0px",o.style.top=t/l*u+"px"}}},{key:"scrollTop",value:function(e){this._contentWrapper.scrollTop=e}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),u=r(s),c=n(55),d=r(c),f=n(5),h=r(f),g=tui,p=g.util,v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"tui-editor-defaultUI-toolbar"}));return n.buttons=[],n.eventManager=e,n._render(),n._initButton(),n}return a(t,e),l(t,[{key:"_render",value:function(){this.$buttonContainer=this.$el}},{key:"addButton",value:function(e,t){var n=this,r=$('<div class="tui-toolbar-button-group"></div>');p.isArray(e)?p.forEach(e,function(e){r.append(n._setButton(e).$el)}):r.append(this._setButton(e).$el),t?this.$buttonContainer.find(".tui-toolbar-button-group").eq(t-1).after(r):this.$buttonContainer.append(r)}},{key:"_setButton",value:function(e){var t=this.eventManager;return e instanceof d.default||(e=new d.default(e)),e.on("command",function(e,n){return t.emit("command",n)}),e.on("event",function(e,n){return t.emit(n)}),this.buttons.push(e),e}},{key:"_initButton",value:function(){var e=this;this.addButton(new d.default({className:"tui-heading",event:"openHeadingSelect",tooltip:h.default.get("Headings")})),this.addButton([new d.default({className:"tui-bold",command:"Bold",tooltip:h.default.get("Bold"),state:"bold"}),new d.default({className:"tui-italic",command:"Italic",tooltip:h.default.get("Italic"),state:"italic"}),new d.default({className:"tui-strike",command:"Strike",text:"~",tooltip:h.default.get("Strike"),state:"strike"})]),this.addButton([new d.default({className:"tui-ul",command:"UL",tooltip:h.default.get("Unordered list")}),new d.default({className:"tui-ol",command:"OL",tooltip:h.default.get("Ordered list")}),new d.default({className:"tui-task",command:"Task",tooltip:h.default.get("Task")})]),this.addButton([new d.default({className:"tui-hrline",command:"HR",tooltip:h.default.get("Line")}),new d.default({className:"tui-table",event:"openPopupAddTable",tooltip:h.default.get("Insert table")})]),this.addButton([new d.default({className:"tui-image",event:"openPopupAddImage",tooltip:h.default.get("Insert image")}),new d.default({className:"tui-link",event:"openPopupAddLink",tooltip:h.default.get("Insert link")})]),this.addButton(new d.default({className:"tui-quote",command:"Blockquote",tooltip:h.default.get("Blockquote"),state:"quote"})),this.addButton([new d.default({className:"tui-codeblock",command:"CodeBlock",text:"CB",tooltip:h.default.get("Insert codeblock"),state:"codeBlock"}),new d.default({className:"tui-code",command:"Code",tooltip:h.default.get("Code"),state:"code"})]),this.eventManager.listen("stateChange",function(t){p.forEach(e.buttons,function(e){e.state&&(t[e.state]?e.$el.addClass("active"):e.$el.removeClass("active"))})})}}]),t}(u.default);e.exports=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o='<div class="tui-tooltip"><div class="arrow"></div><span class="text"></span></span></div>',a=function(){function e(){r(this,e),this.$el=$(o),this.$el.appendTo("body"),this.$el.hide()}return i(e,[{key:"show",value:function(e,t){this.$el.css({top:e.offset().top+e.height()+13,left:e.offset().left+3}).find(".text").html(t).end().show()}},{key:"hide",value:function(){this.$el.hide()}}]),e}();e.exports=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=r(a),s=n(115),u=r(s),c=n(5),d=r(c),f=function(){function e(t){i(this,e),this.wwe=t,this._pch=new u.default(this.wwe),this._selectedSellCount=0,this._$clipboardArea=null}return o(e,[{key:"init",value:function(){this.wwe.getEditor().addEventListener("willPaste",this._onWillPaste.bind(this)),this.wwe.eventManager.listen("copy",this._onCopyCut.bind(this)),this.wwe.eventManager.listen("copyAfter",this._onCopyAfter.bind(this)),this.wwe.eventManager.listen("cut",this._onCopyCut.bind(this)),this.wwe.eventManager.listen("cutAfter",this._onCutAfter.bind(this))}},{key:"_onCopyCut",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection");if(t.getSelectedCells().length){if(!t.mergedTableSelectionManager)return t.createRangeBySelectedCells(),void t.removeClassAttrbuteFromAllCellsIfNeed();var n=this.wwe.getEditor(),r=e.data,i=n.getSelection().cloneRange(),o=$("<div />");this._extendRange(i),o.append(i.cloneContents()),this._updateCopyDataForListTypeIfNeed(i,o),this.wwe.eventManager.emit("copyBefore",{source:"wysiwyg",$clipboardContainer:o}),this._setClipboardData(r,o.html(),o.text())}}},{key:"_clearClipboardArea",value:function(){this._$clipboardArea&&(this._$clipboardArea.remove(),this._$clipboardArea=null)}},{key:"_onCopyAfter",value:function(){this.wwe.getEditor().get$Body().focus(),this._clearClipboardArea()}},{key:"_onCutAfter",value:function(){this.wwe.getEditor().getSelection().deleteContents(),this.wwe.getEditor().focus(),this._clearClipboardArea()}},{key:"_onWillPaste",value:function(e){var t=this,n=$("<div>").append(e.fragment.cloneNode(!0));this._setTableBookmark(n),this._pasteToTable(n)?e.preventDefault():(this._preparePaste(n),this._setTableBookmark(n),e.fragment=document.createDocumentFragment(),$(n[0].childNodes).each(function(t,n){e.fragment.appendChild(n)}));var r=function e(){t.wwe.getEditor().removeEventListener("input",e),t.wwe.eventManager.emit("wysiwygRangeChangeAfter",t),t._focusTableBookmark()};this.wwe.getEditor().addEventListener("input",r)}},{key:"_setClipboardData",value:function(e,t,n){tui.util.browser.msie?(e.squirePrevented=!0,this._$clipboardArea=this._createClipboardArea(),this._$clipboardArea.html(t),this._$clipboardArea.focus(),window.getSelection().selectAllChildren(this._$clipboardArea[0])):(e.preventDefault(),e.stopPropagation(),e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",n))}},{key:"_createClipboardArea",value:function(){return $("<DIV>").attr({contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"}).appendTo(document.body)}},{key:"_updateCopyDataForListTypeIfNeed",value:function(e,t){var n=e.commonAncestorContainer.nodeName;if("UL"===n||"OL"===n){var r=$("<"+n+" />");r.append(t.html()),t.html(""),t.append(r)}}},{key:"_removeEmptyFontElement",value:function(e){e.children("font").each(function(e,t){var n=$(t);n.text().trim()||n.remove()})}},{key:"_pasteToTable",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=this.wwe.componentManager.getManager("tableSelection"),r=this.wwe.getEditor().getSelection(),i=t.isInTable(r),o=e.get(0),a=o.childNodes,l=1===a.length&&"TABLE"===a[0].nodeName,s=!1;return i&&(l?(t.pasteClipboardData(e.first()),e.html(""),s=!0):n.getSelectedCells().length&&(alert(d.default.get("Cannot paste values ​​other than a table in the cell selection state")),e.html(""),s=!0)),s}},{key:"_preparePaste",value:function(e){this._removeEmptyFontElement(e),this._pch.preparePaste(e),this.wwe.eventManager.emit("pasteBefore",{source:"wysiwyg",$clipboardContainer:e})}},{key:"_setTableBookmark",value:function(e){var t=$(e[0].childNodes).last();t[0]&&"TABLE"===t[0].nodeName&&t.addClass("tui-paste-table-bookmark")}},{key:"_focusTableBookmark",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=e.get$Body().find(".tui-paste-table-bookmark"),r=e.get$Body().find(".tui-paste-table-cell-bookmark");n.length&&(n.removeClass("tui-paste-table-bookmark"),t.setEndAfter(n[0]),t.collapse(!1),e.setSelection(t)),r.length&&(r.removeClass("tui-paste-table-cell-bookmark"),t.selectNodeContents(r[0]),t.collapse(!1),e.setSelection(t))}},{key:"_extendRange",value:function(e){(!l.default.isTextNode(e.commonAncestorContainer)||0===e.startOffset&&e.commonAncestorContainer.textContent.length===e.endOffset||"TD"===e.commonAncestorContainer.nodeName)&&(0===e.startOffset&&(e=this._extendStartRange(e)),e.endOffset===l.default.getOffsetLength(e.endContainer)&&(e=this._extendEndRange(e)),this._isWholeCommonAncestorContainerSelected(e)&&e.selectNode(e.commonAncestorContainer),this.wwe.getEditor().setSelection(e))}},{key:"_extendStartRange",value:function(e){for(var t=e.startContainer;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&!t.previousSibling;)t=t.parentNode;return e.setStart(t.parentNode,l.default.getNodeOffsetOfParent(t)),e}},{key:"_extendEndRange",value:function(e){for(var t=e.endContainer,n=t.nextSibling;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&(!n||"BR"===l.default.getNodeName(n)&&t.parentNode.lastChild===n);)t=t.parentNode,n=t.nextSibling;return e.setEnd(t.parentNode,l.default.getNodeOffsetOfParent(t)+1),e}},{key:"_isWholeCommonAncestorContainerSelected",value:function(e){return e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE&&e.commonAncestorContainer!==this.wwe.get$Body()[0]&&0===e.startOffset&&e.endOffset===e.commonAncestorContainer.childNodes.length&&e.commonAncestorContainer===e.startContainer&&e.commonAncestorContainer===e.endContainer}}]),e}();e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e.replace(/[<>&]/g,function(e){return c[e]||e})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=tui,u=s.util,c={"&":"&amp;","<":"&lt;",">":"&gt;"},d=/\u200B/g,f=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="codeblock",this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initKeyHandler",value:function(){this.wwe.addKeyEventHandler("BACK_SPACE",this._removeCodeblockIfNeed.bind(this))}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e.splitCodeblockToEachLine()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return e._mergeCodeblockEachlinesFromHTMLText(t)})}},{key:"prepareToPasteOnCodeblock",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.getEditor().getDocument().createDocumentFragment();return 1===e.length&&this._isCodeBlock(e[0])?n.appendChild(this._copyCodeblockTypeFromRangeCodeblock(e.shift(),t)):n.appendChild(this._copyCodeblockTypeFromRangeCodeblock(this.convertToCodeblock(e),t)),n}},{key:"convertToCodeblock",value:function(e){for(var t=$("<pre />"),n=this,r=e.shift();u.isTruthy(r);)t.append(n._makeCodeBlockLineHtml(u.isString(r)?r:r.textContent)),r=e.shift();return t.attr("data-te-codeblock",""),t[0]}},{key:"_copyCodeblockTypeFromRangeCodeblock",value:function(e,t){var n=l.default.getParentUntil(t.commonAncestorContainer,this.wwe.get$Body()[0]);if("PRE"===l.default.getNodeName(n)){var r=$(n).prop("attributes");u.forEach(r,function(t){$(e).attr(t.name,t.value)})}return e}},{key:"_mergeCodeblockEachlinesFromHTMLText",value:function(e){return e=e.replace(/<pre( .*?)?>(.*?)<\/pre>/g,function(e,t,n){return n=n.replace(/<br \/>/g,"\n"),n=n.replace(/<div ?(.*?)>/g,""),n=n.replace(/\n$/,""),"<pre><code"+(t||"")+">"+n+"</code></pre>"})}},{key:"splitCodeblockToEachLine",value:function(e){var t=this;e||(e=this.wwe.get$Body()),$(e).find("pre").each(function(e,n){var r=$(n),i=r.find("code").attr("data-language"),o=void 0;r.children().length>1&&(o=[],r.children().each(function(e,t){"DIV"!==t.nodeName&&"P"!==t.nodeName||$(t).find("br").length||$(t).append("<br>")})),r.find("br").replaceWith("\n"),o=r.text().replace(/\s+$/,"").split(/\n/g),i&&(r.attr("data-language",i),r.addClass("lang-"+i)),r.empty(),u.forEach(o,function(e){r.append(t._makeCodeBlockLineHtml(e))}),r.attr("data-te-codeblock","")})}},{key:"_makeCodeBlockLineHtml",value:function(e){return"<div>"+(e=e?i(e):"<br>")+"</div>"}},{key:"_removeCodeblockIfNeed",value:function(e,t){var n=this;if(!this.isInCodeBlock(t))return!0;var r=$(t.startContainer).closest("pre"),i=$(r).find("div").eq(0),o=i.text().replace(d,"");return 0!==t.startOffset&&0!==o.length||!($(r).find("div").length<=1)||(this.wwe.getEditor().modifyBlocks(function(){var e=n.wwe.getEditor().getDocument().createDocumentFragment(),t=void 0;return t=0===o.length?"<br>":i.html().replace(d,""),$(e).append($("<div>"+t+"</div>")),e}),!1)}},{key:"isInCodeBlock",value:function(e){var t=void 0;return t=e.collapsed?e.startContainer:e.commonAncestorContainer,this._isCodeBlock(t)}},{key:"_isCodeBlock",value:function(e){return!!$(e).closest("pre").length}}]),e}();e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=/h[\d]/i,s=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="heading",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._wrapDefaultBlockToHeadingInner()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){return!e.wwe.hasFormatWithRx(l)||(e._onEnter(t,n),!1)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!e.wwe.hasFormatWithRx(l)||(e._removePrevTopNodeIfNeed(t,n),!1)})}},{key:"_wrapDefaultBlockToHeadingInner",value:function(){this.wwe.get$Body().find("h1, h2, h3, h4, h5, h6").each(function(e,t){$(t).children("div, p").length<=0&&$(t).wrapInner("<div />")})}},{key:"_unwrapHeading",value:function(){this.wwe.unwrapBlockTag(function(e){return l.test(e)})}},{key:"_onEnter",value:function(e,t){var n=this;t.startOffset>0?this.wwe.defer(function(e){n._unwrapHeading(),e.getEditor().removeLastUndoStack()}):(e.preventDefault(),this._insertEmptyBlockToPrevious(t))}},{key:"_insertEmptyBlockToPrevious",value:function(e){this.wwe.getEditor().saveUndoState(e),$("<div><br></div>").insertBefore(a.default.getParentUntil(e.startContainer,this.wwe.get$Body()[0]))}},{key:"_removePrevTopNodeIfNeed",value:function(e,t){var n=!1;if(t.collapsed&&0===t.startOffset){var r=t.startContainer,i=a.default.getTopPrevNodeUnder(r,this.wwe.get$Body()[0]),o=i&&0===i.textContent.length,l=this.wwe.getEditor();0===r.textContent.length?n=this._removeHedingAndChangeSelection(e,t,i):o&&(e.preventDefault(),l.saveUndoState(t),$(i).remove(),n=!0)}return n}},{key:"_removeHedingAndChangeSelection",value:function(e,t,n){var r=t.startContainer,i=this.wwe.getEditor(),o=this.wwe.get$Body(),s=l.test(a.default.getNodeName(r)),u=s?r:$(r).parents("h1,h2,h3,h4,h5,h6")[0],c=n,d=1;return e.defaultPrevented||(e.preventDefault(),i.saveUndoState(t)),$(u).remove(),n||(c=o.children("div").first().get(0),d=0),t.setStart(c,d),t.collapse(!0),i.setSelection(t),!0}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return this.nodeType===Node.TEXT_NODE}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="hr",this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._unwrapDivOnHr()}),this.eventManager.listen("wysiwygGetValueBefore",function(){e._wrapDefaultBlockToOrphanTexts()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler(function(t,n){return e._onTypedInHr(n)}),this.wwe.addKeyEventHandler("ENTER",function(t,n){return!n.collapsed||e._removeHrOnEnter(n,t)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!n.collapsed||e._removeHrOnBackspace(n,t)})}},{key:"_isInHr",value:function(e){return"HR"===l.default.getNodeName(e.startContainer.childNodes[e.startOffset])}},{key:"_isNearHr",value:function(e){var t=l.default.getChildNodeByOffset(e.startContainer,e.startOffset-1);return"HR"===l.default.getNodeName(t)}},{key:"_onTypedInHr",value:function(e){var t=this;(this._isInHr(e)||this._isNearHr(e))&&this.wwe.defer(function(e){e.saveSelection(),t._wrapDefaultBlockToOrphanTexts(),e.restoreSavedSelection()})}},{key:"_removeHrOnEnter",value:function(e,t){var n=void 0,r=void 0;return this._isInHr(e)?n=l.default.getChildNodeByOffset(e.startContainer,e.startOffset):this._isNearHr(e)&&(n=l.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),r="before"),this._changeHrToNewDefaultBlock(n,e,t,r)}},{key:"_removeHrOnBackspace",value:function(e,t){var n=void 0,r=void 0;return this._isInHr(e)?n=l.default.getChildNodeByOffset(e.startContainer,e.startOffset):0===e.startOffset?(n=l.default.getTopPrevNodeUnder(e.startContainer,this.wwe.get$Body()[0]),r="none"):this._isNearHr(e)&&(n=l.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),r="before"),this._changeHrToNewDefaultBlock(n,e,t,r)}},{key:"_changeHrToNewDefaultBlock",value:function(e,t,n,r){return!e||"HR"!==l.default.getNodeName(e)||(n.preventDefault(),"none"!==r&&this.wwe.breakToNewDefaultBlock(t,r),$(e).remove(),!1)}},{key:"_unwrapDivOnHr",value:function(){var e=this.wwe.get$Body().get(0);this.wwe.get$Body().find("hr").each(function(t,n){var r=$(n).parent("div");r[0]!==e&&(r.find("br").remove(),$(n).unwrap())})}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){this.wwe.get$Body().contents().filter(i).each(function(e,t){$(t).wrap("<div />")})}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=/<li/i,s=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="list",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter",function(){e._findAndRemoveEmptyList(),e._removeBranchListAll(),e._wrapDefaultBlockToListInner()}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeBranchListAll(),e._wrapDefaultBlockToListInner()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return e._prepareInsertBlankToBetweenSameList(t)}),this.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){return e.replace(/:BLANK_LINE:\n/g,"")})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("TAB",function(t,n){var r=void 0;return n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&(t.preventDefault(),e.eventManager.emit("command","IncreaseDepth"),r=!1),r}),this.wwe.addKeyEventHandler("SHIFT+TAB",function(t,n){var r=void 0;if(n.collapsed&&e.wwe.getEditor().hasFormat("LI")){t.preventDefault();var i=$(n.startContainer).closest("li").children("ul, ol");e.eventManager.emit("command","DecreaseDepth"),i.length&&!i.prev().length&&e._removeBranchList(i),r=!1}return r}),this.wwe.addKeyEventHandler("ENTER",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){var t=e.wwe.getRange(),n=$(t.startContainer).parents("li").eq(0);e._removeBranchListAll(n)})}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){e._removeBranchListAll()})})}},{key:"_findAndRemoveEmptyList",value:function(){this.wwe.get$Body().find("ul,ol").each(function(e,t){l.test(t.innerHTML)||$(t).remove()})}},{key:"_removeBranchListAll",value:function(e){var t=this;e=e?$(e):this.wwe.get$Body(),e.find("li ul, li ol").each(function(e,n){n&&!n.previousSibling&&t._removeBranchList(n)})}},{key:"_removeBranchList",value:function(e){for(var t=$(e),n=t;!n[0].previousSibling&&n[0].parentElement.tagName.match(/UL|OL|LI/g);)n=n.parent();var r=n.children("li").eq(0);n.prepend(t.children().unwrap()),r.remove()}},{key:"_wrapDefaultBlockToListInner",value:function(){this.wwe.get$Body().find("li").each(function(e,t){$(t).children("div, p").length<=0&&($(t).wrapInner("<div />"),$(t).find("div").children("ul, ol").appendTo(t))})}},{key:"_prepareInsertBlankToBetweenSameList",value:function(e){return e.replace(/<\/(ul|ol)>(<br \/>|<br>){0,}<\1>/g,"</$1>:BLANK_LINE:<$1>")}},{key:"getLinesOfSelection",value:function(e,t){var n=[],r=!1,i=!0,o=void 0;a.default.isTextNode(e)&&(e=$(e).parents("div").first().get(0)),a.default.isTextNode(t)&&(t=$(t).parents("div").first().get(0));for(var l=e;i&&$(l).is("DIV");l=o)n.push(l),l===t&&(r=!0),o=l.nextElementSibling,i=o&&!r;return n}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="p",this._initEvent()}return i(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._splitPtagContentLines(t)}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._ensurePtagContentWrappedWithDiv(),e._unwrapPtags()})}},{key:"_splitPtagContentLines",value:function(e){if(e){var t=$("<div />");t.html(e),t.find("p").each(function(e,t){var n=t.innerHTML,r=n.split(/<br>/gi),i=r.length-1,o=t.nextElementSibling||t.nextSibling,a="";a=r.map(function(e,t){var n="";return t>0&&t<i&&(e=e||"<br>"),e&&(n="<div>"+e+"</div>"),n}),o&&"P"===o.nodeName&&a.push("<div><br></div>"),$(t).replaceWith($(a.join("")))}),e=t.html()}return e}},{key:"_ensurePtagContentWrappedWithDiv",value:function(){this.wwe.get$Body().find("p").each(function(e,t){$(t).find("div").length<=0&&$(t).wrapInner("<div />"),$(t).next().is("p")&&$(t).append("<div><br></div>")})}},{key:"_unwrapPtags",value:function(){this.wwe.get$Body().find("div").each(function(e,t){$(t).parent().is("p")&&$(t).unwrap()})}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=r(l),u=n(17),c=r(u),d=tui,f=d.util,h=function(){function e(t){i(this,e),this.wwe=t}return a(e,[{key:"preparePaste",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.componentManager.getManager("codeblock"),r=!1,i=$("<div />"),a=void 0,l=void 0,u=void 0;this._pasteFirstAid(e);var c=f.toArray(e[0].childNodes);for(c.length&&"DIV"===c[0].tagName&&(i.append(this._unwrapFragmentFirstChildForPasteAsInline(c[0])),c.shift());c.length;){l=o(c,1)[0],a=s.default.getNodeName(l),u="LI"===a||"UL"===a||"OL"===a,n.isInCodeBlock(t)?i.append(n.prepareToPasteOnCodeblock(c)):u?(i.append(this._prepareToPasteList(c,t,r)),r=!0):i.append(c.shift())}e.html(i.html())}},{key:"_wrapOrphanNodeWithDiv",value:function(e){var t=$("<div />"),n=f.toArray(e[0].childNodes),r=void 0;return f.forEachArray(n,function(e){var n=3===e.nodeType,i=/^(SPAN|A|CODE|EM|I|STRONG|B|S|ABBR|ACRONYM|CITE|DFN|KBD|SAMP|VAR|BDO|Q|SUB|SUP)$/gi.test(e.tagName);n||i?(r||(r=document.createElement("div"),t.append(r)),r.appendChild(e)):(r&&"BR"!==r.lastChild.tagName&&r.appendChild($("<br/>")[0]),r=null,t.append(e))}),t.html()}},{key:"_pasteFirstAid",value:function(e){var t=this,n="div, section, article, aside, nav, menus, p";e.html((0,c.default)(e.html(),!0)),e.find("*").each(function(e,n){t._removeStyles(n)}),this._unwrapIfNonBlockElementHasBr(e),this._unwrapNestedBlocks(e,n),this._removeUnnecessaryBlocks(e,n),e.html(this._wrapOrphanNodeWithDiv(e)),this._preElementAid(e),this._tableElementAid(e),e.children("br").remove()}},{key:"_preElementAid",value:function(e){this.wwe.componentManager.getManager("codeblock").splitCodeblockToEachLine(e)}},{key:"_unwrapIfNonBlockElementHasBr",value:function(e){e.find("span, a, b, em, i, s").each(function(e,t){var n=$(t).children("br");n.length&&"LI"!==t.nodeName&&"UL"!==t.nodeName&&n.eq(0).unwrap()})}},{key:"_unwrapNestedBlocks",value:function(e,t){e.find(":not(:has(*))").not("b,s,i,em,code,span").each(function(n,r){for(var i="BR"===r.nodeName?$(r.parentNode):$(r);i.parents(t).length;){var o=i.parent(t);o.length&&o[0]!==e[0]?i.unwrap():i=i.parent()}})}},{key:"_removeUnnecessaryBlocks",value:function(e,t){e.find(t).each(function(e,n){var r=$(n),i=n.tagName,o="DIV"===i,a=0!==r.parent("li").length,l=0!==r.parent("blockquote").length,s=r.children(t).length;o&&(a||l||!s)||r.replaceWith(r.html())})}},{key:"_removeStyles",value:function(e){var t=$(e),n=void 0;"SPAN"!==s.default.getNodeName(t[0])?t.removeAttr("style"):(t.attr("style")&&(n=t.css("color")),t.removeAttr("style"),n?t.css("color",n):t.contents().unwrap())}},{key:"_prepareToPasteList",value:function(e,t,n){var r=s.default.getNodeName(e[0]),i=e.shift(),o=this.wwe.getEditor().getDocument().createDocumentFragment();if("LI"!==r&&e.length&&"LI"===e[0].tagName&&(r="LI",i=this._makeNodeAndAppend({tagName:r},i)),"OL"===r||"UL"===r)!n&&this.wwe.getEditor().hasFormat("LI")?$(o).append(this._wrapCurrentFormat(i)):$(o).append(i);else if("LI"===r){var a=this.wwe.getEditor().getDocument().createDocumentFragment();for(a.appendChild(i);e.length&&"LI"===e[0].tagName;)a.appendChild(e.shift());!n&&this.wwe.getEditor().hasFormat("LI")?$(o).append(this._wrapCurrentFormat(a)):!t||"UL"!==t.commonAncestorName&&"OL"!==t.commonAncestorName?$(o).append(this._makeNodeAndAppend({tagName:"UL"},a)):$(o).append(this._makeNodeAndAppend({tagName:t.commonAncestorName},a))}return o}},{key:"_unwrapFragmentFirstChildForPasteAsInline",value:function(e){return $(e).find("br").remove(),e.childNodes}},{key:"_wrapCurrentFormat",value:function(e){var t=this,n=void 0;return this._eachCurrentPath(function(r){"DIV"!==r.tagName&&(n=s.default.isElemNode(e)?e.tagName:e.firstChild.tagName,r.tagName!==n&&(e=t._makeNodeAndAppend(r,e)))}),e}},{key:"_eachCurrentPath",value:function(e){for(var t=s.default.getPath(this.wwe.getEditor().getSelection().startContainer,this.wwe.get$Body()[0]),n=t.length-1;n>-1;n-=1)e(t[n])}},{key:"_makeNodeAndAppend",value:function(e,t){var n=$("<"+e.tagName+"/>");return n.append(t),e.id&&n.attr("id",e.id),e.className&&n.addClass(e.className),n[0]}},{key:"_tableElementAid",value:function(e){this._completeTableIfNeed(e),this._updateTableIDClassName(e)}},{key:"_completeTableIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=t.wrapDanglingTableCellsIntoTrIfNeed(e);n&&e.append(n);var r=t.wrapTrsIntoTbodyIfNeed(e);r&&e.append(r);var i=t.wrapTheadAndTbodyIntoTableIfNeed(e);i&&e.append(i)}},{key:"_updateTableIDClassName",value:function(e){var t=this.wwe.componentManager.getManager("table");e.find("table").each(function(e,t){$(t).removeClass(function(e,t){return t.replace(/.*\s*(te-content-table-\d+)\s*.*/,"$1")})}),e.find("table").each(function(e,n){$(n).addClass(t.getTableIDClassName())})}}]),e}();e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="task",this._init()}return i(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.wwe.getEditor().addEventListener("mousedown",function(e){var t=e.offsetX<18&&e.offsetY<18;e.target.hasAttribute("data-te-task")&&t&&$(e.target).toggleClass("checked")})}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeTaskListClass()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){e.isInTaskList(n)&&e.wwe.defer(function(){var t=e.wwe.getRange();$(t.startContainer).closest("li").removeClass("checked")})})}},{key:"isInTaskList",value:function(e){var t=void 0;return e||(e=this.wwe.getEditor().getSelection().cloneRange()),t=e.startContainer.nodeType===Node.ELEMENT_NODE&&"LI"===e.startContainer.tagName?e.startContainer:$(e.startContainer).parents("li").get(0),$(t).hasClass("task-list-item")}},{key:"unformatTask",value:function(e){var t=$(e).closest("li");t.removeClass("task-list-item"),t.removeClass("checked"),t.removeAttr("data-te-task"),t.attr("class")||t.removeAttr("class")}},{key:"formatTask",value:function(e){var t=$(e),n=t.closest("li");n.addClass("task-list-item"),n.attr("data-te-task","")}},{key:"_formatTaskIfNeed",value:function(){var e=this.wwe.getEditor().getSelection().cloneRange();this.isInTaskList(e)&&this.formatTask(e.startContainer)}},{key:"_removeTaskListClass",value:function(){this.wwe.get$Body().find(".task-list").each(function(e,t){$(t).removeClass("task-list")})}},{key:"getLinesOfSelection",value:function(e,t){var n=[],r=!1,i=!0,o=void 0;a.default.isTextNode(e)&&(e=$(e).parents("div").first().get(0)),a.default.isTextNode(t)&&(t=$(t).parents("div").first().get(0));for(var l=e;i&&$(l).is("DIV,LI");l=o){n.push(l),l!==t&&l.parentNode!==t||(r=!0);var s=$(e).is("li")||0!==$(e).parent("li").length;o=this._getNextLine(l,s,r),i=o&&!r}return n}},{key:"_getNextLine",value:function(e,t,n){var r=void 0;if(t&&"LI"===e.parentNode.tagName){var i=$(e).parent().next();r=i.children("div").first().get(0);var o=i[0]&&!r,a=!i[0]&&!r;o?r=i.get(0):a&&!n&&(r=$(e).parents("ol,ul").first().next().get(0))}else r=e.nextElementSibling;return r}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=tui.util.browser.msie&&11===tui.util.browser.version,s=-1!==navigator.appVersion.indexOf("Win")&&tui.util.browser.chrome,u=l||s,c=function(){function e(t,n){r(this,e),this._wwe=t,u&&(this.isComposition=!1,this._initCompositionEvent()),this.setRange(n||this._wwe.getRange())}return i(e,[{key:"_initCompositionEvent",value:function(){var e=this;this._wwe.getEditor().addEventListener("compositionstart",function(){e.isComposition=!0}),this._wwe.getEditor().addEventListener("compositionend",function(){e.isComposition=!1})}},{key:"setRange",value:function(e){this._range&&this._range.detach(),this._range=e}},{key:"expandStartOffset",value:function(){var e=this._range;a.default.isTextNode(e.startContainer)&&e.startOffset>0&&e.setStart(e.startContainer,e.startOffset-1)}},{key:"expandEndOffset",value:function(){var e=this._range;a.default.isTextNode(e.endContainer)&&e.endOffset<e.endContainer.nodeValue.length&&e.setEnd(e.endContainer,e.endOffset+1)}},{key:"setEndBeforeRange",value:function(e){var t=e.startOffset;this.isComposition&&(t+=1),this._range.setEnd(e.startContainer,t)}},{key:"getTextContent",value:function(){return this._range.cloneContents().textContent}},{key:"replaceContent",value:function(e){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(e),this._range=this._wwe.getRange()}},{key:"deleteContent",value:function(){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(""),this._range=this._wwe.getRange()}},{key:"peekStartBeforeOffset",value:function(e){var t=this._range.cloneRange();return t.setStart(t.startContainer,Math.max(t.startOffset-e,0)),t.setEnd(this._range.startContainer,this._range.startOffset),t.cloneContents().textContent}}]),e}();e.exports=c},function(e,t,n){"use strict";var r=n(0),i=r.command("wysiwyg",{name:"AddImage",exec:function(e,t){var n=e.getEditor();e.focus(),n.hasFormat("PRE")||n.insertImage(t.imageUrl,{alt:t.altText})}});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=r.command("wysiwyg",{name:"AddLink",exec:function(e,t){var n=e.getEditor();if(e.focus(),!n.hasFormat("PRE"))if(n.removeAllFormatting(),n.getSelectedText())n.makeLink(t.url);else{var r=n.createElement("A",{href:t.url});$(r).text(t.linkText),n.insertElement(r)}}});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=r.command("wysiwyg",{name:"Blockquote",keyMap:["CTRL+Q","META+Q"],exec:function(e){var t=e.getEditor();e.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||(e.unwrapBlockTag(),t.increaseQuoteLevel())}});e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.hasFormat("b")||e.hasFormat("strong")?e.changeFormat(null,{tag:"b"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.bold())}var o=n(0),a=r(o),l=n(1),s=r(l),u=a.default.command("wysiwyg",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");e.focus(),t.hasFormat("table")&&n.getSelectedCells().length?n.styleToSelectedCells(i):i(t);var r=t.getSelection();t.hasFormat("table")&&!s.default.isTextNode(r.commonAncestorContainer)&&(r.collapse(!0),t.setSelection(r))}});e.exports=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){"CODE"===u.default.getNodeName(e.startContainer.nextSibling)&&0===u.default.getTextLength(e.startContainer.nextSibling)&&$(e.startContainer.nextSibling).remove()}function o(e,t){if(!t.hasFormat("PRE")&&t.hasFormat("code"))t.changeFormat(null,{tag:"code"}),i(e.getSelection().cloneRange());else if(!t.hasFormat("a")&&!t.hasFormat("PRE")){t.hasFormat("b")?t.removeBold():t.hasFormat("i")&&t.removeItalic(),t.changeFormat({tag:"code"});var n=t.getSelection().cloneRange();n.setStart(n.endContainer,n.endOffset),n.collapse(!0),t.setSelection(n)}}var a=n(0),l=r(a),s=n(1),u=r(s),c=l.default.command("wysiwyg",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=e.componentManager.getManager("tableSelection"),i=tui.util.bind(o,null,e.getEditor());e.focus(),t.hasFormat("table")&&r.getSelectedCells().length?r.styleToSelectedCells(i):i(t),t.hasFormat("table")&&!u.default.isTextNode(n.commonAncestorContainer)&&(n.collapse(!0),t.setSelection(n))}});e.exports=c},function(e,t,n){"use strict";function r(e,t){var n=t.getEditor().getSelection().cloneRange();n.setStartBefore(e.find("div")[0].firstChild),n.collapse(!0),t.getEditor().setSelection(n)}function i(e,t){var n=t.componentManager.getManager("codeblock"),r=void 0,i=void 0;return e.collapsed?i=[$("<div><br></div>")[0]]:(r=e.extractContents(),i=tui.util.toArray(r.childNodes)),n.convertToCodeblock(i).innerHTML}var o=n(0),a=0,l=o.command("wysiwyg",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e,t){var n=e.getEditor(),o=n.getSelection().cloneRange();if(!n.hasFormat("PRE")&&!n.hasFormat("TABLE")){var l='data-te-codeblock class = "te-content-codeblock-'+a+'"';t&&(l+=' data-language="'+t+'"');var s=i(o,e);n.insertHTML("<pre "+l+">"+s+"</pre>"),r(e.get$Body().find(".te-content-codeblock-"+a),e),a+=1}e.focus()}});e.exports=l},function(e,t,n){"use strict";function r(e){var t=e.getEditor().getSelection();return $(t.startContainer).closest("li")}var i=n(0),o=i.command("wysiwyg",{name:"DecreaseDepth",exec:function(e){var t=r(e);if(t.length){e.getEditor().saveUndoState();var n=t.attr("class");e.getEditor().decreaseListLevel(),t=r(e),t.attr("class",n)}}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"Heading",exec:function(e,t){var n=e.getEditor();e.focus(),n.hasFormat("TABLE")||n.hasFormat("PRE")||n.modifyBlocks(function(e){return $(e).children("h1, h2, h3, h4, h5, h6, div").each(function(e,n){var r="<H"+t+" />",i=$(n);if(i.is("DIV"))i.wrap(r);else{var o=$(r);o.insertBefore(n),o.html(i.html()),i.remove()}}),e})}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),l=r(a),s=o.default.command("wysiwyg",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=void 0,i=void 0,o=void 0;if(n.collapsed&&!t.hasFormat("TABLE")&&!t.hasFormat("PRE")){r=l.default.getChildNodeByOffset(n.startContainer,n.startOffset),i=l.default.getTopNextNodeUnder(r,e.get$Body()[0]),i||(i=t.createDefaultBlock(),e.get$Body().append(i));var a=t.createElement("HR");t.modifyBlocks(function(e){return e.appendChild(a),e}),o=a.previousSibling,o&&l.default.isTextNode(o)&&0===l.default.getTextLength(o)&&a.parentNode.removeChild(o),n.selectNodeContents(i),n.collapse(!0),t.setSelection(n)}e.focus()}});e.exports=s},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"IncreaseDepth",exec:function(e){var t=e.getEditor().getSelection(),n=$(t.startContainer).closest("li"),r=void 0,i=void 0,o=void 0,a=n.prev();if(a.length&&n.length){var l=n.find("li").eq(0);e.getEditor().saveUndoState(),i=n.attr("class"),r=a.attr("class"),o=l.attr("class"),n.removeAttr("class"),a.removeAttr("class"),l.length&&!l.children("div").length&&l.removeAttr("class"),e.getEditor().increaseListLevel(),n.attr("class",i),a.attr("class",r),l.attr("class",o)}}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.hasFormat("i")||e.hasFormat("em")?e.changeFormat(null,{tag:"i"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.italic())}var o=n(0),a=r(o),l=n(1),s=r(l),u=a.default.command("wysiwyg",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=e.componentManager.getManager("tableSelection");e.focus(),t.hasFormat("table")&&r.getSelectedCells().length?r.styleToSelectedCells(i):i(t),t.hasFormat("table")&&!s.default.isTextNode(n.commonAncestorContainer)&&(n.collapse(!0),t.setSelection(n))}});e.exports=u},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=e.componentManager.getManager("list"),i=n,o=i.startContainer,a=i.startOffset,l=i.endContainer,s=i.endOffset;e.focus(),t.saveUndoState(n);for(var u=r.getLinesOfSelection(o,l),c=0;c<u.length;c+=1)this._changeFormatToOrderedListIfNeed(e,u[c]);n=t.getSelection(),n.setStart(o,a),n.setEnd(l,s),t.setSelection(n),t.saveUndoState(n)},_changeFormatToOrderedListIfNeed:function(e,t){var n=e.getEditor(),r=n.getSelection();n.hasFormat("TABLE")||n.hasFormat("PRE")||(r.setStart(t,0),r.collapse(!0),n.setSelection(r),n.hasFormat("LI")?(e.saveSelection(r),n.replaceParent(r.startContainer,"ul","ol"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeOrderedList()))}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"Paragraph",exec:function(e){var t=e.getEditor();e.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||t.modifyBlocks(function(e){var t=$(document.createDocumentFragment());return $(e).children().each(function(e,n){n.nodeName.match(/h\d/i)?t.append($(n).children()):n.nodeName.match(/ul|ol/i)?$(n).find("li").each(function(e,n){t.append($(n).children())}):t.append(n)}),t[0]})}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){e.hasFormat("S")?e.changeFormat(null,{tag:"S"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.strikethrough())}var o=n(0),a=r(o),l=n(1),s=r(l),u=a.default.command("wysiwyg",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=e.componentManager.getManager("tableSelection");e.focus(),t.hasFormat("table")&&r.getSelectedCells().length?r.styleToSelectedCells(i):i(t),t.hasFormat("table")&&!s.default.isTextNode(n.commonAncestorContainer)&&(n.collapse(!0),t.setSelection(n))}});e.exports=u},function(e,t,n){"use strict";function r(e,t){var n=e.getSelection();n.selectNodeContents(t.find("th")[0]),n.collapse(!0),e.setSelection(n)}function i(e,t){for(var n="<thead><tr>",r=0;e;)n+="<th>",t&&(n+=t[r],r+=1),n+="</th>",e-=1;return n+="</tr></thead>"}function o(e,t,n){for(var r="<tbody>",i=e,o=0;o<t;o+=1){r+="<tr>";for(var a=0;a<e;a+=1)r+="<td>",n&&(r+=n[i],i+=1),r+="</td>";r+="</tr>"}return r+="</tbody>"}var a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=l.default.command("wysiwyg",{name:"Table",exec:function(e,t,n,a){var l=e.getEditor(),s=e.componentManager.getManager("table").getTableIDClassName(),u=void 0;if(!l.getSelection().collapsed||l.hasFormat("TABLE")||l.hasFormat("PRE"))return void e.focus();u='<table class="'+s+'">',u+=i(t,a),u+=o(t,n-1,a),u+="</table>",l.insertHTML(u),e.focus(),a||r(l,e.get$Body().find("."+s))}});e.exports=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.startContainer;return t="TD"===c.default.getNodeName(t)||"TH"===c.default.getNodeName(t)?$(t):$(t).parentsUntil("tr")}function o(e){var t=e.index(),n=void 0;e.parents("table").find("tr").each(function(e,r){n="TBODY"===c.default.getNodeName(r.parentNode)?$("<td></td>"):$("<th></th>"),tui.util.browser.msie||n.append($("<br />")[0]),$(n).insertAfter($(r).children().eq(t))})}function a(e,t){var n=e.getSelection();n.selectNodeContents(t.next()[0]),n.collapse(!0),e.setSelection(n)}var l=n(0),s=r(l),u=n(1),c=r(u),d=s.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),r=void 0;e.focus(),t.hasFormat("TR")&&(t.saveUndoState(n),r=i(n),o(r),a(t,r))}});e.exports=d},function(e,t,n){"use strict";function r(e){var t=e.clone(),n=tui.util.browser.msie?"":"<br />";return t.find("td").html(n),t}function i(e,t){var n=e.getSelection();n.selectNodeContents(t.find("td")[0]),n.collapse(!0),e.setSelection(n)}var o=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(o),l=a.default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),o=void 0,a=void 0;e.focus(),t.hasFormat("TD")?(t.saveUndoState(n),o=$(n.startContainer).closest("tr"),a=r(o),a.insertAfter(o),i(t,a)):t.hasFormat("TH")&&(t.saveUndoState(n),o=$(n.startContainer).parents("thead").next("tbody").children("tr").eq(0),a=r(o),a.insertBefore(o),i(t,a))}});e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=n.isDivided||!1,i=n.startColumnIndex,o=n.endColumnIndex,a=e.find("tr").eq(0).find("td,th").length;e.find("tr").each(function(e,n){$(n).children("td,th").each(function(e,n){r&&(i<=e&&e<=a||e<=o)?$(n).attr("align",t):i<=e&&e<=o&&$(n).attr("align",t)})})}function o(e,t){var n=e.find("tr").eq(0).find("td,th").length,r=t.from,i=t.to,o=void 0,a=void 0,l=void 0;return r.row===i.row?(o=r.cell,a=i.cell):r.row<i.row&&(r.cell<=i.cell?(o=0,a=n-1):(o=r.cell,a=i.cell,l=!0)),{startColumnIndex:o,endColumnIndex:a,isDivided:l}}function a(e,t){var n=t.getSelectedCells(),r=void 0,i=void 0;if(n.length)r=t.getSelectionRangeFromTable(n.first().get(0),n.last().get(0));else{var o=e.startContainer;i=c.default.isTextNode(o)?$(o).parent("td,th")[0]:o,r=t.getSelectionRangeFromTable(i,i)}return r}var l=n(0),s=r(l),u=n(1),c=r(u),d=s.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),r=n.getSelection().cloneRange(),l=e.componentManager.getManager("tableSelection"),s=a(r,l);if(e.focus(),n.hasFormat("TR")){n.saveUndoState(r);var u=$(r.startContainer).parents("table");i(u,t,o(u,s))}l.removeClassAttrbuteFromAllCellsIfNeed()}});e.exports=d},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"RemoveTable",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(t.hasFormat("TABLE")){t.saveUndoState(n);$(n.startContainer).closest("table").remove()}e.focus()}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.startContainer;return t="TD"===c.default.getNodeName(t)||"TH"===c.default.getNodeName(t)?$(t):$(t).parentsUntil("tr")}function o(e){var t=e.index();e.parents("table").find("tr").each(function(e,n){$(n).children().eq(t).remove()})}function a(e,t,n){var r=t.get(0);if(t.length){var i=e.getSelection();i.selectNodeContents(t[0]),i.collapse(!0),e.setSelection(i),n.setLastCellNode(r)}}var l=n(0),s=r(l),u=n(1),c=r(u),d=s.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),r=e.componentManager.getManager("table"),l=$(n.startContainer).closest("table").find("thead tr th").length>1;if(e.focus(),n.collapse(!0),t.setSelection(n),t.hasFormat("TR",null,n)&&l){t.saveUndoState(n);var s=i(n),u=s.next().length?s.next():s.prev();o(s),a(t,u,r)}}});e.exports=d},function(e,t,n){"use strict";function r(e,t,n,r){var i=n.find("td").get(0);t.setStart(i,0),t.collapse(!0),r.setLastCellNode(i),e.setSelection(t)}function i(e,t,n){var r=n.find("tbody tr").length,i=$(e).parents("thead").length,o=t.from.row,a=t.to.row;return i&&(o+=1),(1===o||i)&&a===r&&(a-=1),n.find("tr").slice(o,a+1)}function o(e,t,n){var r=t.getSelectedCells(),o=void 0,a=void 0;if(r.length)o=t.getSelectionRangeFromTable(r.first().get(0),r.last().get(0)),a=i(r.first()[0],o,n);else{var l=$(e.startContainer).closest("td,th").get(0);o=t.getSelectionRangeFromTable(l,l),a=i(l,o,n)}return a}var a=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(a),s=l.default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),i=$(n.startContainer).parents("table"),a=e.componentManager.getManager("tableSelection"),l=e.componentManager.getManager("table"),s=o(n,a,i),u=i.find("tbody tr").length;if(e.focus(),(t.hasFormat("TD")||t.hasFormat("TABLE"))&&u>1){t.saveUndoState(n);var c=s.last().next()[0]?s.last().next():s.first().prev();c.length&&r(t,n,c,l),s.remove()}a.removeClassAttrbuteFromAllCellsIfNeed()}});e.exports=s},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"Task",keyMap:["CTRL+T","META+T"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=e.componentManager.getManager("task"),i=n,o=i.startContainer,a=i.endContainer,l=i.startOffset,s=i.endOffset;e.focus(),t.saveUndoState(n);for(var u=r.getLinesOfSelection(o,a),c=0;c<u.length;c+=1)this._changeFormatToTaskIfNeed(e,u[c]);n=t.getSelection(),n.setStart(o,l),n.setEnd(a,s),t.setSelection(n),t.saveUndoState(n)},_changeFormatToTaskIfNeed:function(e,t){var n=e.getEditor(),r=n.getSelection(),i=e.componentManager.getManager("task");n.hasFormat("TABLE")||n.hasFormat("PRE")||(r.setStart(t,0),r.collapse(!0),n.setSelection(r),n.hasFormat("li")||(e.unwrapBlockTag(),n.makeUnorderedList()),$(t).parents("li").first().hasClass("task-list-item")?i.unformatTask(t):i.formatTask(t))}});e.exports=o},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.command("wysiwyg",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),r=e.componentManager.getManager("list"),i=n,o=i.startContainer,a=i.endContainer,l=i.startOffset,s=i.endOffset;e.focus(),t.saveUndoState(n);for(var u=r.getLinesOfSelection(o,a),c=0;c<u.length;c+=1)this._changeFormatToUnorderedListIfNeed(e,u[c]);n=t.getSelection(),n.setStart(o,l),n.setEnd(a,s),t.setSelection(n),t.saveUndoState(n)},_changeFormatToUnorderedListIfNeed:function(e,t){var n=e.getEditor(),r=n.getSelection();n.hasFormat("TABLE")||n.hasFormat("PRE")||(r.setStart(t,0),r.collapse(!0),n.setSelection(r),n.hasFormat("LI")?(e.saveSelection(r),n.replaceParent(r.startContainer,"ol","ul"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeUnorderedList()))}});e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),s=r(l),u=n(109),c=r(u),d=n(113),f=r(d),h=n(116),g=r(h),p=n(20),v=r(p),m=n(21),y=r(m),_=n(112),b=r(_),k=n(114),w=r(k),C=n(111),E=r(C),T=n(110),M=r(T),S=n(94),x=r(S),I=n(43),O=r(I),N=n(117),A=r(N),B=n(53),L=r(B),P=n(96),R=r(P),D=O.default.getSharedInstance(),H=tui,F=H.util,j=/<(.+)>(<br>|<br \/>|<BR>|<BR \/>)<\/\1>/g,W=/(?:<br>|<br \/>|<BR>|<BR \/>)<\/(.+?)>/g,U=/\b(H[\d]|LI|P|BLOCKQUOTE|TD|PRE)\b/,V="undefined"!=typeof MutationObserver,q=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.componentManager=new L.default(this),this.eventManager=n,this.$editorContainerEl=t,this._height=0,this._silentChange=!1,this._keyEventHandlers={},this._managers={},this._options=$.extend({useCommandShortcut:!0},o),this._initEvent(),this._initDefaultKeyEventHandler(),this.debouncedPostProcessForChange=F.debounce(function(){return r.postProcessForChange()},0)}return a(e,[{key:"init",value:function(){var e=$("<div />");this.$editorContainerEl.append(e),this.editor=new x.default(e[0],{blockTag:"DIV",leafNodeNames:{HR:!1}}),this._options.useCommandShortcut||this.editor.blockCommandShortcuts(),this._clipboardManager=new c.default(this),this._initSquireEvent(),this._clipboardManager.init(),this.get$Body().addClass("tui-editor-contents"),this.$editorContainerEl.css("position","relative"),this.codeBlockGadget=new R.default({eventManager:this.eventManager,container:this.$editorContainerEl,wysiwygEditor:this})}},{key:"_preprocessForInlineElement",value:function(e){return e.replace(/<br>( *)<img/g,"<br><br>$1<img")}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._preprocessForInlineElement(t)}),this.eventManager.listen("wysiwygKeyEvent",function(t){return e._runKeyEventHandlers(t.data,t.keyMap)})}},{key:"addKeyEventHandler",value:function(e,t){t||(t=e,e="DEFAULT"),this._keyEventHandlers[e]||(this._keyEventHandlers[e]=[]),this._keyEventHandlers[e].push(t)}},{key:"removeKeyEventHandler",value:function(e,t){t||(t=e,e="DEFAULT");var n=this._keyEventHandlers[e];n&&(this._keyEventHandlers[e]=n.filter(function(e){return e!==t}))}},{key:"_runKeyEventHandlers",value:function(e,t){var n=this.getRange(),r=void 0,i=void 0;r=this._keyEventHandlers.DEFAULT,r&&F.forEachArray(r,function(r){return i=r(e,n,t)}),(r=this._keyEventHandlers[t])&&!1!==i&&F.forEachArray(r,function(r){return r(e,n,t)})}},{key:"_initSquireEvent",value:function(){var e=this,t=!1;this.getEditor().addEventListener("copy",function(t){e.eventManager.emit("copy",{source:"wysiwyg",data:t}),F.debounce(function(){e.eventManager.emit("copyAfter",{source:"wysiwyg",data:t})})()}),this.getEditor().addEventListener(F.browser.msie?"beforecut":"cut",function(t){e.eventManager.emit("cut",{source:"wysiwyg",data:t}),F.debounce(function(){e.eventManager.emit("cutAfter",{source:"wysiwyg",data:t})})()}),this.getEditor().addEventListener(F.browser.msie?"beforepaste":"paste",function(t){e.eventManager.emit("paste",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("dragover",function(e){return e.preventDefault(),!1}),this.getEditor().addEventListener("drop",function(t){return t.preventDefault(),e.eventManager.emit("drop",{source:"wysiwyg",data:t}),!1}),this.getEditor().addEventListener("input",F.debounce(function(){if(!e._silentChange&&e.isEditorValid()){var t={source:"wysiwyg"};e.eventManager.emit("changeFromWysiwyg",t),e.eventManager.emit("change",t),e.eventManager.emit("contentChangedFromWysiwyg",e)}else e._silentChange=!1;e.getEditor().preserveLastLine()},0)),this.getEditor().addEventListener("keydown",function(n){e.getEditor().getSelection().collapsed||(t=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:n}),e._onKeyDown(n)}),F.browser.firefox&&(this.getEditor().addEventListener("keypress",function(n){var r=n.keyCode;if(13===r||9===r){e.getEditor().getSelection().collapsed||(t=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:n}),e._onKeyDown(n)}}),this.getEditor().addEventListener("keyup",function(){var t=e.getRange();if(s.default.isTextNode(t.commonAncestorContainer)&&s.default.isTextNode(t.commonAncestorContainer.previousSibling)){var n=t.commonAncestorContainer.previousSibling.length,r=t.commonAncestorContainer;t.commonAncestorContainer.previousSibling.appendData(t.commonAncestorContainer.data),t.setStart(t.commonAncestorContainer.previousSibling,n+t.startOffset),t.collapse(!0),r.parentNode.removeChild(r),e.setRange(t),t.detach()}})),this.getEditor().addEventListener("keyup",function(n){t&&(e.debouncedPostProcessForChange(),t=!1),e.eventManager.emit("keyup",{source:"wysiwyg",data:n})}),this.$editorContainerEl.on("scroll",function(t){e.eventManager.emit("scroll",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("click",function(t){e.eventManager.emit("click",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mousedown",function(t){e.eventManager.emit("mousedown",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mouseover",function(t){e.eventManager.emit("mouseover",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mouseout",function(t){e.eventManager.emit("mouseout",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("mouseup",function(t){e.eventManager.emit("mouseup",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("contextmenu",function(t){e.eventManager.emit("contextmenu",{source:"wysiwyg",data:t})}),this.getEditor().addEventListener("focus",function(){e.eventManager.emit("focus",{source:"wysiwyg"})}),this.getEditor().addEventListener("blur",function(){e.eventManager.emit("blur",{source:"wysiwyg"})}),this.getEditor().addEventListener("pathChange",function(t){var n={bold:/(>B|>STRONG|^B$|^STRONG$)/.test(t.path),italic:/(>I|>EM|^I$|^EM$)/.test(t.path),strike:/(^S>|>S$|>S>|^S$)/.test(t.path),code:/CODE/.test(t.path),codeBlock:/PRE/.test(t.path),quote:/BLOCKQUOTE/.test(t.path),list:/LI(?!.task-list-item)/.test(e._getLastLiString(t.path)),task:/LI.task-list-item/.test(e._getLastLiString(t.path)),source:"wysiwyg"};e.eventManager.emit("stateChange",n)})}},{key:"_getLastLiString",value:function(e){var t=/LI[^UO]*$/.exec(e),n=void 0;if(t){n=o(t,1)[0]}else n="";return n}},{key:"_onKeyDown",value:function(e){var t=D.convert(e);e.keyCode&&(this.eventManager.emit("keyMap",{source:"wysiwyg",keyMap:t,data:e}),e.defaultPrevented||this.eventManager.emit("wysiwygKeyEvent",{keyMap:t,data:e}))}},{key:"_initDefaultKeyEventHandler",value:function(){var e=this;this.addKeyEventHandler("ENTER",function(t,n){e._isInOrphanText(n)&&e.defer(function(){e._wrapDefaultBlockToOrphanTexts(),e.breakToNewDefaultBlock(n,"before")}),e.defer(function(){e._scrollToRangeIfNeed()})}),this.addKeyEventHandler("TAB",function(t){var n=e.getEditor(),r=n.getSelection(),i=r.collapsed&&e._isCursorNotInRestrictedAreaOfTabAction(n),o=!r.collapsed&&s.default.isTextNode(r.commonAncestorContainer);return t.preventDefault(),!i&&!o||(n.insertPlainText("    "),!1)})}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){this.get$Body().contents().filter(this.findTextNodeFilter).each(function(e,t){t.nextSibling&&"BR"===t.nextSibling.tagName&&$(t.nextSibling).remove(),$(t).wrap("<div />")})}},{key:"_scrollToRangeIfNeed",value:function(){var e=this.getRange();this.getEditor().getCursorPosition(e).top-this.$editorContainerEl.offset().top>=this.get$Body().height()&&e.endContainer.scrollIntoView()}},{key:"_isInOrphanText",value:function(e){return e.startContainer.nodeType===Node.TEXT_NODE&&e.startContainer.parentNode===this.get$Body()[0]}},{key:"_wrapDefaultBlockTo",value:function(e){this.saveSelection(e),this._joinSplitedTextNodes(),this.restoreSavedSelection(),e=this.getRange();var t=e.startContainer,n=e.startOffset,r=this.getEditor().createDefaultBlock([e.startContainer]),i=s.default.getChildNodeByOffset(e.startContainer,e.startOffset);i?e.setStartBefore(i):e.selectNodeContents(e.startContainer),e.collapse(!0),e.insertNode(r),e.setStart(t,n),e.collapse(!0),this.setRange(e)}},{key:"findTextNodeFilter",value:function(){return this.nodeType===Node.TEXT_NODE}},{key:"_joinSplitedTextNodes",value:function(){var e=void 0,t=void 0,n=[];this.get$Body().contents().filter(this.findTextNodeFilter).each(function(r,i){e===i.previousSibling?(t.nodeValue+=i.nodeValue,n.push(i)):t=i,e=i}),$(n).remove()}},{key:"saveSelection",value:function(e){e||(e=this.getRange()),this.getEditor()._saveRangeToBookmark(e)}},{key:"restoreSavedSelection",value:function(){this.setRange(this.getEditor()._getRangeAndRemoveBookmark())}},{key:"reset",value:function(){this.setValue("")}},{key:"changeBlockFormatTo",value:function(e){this.getEditor().changeBlockFormatTo(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"makeEmptyBlockCurrentSelection",value:function(){var e=this;this.getEditor().modifyBlocks(function(t){return t.textContent||(t=e.getEditor().createDefaultBlock()),t})}},{key:"focus",value:function(){var e=this.scrollTop();this.editor.focus(),e!==this.scrollTop()&&this.scrollTop(e)}},{key:"blur",value:function(){this.editor.blur()}},{key:"remove",value:function(){this.getEditor().destroy(),this.editor=null,this.$body=null}},{key:"setHeight",value:function(e){if(this._height=e,"auto"===e)this.$editorContainerEl.css("overflow","visible"),this.$editorContainerEl.css("height","auto"),this.get$Body().css("min-height",0);else{this.$editorContainerEl.css("overflow","auto"),this.$editorContainerEl.css("height","100%"),this.$editorContainerEl.parent().height(e);var t=parseInt(this.$editorContainerEl.css("padding-top"),10)-parseInt(this.$editorContainerEl.css("padding-bottom"),10),n=parseInt(this.get$Body().css("margin-top"),10)-parseInt(this.get$Body().css("margin-bottom"),10);this.get$Body().css("min-height",e-n-t+"px")}}},{key:"setValue",value:function(e){e=this.eventManager.emitReduce("wysiwygSetValueBefore",e),this.editor.setHTML(e),this.eventManager.emit("wysiwygSetValueAfter",this),this.eventManager.emit("contentChangedFromWysiwyg",this),this.moveCursorToEnd(),this.getEditor().preserveLastLine(),this.getEditor().removeLastUndoStack(),this.getEditor().saveUndoState()}},{key:"insertText",value:function(e){this.editor.insertPlainText(e)}},{key:"getValue",value:function(){this._prepareGetHTML();var e=this.editor.getHTML();return e=e.replace(j,function(e,t){return"li"===t?e:"td"===t||"th"===t?"<"+t+"></"+t+">":"<br />"}),e=e.replace(W,"</$1>"),e=e.replace(/<div>/g,""),e=e.replace(/<\/div>/g,"<br />"),e=this.eventManager.emitReduce("wysiwygProcessHTMLText",e)}},{key:"_prepareGetHTML",value:function(){var e=this;this.getEditor().modifyDocument(function(){e._joinSplitedTextNodes(),e.eventManager.emit("wysiwygGetValueBefore",e)})}},{key:"postProcessForChange",value:function(){var e=this;this.getEditor().modifyDocument(function(){e.eventManager.emit("wysiwygRangeChangeAfter",e)})}},{key:"readySilentChange",value:function(){V&&!this.getEditor().isIgnoreChange()&&(this._silentChange=!0)}},{key:"getEditor",value:function(){return this.editor}},{key:"replaceSelection",value:function(e,t){this.getEditor().replaceSelection(e,t)}},{key:"replaceRelativeOffset",value:function(e,t,n){this.getEditor().replaceRelativeOffset(e,t,n)}},{key:"addWidget",value:function(e,t,n,r){var i=this.getEditor().getSelectionPosition(e,n,r),o=this.$editorContainerEl.offset();this.$editorContainerEl.append(t),$(t).css({position:"absolute",top:i.top-o.top,left:i.left-o.left})}},{key:"get$Body",value:function(){return this.getEditor().get$Body()}},{key:"hasFormatWithRx",value:function(e){return this.getEditor().getPath().match(e)}},{key:"breakToNewDefaultBlock",value:function(e,t){var n=this.editor.createDefaultBlock(),r=s.default.getChildNodeByOffset(e.startContainer,e.startOffset)||s.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),i=s.default.getParentUntil(r,this.get$Body()[0]);"before"===t?$(i).before(n):$(i).after(n),e.setStart(n,0),e.collapse(!0),this.setRange(e)}},{key:"replaceContentText",value:function(e,t,n){var r=$(e).html();$(e).html(r.replace(t,n))}},{key:"unwrapBlockTag",value:function(e){e||(e=function(e){return U.test(e)}),this.getEditor().changeBlockFormat(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"moveCursorToEnd",value:function(){this.getEditor().moveCursorToEnd(),this.scrollTop(this.$editorContainerEl.height()),this._correctRangeAfterMoveCursor("end")}},{key:"moveCursorToStart",value:function(){this.getEditor().moveCursorToStart(),this.scrollTop(0)}},{key:"scrollTop",value:function(e){return F.isUndefined(e)?this.$editorContainerEl.scrollTop():this.$editorContainerEl.scrollTop(e)}},{key:"_correctRangeAfterMoveCursor",value:function(e){var t=this.getRange(),n=this.get$Body().get(0);if("start"===e)for(;n.firstChild;)n=n.firstChild;else for(;n.lastChild;)n=n.lastChild;"BR"===n.tagName?t.setStartBefore(n):t.setStartAfter(n),t.collapse(!0),this.setRange(t)}},{key:"getRange",value:function(){return this.getEditor().getSelection().cloneRange()}},{key:"setRange",value:function(e){this.getEditor().setSelection(e)}},{key:"getTextObject",value:function(e){return new A.default(this,e)}},{key:"defer",value:function(e,t){var n=this,r=t||0;setTimeout(function(){n.isEditorValid()&&e(n)},r)}},{key:"isEditorValid",value:function(){return this.getEditor()&&$.contains(this.$editorContainerEl[0].ownerDocument,this.$editorContainerEl[0])}},{key:"_isCursorNotInRestrictedAreaOfTabAction",value:function(e){return!e.hasFormat("li")&&!e.hasFormat("blockquote")&&!e.hasFormat("table")}}],[{key:"factory",value:function(t,n,r){var i=new e(t,n,r);return i.init(),i.componentManager.addManager(f.default),i.componentManager.addManager(g.default),i.componentManager.addManager(y.default),i.componentManager.addManager(v.default),i.componentManager.addManager(b.default),i.componentManager.addManager(w.default),i.componentManager.addManager(E.default),i.componentManager.addManager(M.default),i}}]),e}();e.exports=q}]);