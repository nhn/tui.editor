/*!
 * tui-editor
 * @version 0.13.0-a
 * @author Sungho Kim <shirenbeat@gmail.com>
 * @license MIT
 */
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="dist/",t(t.s=74)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(23),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=tui,s=l.util,u=/Mac/.test(navigator.platform),c=u?1:0,f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this._command=new s.Map,this._mdCommand=new s.Map,this._wwCommand=new s.Map,this._options=$.extend({useCommandShortcut:!0},n),this.base=t,this.keyMapCommand={},this._initEvent()}return a(e,[{key:"_addCommandBefore",value:function(e){var t={command:e};return this.base.eventManager.emit("addCommandBefore",t),t.command||e}},{key:"addCommand",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];r.length&&(t=e.command.apply(e,[t].concat(r))),t=this._addCommandBefore(t);var o=t.getName(),i=void 0;return t.isMDType()?i=this._mdCommand:t.isWWType()?i=this._wwCommand:t.isGlobalType()&&(i=this._command),i.set(o,t),t.keyMap&&(this.keyMapCommand[t.keyMap[c]]=o),t}},{key:"_initEvent",value:function(){var e=this;this.base.eventManager.listen("command",function(){e.exec.apply(e,arguments)}),this.base.eventManager.listen("keyMap",function(t){if(e._options.useCommandShortcut){var n=e.keyMapCommand[t.keyMap];n&&(t.data.preventDefault(),e.exec(n))}})}},{key:"exec",value:function(e){var t=void 0,n=void 0,r=this.base;if(t=this._command.get(e),t||(this.base.isMarkdownMode()?(t=this._mdCommand.get(e),r=this.base.mdEditor):(t=this._wwCommand.get(e),r=this.base.wwEditor)),t){for(var a,o=arguments.length,i=Array(o>1?o-1:0),l=1;l<o;l++)i[l-1]=arguments[l];i.unshift(r),n=(a=t).exec.apply(a,i)}return n}}]),e}();f.command=function(e,t){var n=i.default.factory(e,t.name,t.keyMap);return s.extend(n,t),n},e.exports=f},function(e,t,n){"use strict";var r=/\u200B/g,a=tui,o=a.util,i=function(e){return e&&e.nodeType===Node.TEXT_NODE},l=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},s=function(e){return l(e)?e.tagName:"TEXT"},u=function(e){var t=void 0;return l(e)?t=e.textContent.replace(r,"").length:i(e)&&(t=e.nodeValue.replace(r,"").length),t},c=function(e){var t=void 0;return l(e)?t=e.childNodes.length:i(e)&&(t=e.nodeValue.replace(r,"").length),t},f=function(e){var t=e.parentNode.childNodes,n=void 0,r=void 0,a=void 0;for(n=0,r=t.length;n<r;n+=1)if(t[n]===e){a=n;break}return a},d=function(e,t){var n=void 0;return i(e)?n=e:e.childNodes.length&&t>=0&&(n=e.childNodes[t]),n},h=function(e,t,n){for(var r=e+"Sibling",a=void 0,o=void 0;t&&!t[r]&&(a=s(t.parentNode))!==n&&"BODY"!==a;)t=t.parentNode;return t[r]&&(o=t[r]),o},g=function(e,t,n){return t>0?d(e,t-1):h("previous",e,n)},p=function(e,t){for(var n=void 0;e.parentNode&&!t(e.parentNode);)e=e.parentNode;return t(e.parentNode)&&(n=e),n},v=function(e,t){return o.isString(t)?p(e,function(e){return t===s(e)}):p(e,function(e){return t===e})},m=function(e,t,n){var r=e+"Sibling",a=void 0;return t=v(t,n),t&&t[r]&&(a=t[r]),a},b=function(e,t){return m("previous",e,t)},y=function(e,t){return m("next",e,t)},w=function(e){return v(e,"BODY")},_=function(e){for(e=e.previousSibling||e.parentNode;!i(e)&&"BODY"!==s(e);)if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode;return"BODY"===s(e)&&(e=null),e},k=function(e,t,n){var r=[],a="",i=0,l=void 0;if(!t.length)return r;for(var s=t.shift(),u=document.createTreeWalker(e,4,null,!1);u.nextNode();){for(a=u.currentNode.nodeValue||"",n&&(a=n(a)),l=i+a.length;l>=s;){if(r.push({container:u.currentNode,offsetInContainer:s-i,offset:s}),!t.length)return r;s=t.shift()}i=l}do{r.push({container:u.currentNode,offsetInContainer:a.length,offset:s}),s=t.shift()}while(!o.isUndefined(s));return r},x=function(e){var t={};t.tagName=e.nodeName,e.id&&(t.id=e.id);var n=e.className.trim();return n&&(t.className=n),t},T=function(e,t){for(var n=[];e&&e!==t;)l(e)&&n.unshift(x(e)),e=e.parentNode;return n},C=function(e,t){var n=!0;return tui.util.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(n=!1),n?e.nextElementSibling:e.previousElementSibling)},M=function(e,t,n){var r=!0,a=null,o=void 0,i=void 0,l=void 0,u=void 0,c=void 0,d=void 0;return tui.util.isUndefined(t)||"next"!==t&&"previous"!==t?null:("previous"===t&&(r=!1),e?(o=$(e),r?(l=o.parent().next(),u=o.parents("thead"),c=u[0]&&u.next(),d=c&&"TBODY"===s(c[0]),i=0):(l=o.parent().prev(),u=o.parents("tbody"),c=u[0]&&u.prev(),d=c&&"THEAD"===s(c[0]),i=e.parentNode.childNodes.length-1),!tui.util.isUndefined(n)&&n||(i=f(e)),l[0]?a=l.children("td,th")[i]:u[0]&&d&&(a=c.find("td,th")[i]),a):null)};e.exports={getNodeName:s,isTextNode:i,isElemNode:l,getTextLength:u,getOffsetLength:c,getPrevOffsetNodeUntil:g,getNodeOffsetOfParent:f,getChildNodeByOffset:d,getTopPrevNodeUnder:b,getTopNextNodeUnder:y,getParentUntil:v,getTopBlockNode:w,getPrevTextNode:_,findOffsetNode:k,getPath:T,getNodeInfo:x,getTableCellByDirection:C,getSiblingRowCellByDirection:M}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){var r=$(e),a=r.attr("colspan"),o=r.attr("rowspan"),i=e.nodeName;if("TH"!==i&&"TD"!==i)return null;var l={nodeName:e.nodeName,colspan:a?parseInt(a,10):1,rowspan:o?parseInt(o,10):1,content:r.html(),elementIndex:{rowIndex:t,colIndex:n}};return"TH"===e.nodeName&&e.align&&(l.align=e.align),l}function o(e,t,n,r){var a=t.colspan,o=t.rowspan,i=t.nodeName,l=a>1,s=o>1;if(l||s){var u=n+o,c=r+a;_.range(n,u).forEach(function(t){e[t]=e[t]||[],_.range(r,c).forEach(function(a){var o={nodeName:i};t===n&&a===r||(l&&(o.colMergeWith=r),s&&(o.rowMergeWith=n),e[t][a]=o)})})}}function i(e){var t=[];return e.find("tr").each(function(e,n){var r=0;t[e]=t[e]||[],$(n).children().each(function(n,i){var l=a(i,e,n);if(l){for(var s=n+r;t[e][s];)s+=1,r+=1;t[e][s]=l,o(t,l,e,s)}})}),e[0].className&&(t.className=e[0].className),t}function l(e){var t=[];return e.forEach(function(e,n){var r=[];e.forEach(function(e,t){_.isUndefined(e.colMergeWith)&&_.isUndefined(e.rowMergeWith)&&r.push({rowIndex:n,colIndex:t})}),t.push(r)}),t}function s(e){var t=y(e,1),n=t[0];return n.map(function(e){return _.isExisty(e.colMergeWith)?n[e.colMergeWith].align:e.align})}function u(e,t){var n=s(e),r=t.map(function(t){return t.map(function(t){var r=t.rowIndex,a=t.colIndex;return _.extend({align:n[a]},e[r][a])})});return e.className&&(r.className=e.className),r}function c(e,t,n){return{nodeName:n||"TD",colspan:1,rowspan:1,content:k,elementIndex:{rowIndex:e,colIndex:t}}}function f(e){var t=e.closest("tr"),n=t.prevAll().length;return"TBODY"===t.parent()[0].nodeName&&(n+=1),n}function d(e){return e.closest("td, th").prevAll().length}function h(e,t){var n=f(t),r=d(t);return e[n][r]}function g(e,t,n){var r=e[t][n],a=t;return r.rowspan>1&&(a+=r.rowspan-1),a}function p(e,t,n){var r=e[t][n],a=n;return r.colspan>1&&(a+=r.colspan-1),a}function v(e,t,n){var r=e[t][n];return t=_.isExisty(r.rowMergeWith)?r.rowMergeWith:t,n=_.isExisty(r.colMergeWith)?r.colMergeWith:n,e[t][n].elementIndex}function m(e,t){e.forEach(function(e,n){var r=e.length,a=y(e,1),o=a[0].nodeName;_.range(r,t).forEach(function(t){e.push(c(n,t,o))})})}function b(e){var t=y(e,1),n=t[0],a=n.length,o=!0;if(!a&&e[1])_.range(0,e[1].length).forEach(function(e){n.push(c(0,e,"TH"))});else if("TH"!==e[0][0].nodeName){var i,l=_.range(0,a).map(function(e){return c(0,e,"TH")});(i=[]).concat.apply(i,r(e)).forEach(function(e){e.elementIndex&&(e.elementIndex.rowIndex+=1)}),e.unshift(l)}else if(1===e.length){var s=_.range(0,a).map(function(e){return c(1,e,"TD")});e.push(s)}else o=!1;return o}Object.defineProperty(t,"__esModule",{value:!0});var y=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.createTableData=i,t.createCellIndexData=l;var w=tui,_=w.util,k=tui.util.browser.msie?"":"<br>";t.default={createTableData:i,createCellIndexData:l,createRenderData:u,findElementRowIndex:f,findElementColIndex:d,findCellIndex:h,createBasicCell:c,findRowMergedLastIndex:g,findColMergedLastIndex:p,findElementIndex:v,stuffCellsIntoIncompleteRow:m,addTbodyOrTheadIfNeed:b}},function(e,t,n){"use strict";function r(e,t,n){var r=c.default.createCellIndexData(e),a=c.default.findCellIndex(r,t),o=c.default.findCellIndex(r,n),i=void 0,l=void 0,s=void 0,u=void 0;return a.rowIndex>o.rowIndex?(i=o.rowIndex,l=a.rowIndex):(i=a.rowIndex,l=o.rowIndex),a.colIndex>o.colIndex?(s=o.colIndex,u=a.colIndex):(s=a.colIndex,u=o.colIndex),{start:{rowIndex:i,colIndex:s},end:{rowIndex:l,colIndex:u}}}function a(e,t,n){var r=t[n].rowIndex,a=e[r];d.range(t.start.colIndex,t.end.colIndex+1).forEach(function(n){var o=a[n],i=o.rowMergeWith,l=-1;d.isExisty(i)?(i<t.start.rowIndex&&(t.start.rowIndex=i),l=i+e[i][n].rowspan-1):o.rowspan>1&&(l=r+o.rowspan-1),l>t.end.rowIndex&&(t.end.rowIndex=l)})}function o(e,t,n,r){var a=e[n],o=a[r],i=o.colMergeWith,l=-1;d.isExisty(i)?(i<t.start.colIndex&&(t.start.colIndex=i),l=i+a[i].colspan-1):o.colspan>1&&(l=r+o.colspan-1),l>t.end.colIndex&&(t.end.colIndex=l)}function i(e,t){for(var n="";n!==JSON.stringify(t);)n=JSON.stringify(t),a(e,t,"start"),a(e,t,"end"),d.range(t.start.rowIndex,t.end.rowIndex+1).forEach(function(n){o(e,t,n,t.start.colIndex),o(e,t,n,t.end.colIndex)});return t}function l(e,t,n){return i(e,r(e,t,n))}function s(e,t,n){var r=c.default.createCellIndexData(e),a={};if(t.length){var o=c.default.findCellIndex(r,t.first()),i=d.extend({},o);t.each(function(t,n){var a=c.default.findCellIndex(r,$(n)),o=e[a.rowIndex][a.colIndex],l=a.rowIndex+o.rowspan-1,s=a.colIndex+o.colspan-1;i.rowIndex=Math.max(i.rowIndex,l),i.colIndex=Math.max(i.colIndex,s)}),a.start=o,a.end=i}else{var l=c.default.findCellIndex(r,n);a.start=l,a.end=d.extend({},l)}return a}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),c=function(e){return e&&e.__esModule?e:{default:e}}(u),f=tui,d=f.util;t.default={findSelectionRange:l,getTableSelectionRange:s}},function(e,t,n){"use strict";function r(e){var t=e.colspan>1?' colspan="'+e.colspan+'"':"";return t+=e.rowspan>1?' rowspan="'+e.rowspan+'"':"",t+=e.align?' align="'+e.align+'"':"","<"+e.nodeName+t+">"+e.content+"</"+e.nodeName+">"}function a(e,t){var n="";return e.length&&(n=e.map(function(e){return"<tr>"+e.map(r).join("")+"</tr>"}).join(""),n="<"+t+">"+n+"</"+t+">"),n}function o(e){var t=[e[0]],n=e.slice(1),r=a(t,"THEAD"),o=a(n,"TBODY");return"<table"+(e.className?' class="'+e.className+'"':"")+">"+(r+o)+"</renderData>"}function i(e,t){var n=u.default.createCellIndexData(t),r=u.default.createRenderData(t,n),a=$(o(r));return e.replaceWith(a),a}function l(e,t,n){t.selectNodeContents(n),t.collapse(!0),e.setSelection(t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={createTableHtml:o,replaceTable:i,focusToCell:l}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,i=o.util,l=void 0,s="en_US",u=function(){function e(){r(this,e),this._code=s,this._langs=new i.Map}return a(e,[{key:"setCode",value:function(e){this._code=e}},{key:"setLang",value:function(e,t){var n=this;e=[].concat(e),e.forEach(function(e){if(n._langs.has(e)){var r=n._langs.get(e);n._langs.set(e,i.extend(r,t))}else n._langs.set(e,t)})}},{key:"get",value:function(e,t){t||(t=this._code);var n=this._langs.get(t);n||(n=this._langs.get(s));var r=n[e];if(!r)throw new Error('There is no text key "'+e+'" in '+t);return r}}],[{key:"getSharedInstance",value:function(){return l||(l=new e),l}}]),e}();t.I18n=u,t.default=u.getSharedInstance()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,i=o.util,l=function(){function e(){r(this,e),this.exts=new i.Map}return a(e,[{key:"defineExtension",value:function(e,t){this.exts.set(e,t)}},{key:"applyExtension",value:function(e,t){var n=this;t&&t.forEach(function(t){var r=i.isObject(t),a=r?t.name:t;if(n.exts.has(a)){var o=n.exts.get(a);r?o(e,t):o(e)}})}}]),e}();e.exports=new l},,,function(e,t,n){"use strict";function r(e){function t(e){var t=void 0;try{if(!plantumlEncoder)throw new Error("plantuml-encoder dependency required");t='<img src="'+i+plantumlEncoder.encode(e)+'" />'}catch(e){t="Error occurred on encoding uml: "+e.message}return t}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.convertor.getCodeBlockManager(),a=n.rendererURL,i=void 0===a?o:a,l=n.languages;(void 0===l?["plantuml","uml"]:l).forEach(function(e){return r.setReplacer(e,t)})}var a=n(6),o="http://www.plantuml.com/plantuml/png/";(function(e){return e&&e.__esModule?e:{default:e}})(a).default.defineExtension("plantUML",r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){e.eventManager.addEventType("colorButtonClicked"),e.getUI().toolbar.addButton({className:"tui-color",event:"colorButtonClicked",tooltip:d.default.get("Text color")},2);var n=e.getUI().toolbar.$el.find("button.tui-color"),r=$("<div />"),a=$('<button type="button" class="te-apply-button">입력</button>'),o={container:r[0]};t&&(o.preset=t);var i=tui.component.colorpicker.create(o),l=i.getColor();r.append(a);var s=e.getUI().createPopup({header:!1,title:!1,content:r,className:"tui-popup-color",$target:e.getUI().$el,css:{width:"auto",position:"absolute"}});e.eventManager.listen("focus",function(){s.hide()}),e.eventManager.listen("colorButtonClicked",function(){e.eventManager.emit("closeAllPopup"),s.isShow()?s.hide():(s.$el.css({top:n.position().top+n.height()+5,left:n.position().left}),s.show(),i.slider.toggle(!0))}),e.eventManager.listen("closeAllPopup",function(){s.hide()}),e.eventManager.listen("removeEditor",function(){i.off("selectColor")}),i.on("selectColor",function(t){l=t.color,"palette"===t.origin&&(e.exec("color",l),s.hide())}),s.$el.find(".te-apply-button").on("click",function(){e.exec("color",l)})}function o(e,t){return"{color:"+t+"}"+e+"{color}"}function i(e,t){return'<span style="color:'+t+'">'+e+"</span>"}function l(e){return e.replace(v,function(e,t,n,r){return t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10),"#"+(s(t.toString(16))+s(n.toString(16))+s(r.toString(16)))})}function s(e){return"0"===e?"00":e}var u=n(6),c=r(u),f=n(5),d=r(f),h=/\{color:(.+?)}(.*?)\{color}/g,g=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)/g,p=/<span (?:class="colour" )?style="color:(.+?)"(?: class="colour")?>(.*?)<\/span>/g,v=/rgb\((\d+)[, ]+(\d+)[, ]+(\d+)\)/g;c.default.defineExtension("colorSyntax",function(e){var t=e.options.colorSyntax,n=void 0===t?{}:t,r=n.preset,s=n.useCustomSyntax,u=void 0!==s&&s;e.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return u?e.replace(h,function(e,t,n){return i(n,t)}):e}),e.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){var t=u?p:g;return e.replace(t,function(e,t,n){return t.match(v)&&(t=l(t)),u?o(n,t):e.replace(/ ?class="colour" ?/g," ").replace(v,t)})}),e.isViewOnly()||"default"!==e.getUI().name||(e.addCommand("markdown",{name:"color",exec:function(e,t){var n=e.getEditor();t&&(u?n.replaceSelection(o(n.getSelection(),t)):n.replaceSelection(i(n.getSelection(),t)),e.focus())}}),e.addCommand("wysiwyg",{name:"color",exec:function(e,t){var n=e.getEditor();t&&(n.hasFormat("PRE")||("#181818"===t?n.changeFormat(null,{class:"colour",tag:"span"}):n.setTextColour(t)),e.focus())}}),a(e,r))})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var a=n(6),o=r(a),i=n(25),l=r(i),s=n(26),u=r(s),c=n(28),f=r(c),d=n(27),h=r(d),g=n(24),p=r(g),v=tui,m=v.util,b=/(\n)|(\r\n)|(\r)/g;o.default.defineExtension("mark",function(e){function t(){return e.isViewOnly()?s:e.isWysiwygMode()?o:i}function n(){var n=t();r.getAll().forEach(function(e){n.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",r.getAll())}var r=new l.default,a=new u.default(r),o=void 0,i=void 0,s=void 0;e.eventManager.addEventType("markerUpdated"),e.isViewOnly()?s=new h.default(e.preview):(o=new f.default(e.getSquire()),i=new p.default(e.getCodeMirror())),$(window).on("resize",n),e.on("removeEditor",function(){$(window).off("resize",n)}),e.on("setMarkdownAfter",function(){var e=t();a.resetContent(e.getTextContent())}),e.setValueWithMarkers=function(n,o){var l=void 0;return r.resetMarkers(),o.forEach(function(e){r.addMarker(e.start,e.end,e.id)}),e.setValue(n),a.resetContent(n.replace(b,"")),e.isViewOnly()||e.isWysiwygMode()?(l=t(),a.updateMarkersByContent(l.getTextContent())):l=i,r.getAll().forEach(function(e){l.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",r.getAll()),r.getAll()},e.getMarker=function(e){return r.getMarker(e)},e.getMarkersAll=function(){return r.getAll()},e.removeMarker=function(e){return r.removeMarker(e)},e.exportMarkers=function(){var n=void 0;return e.isMarkdownMode()?n=r.getMarkersData():(e.isViewOnly()||e.isWysiwygMode())&&(a.updateMarkersByContent(e.getValue().replace(b,"")),n=r.getMarkersData(),a.updateMarkersByContent(t().getTextContent())),n},e.selectMarker=function(n){var r=t(),a=e.getMarker(n);a&&r.selectOffsetRange(a.start,a.end)},e.addMarker=function(n,a,o){var i=void 0,l=t();return o?(i={start:n,end:a},i=l.updateMarkerWithExtraInfo(i)):(o=n,i=l.getMarkerInfoOfCurrentSelection()),i&&(i.id=o,i=r.addMarker(i),r.sortBy("end"),e.eventManager.emit("markerUpdated",[i])),i},e.clearSelect=function(){t().clearSelect()},e.isViewOnly()||(e.on("changeMode",function(){e._updateMarkers()}),e.on("change",m.debounce(function(){e._updateMarkers()},100)),e._updateMarkers=function(){var n=t();r.getAll().length&&(a.updateMarkersByContent(n.getTextContent()),r.getAll().forEach(function(e){n.updateMarkerWithExtraInfo(e)}),e.eventManager.emit("markerUpdated",r.getAll()))})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){e.addCommand(O.default),e.addCommand(R.default)}function o(e){e.removeManager("table"),e.removeManager("tableSelection"),e.addManager(b.default),e.addManager(w.default)}function i(e,t){var n=$("<div>"+e+"</div>"),r=n.find("table");return r.length&&(r.get().forEach(function(e){var n=t(e);$(e).replaceWith(n)}),e=n.html()),e}function l(e){var t=e.command;if(t.isWWType())switch(t.getName()){case"AddRow":e.command=k.default;break;case"AddCol":e.command=T.default;break;case"RemoveRow":e.command=M.default;break;case"RemoveCol":e.command=I.default;break;case"AlignCol":e.command=N.default}}function s(e){e.listen("convertorAfterMarkdownToHtmlConverted",function(e){return i(e,d.default)}),e.listen("convertorBeforeHtmlToMarkdownConverted",function(e){return i(e,g.default)}),e.listen("addCommandBefore",l)}var u=n(6),c=r(u),f=n(34),d=r(f),h=n(38),g=r(h),p=n(39),v=r(p),m=n(41),b=r(m),y=n(42),w=r(y),_=n(32),k=r(_),x=n(31),T=r(x),C=n(36),M=r(C),E=n(35),I=r(E),S=n(33),N=r(S),A=n(30),O=r(A),D=n(40),R=r(D),B=n(37),P=r(B);n(29),c.default.defineExtension("tableExtension",function(e){var t=e.eventManager;if(e.toMarkOptions=e.toMarkOptions||{},e.toMarkOptions.renderer=v.default,s(t),!e.isViewOnly()){var n=e.wwEditor.componentManager,r=e._ui.popupTableUtils;a(e),o(n),e._ui.popupTableUtils&&P.default.updateContextMenu(r,t,n.getManager("tableSelection"))}})},function(e,t,n){"use strict";var r=/^\s*\* \[[xX ]\] [^\n]*/gm,a=/^\s*\* \[[xX]\] [^\n]*/gm;n(6).defineExtension("taskCounter",function(e){e.getTaskCount=function(){var t=void 0,n=void 0;return e.isViewOnly()?n=e.preview.$el.find(".task-list-item").length:e.isMarkdownMode()?(t=e.mdEditor.getValue().match(r),n=t?t.length:0):n=e.wwEditor.get$Body().find(".task-list-item").length,n},e.getCheckedTaskCount=function(){var t=void 0,n=void 0;return e.isViewOnly()?n=e.preview.$el.find(".task-list-item.checked").length:e.isMarkdownMode()?(t=e.mdEditor.getValue().match(a),n=t?t.length:0):n=e.wwEditor.get$Body().find(".task-list-item.checked").length,n}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=window,l=i.hljs,s=function(){function e(){r(this,e),this._supportedLanguages=l.listLanguages(),this._replacers={}}return o(e,[{key:"setReplacer",value:function(e,t){this._replacers[e]=t,this._supportedLanguages.indexOf(e)<0&&this._supportedLanguages.push(e)}},{key:"getReplacer",value:function(e){return this._replacers[e]}},{key:"setSupportedLanguages",value:function(e){this._supportedLanguages=e}},{key:"getSupportedLanguages",value:function(){return this._supportedLanguages}},{key:"createCodeBlockHtml",value:function(e,t){var n=this.getReplacer(e);return n?n(t):l.getLanguage(e)?l.highlight(e,t).value:a(t,!1)}}],[{key:"getHighlightJSLanguages",value:function(){return l.listLanguages()}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(17),l=r(i),s=n(50),u=r(s),c=n(46),f=r(c),d=n(47),h=r(d),g=n(45),p=r(g),v=n(49),m=r(v),b=n(48),y=r(b),w=n(14),_=r(w),k=window,x=k.toMark,T=k.markdownit,C=function(){function e(t){a(this,e),this.eventManager=t,this._initMarkdownIt()}return o(e,[{key:"_initMarkdownIt",value:function(){var e=new _.default;this._codeBlockManager=e;var t=new T({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-",highlight:function(t,n){return e.createCodeBlockHtml(n,t)}}),n=new T({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-"});t.block.ruler.at("table",m.default,["paragraph","reference"]),t.block.ruler.at("code",h.default),t.block.ruler.at("blockquote",p.default,["paragraph","reference","list"]),t.block.ruler.at("html_block",y.default,["paragraph","reference","blockquote"]),t.use(u.default),t.use(f.default),this._markdownitHighlight=t,n.block.ruler.at("table",m.default,["paragraph","reference"]),n.block.ruler.at("code",h.default),n.block.ruler.at("blockquote",p.default,["paragraph","reference","list"]),n.block.ruler.at("html_block",y.default,["paragraph","reference","blockquote"]),n.use(u.default),n.use(f.default),this._markdownit=n}},{key:"_markdownToHtmlWithCodeHighlight",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=this._markdownitHighlight.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_markdownToHtml",value:function(e){e=e.replace(/<br>/gi,"<br data-tomark-pass>");for(var t=/(<img[^>]*)(onerror\s*=\s*[\"']?[^\"']*[\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");var n=this._markdownit.render(e);return n=this._removeBrToMarkPassAttributeInCode(n)}},{key:"_removeBrToMarkPassAttributeInCode",value:function(e){var t=$("<div />");return t.html(e),t.find("code, pre").each(function(e,t){var n=$(t);n.html(n.html().replace(/&lt;br data-tomark-pass&gt;/,"&lt;br&gt;"))}),e=t.html()}},{key:"toHTMLWithCodeHightlight",value:function(e){var t=this._markdownToHtmlWithCodeHighlight(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"toHTML",value:function(e){var t=this._markdownToHtml(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"initHtmlSanitizer",value:function(){this.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return(0,l.default)(e,!0)})}},{key:"toMarkdown",value:function(e,t){var n=[];e=this.eventManager.emitReduce("convertorBeforeHtmlToMarkdownConverted",e);var r=x(this._appendAttributeForBrIfNeed(e),t);return r=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",r),tui.util.forEach(r.split("\n"),function(e,t){var r=/^\|[^|]*\|/gi;/`[^`]*<br>[^`]*`/gi.test(e)||r.test(e)||(e=e.replace(/<br>/gi,"<br>\n")),n[t]=e}),n.join("\n")}},{key:"_appendAttributeForBrIfNeed",value:function(e){var t=/<br>/gi,n=/<br \/><br \/>/gi,r=/<br data-tomark-pass \/><br \/>(.)/gi,a=/([^>]|<\/b>|<\/i>|<\/s>|<img [^>]*>)/,o=/<br data-tomark-pass \/><br data-tomark-pass \/>/,i=new RegExp(a.source+o.source,"g");e=e.replace(t,"<br />"),e=e.replace(n,"<br data-tomark-pass /><br data-tomark-pass />");var l=document.createElement("div"),s=$(l);return s.html(e),s.find("pre br,code br").each(function(e,t){t.hasAttribute("data-tomark-pass")&&t.removeAttribute("data-tomark-pass")}),e=s.html().replace(/<br data-tomark-pass="">/gi,"<br data-tomark-pass />"),e=e.replace(t,"<br />"),e=e.replace(r,"<br data-tomark-pass /><br data-tomark-pass />$1"),e=e.replace(i,"$1<br /><br />")}},{key:"getMarkdownHighlightRenderer",value:function(){return this._markdownitHighlight}},{key:"setMarkdownHighlightRenderer",value:function(e){e.set({html:!0,breaks:!0,quotes:"“”‘’",langPrefix:"lang-"}),this._markdownitHighlight=e}},{key:"getCodeBlockManager",value:function(){return this._codeBlockManager}}]),e}();e.exports=C},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,i=o.util,l=["previewBeforeHook","previewRenderAfter","previewNeedsRefresh","addImageBlobHook","setMarkdownAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeModeBefore","changeMode","changePreviewStyle","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","openPopupCodeBlockLanguages","openPopupCodeBlockEditor","closePopupCodeBlockLanguages","closePopupCodeBlockEditor","closeAllPopup","command","addCommandBefore","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorBeforeHtmlToMarkdownConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","pasteBefore","scroll","click","mousedown","mouseover","mouseout","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","copy","copyBefore","copyAfter","cut","cutAfter","drop","show","hide"],s=function(){function e(){r(this,e),this.events=new i.Map,this.TYPE=new i.Enum(l)}return a(e,[{key:"listen",value:function(e,t){var n=this._getTypeInfo(e),r=this.events.get(n.type)||[];if(!this._hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),r.push(t),this.events.set(n.type,r)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),a=this._getTypeInfo(r),o=this.events.get(a.type),l=void 0;return o&&i.forEach(o,function(e){var n=e.apply(void 0,t);i.isUndefined(n)||(l=l||[],l.push(n))}),l}},{key:"emitReduce",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),a=this.events.get(r);return a&&i.forEach(a,function(e){var n=e.apply(void 0,t);i.isFalsy(n)||(t[0]=n)}),t[0]}},{key:"_getTypeInfo",value:function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}}},{key:"_hasEventType",value:function(e){return!i.isUndefined(this.TYPE[this._getTypeInfo(e).type])}},{key:"addEventType",value:function(e){if(this._hasEventType(e))throw new Error("There is already have event type "+e);this.TYPE.set(e)}},{key:"removeEventHandler",value:function(e,t){var n=this,r=this._getTypeInfo(e),a=r.type,o=r.namespace;a&&t?this._removeEventHandlerWithHandler(a,t):a&&!o?this.events.delete(a):!a&&o?this.events.forEach(function(e,t){n._removeEventHandlerWithTypeInfo(t,o)}):a&&o&&this._removeEventHandlerWithTypeInfo(a,o)}},{key:"_removeEventHandlerWithHandler",value:function(e,t){var n=this.events.get(e)||[],r=n.indexOf(t);r>=0&&n.splice(r,1)}},{key:"_removeEventHandlerWithTypeInfo",value:function(e,t){var n=[],r=this.events.get(e);r&&(r.map(function(e){e.namespace!==t&&n.push(e)}),this.events.set(e,n))}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){var n=$("<div />");return e=e.replace(/<!--[\s\S]*?-->/g,""),n.append(e),a(n),o(n),i(n,t)}function a(e){e.find("script, iframe, textarea, form, button, select, meta, style, link, title").remove()}function o(e){e.find("*").each(function(e,t){var n=s.toArray(t.attributes).filter(function(e){var t=e.name.match(u),n=e.name.match(c);return!t&&!n});s.forEachArray(n,function(e){t.attributes.removeNamedItem(e.name)})})}function i(e,t){var n=void 0;if(t)n=e[0].innerHTML;else{for(var r=document.createDocumentFragment(),a=tui.util.toArray(e[0].childNodes),o=a.length,i=0;i<o;i+=1)r.appendChild(a[i]);n=r}return n}var l=tui,s=l.util,u=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),c=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g");e.exports=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(r)},s=n(19),u=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(e,n,o,i){r(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o,i));return l._initEvent(),l}return o(t,e),i(t,[{key:"_initEvent",value:function(){var e=this,t="";this.eventManager.listen("contentChangedFromMarkdown",function(n){t=n.getValue(),e.isVisible()&&e.lazyRunner.run("refresh",t.replace(/<br>\n/g,"<br>"))}),this.eventManager.listen("previewNeedsRefresh",function(n){e.refresh(n||t)}),this.$el.on("scroll",function(t){e.eventManager.emit("scroll",{source:"preview",data:t})})}},{key:"render",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e),this.eventManager.emit("previewRenderAfter",this)}}]),t}(u.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(44),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t,n,a,o){r(this,e),this.eventManager=n,this.convertor=a,this.$el=t,this.isViewOnly=!!o,this._initContentSection(),this.lazyRunner=new i.default,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,800,this)}return a(e,[{key:"_initContentSection",value:function(){this._$previewContent=$('<div class="tui-editor-contents" />'),this.$el.append(this._$previewContent)}},{key:"refresh",value:function(e){this.render(this.convertor.toHTMLWithCodeHightlight(e))}},{key:"getHTML",value:function(){return this._$previewContent.html()}},{key:"setHTML",value:function(e){this._$previewContent.html(e)}},{key:"render",value:function(e){var t=this._$previewContent;e=this.eventManager.emit("previewBeforeHook",e)||e,t.empty(),t.html(e)}},{key:"setHeight",value:function(e){this.$el.height(e)}},{key:"isVisible",value:function(){return"none"!==this.$el.css("display")}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n="<"+t+"><br /></"+t+">",r="",a=0;a<e;a+=1)r+=n;return r}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(i),s=tui,u=s.util,c=u.browser.msie&&10===u.browser.version,f=u.browser.msie&&(10===u.browser.version||11===u.browser.version),d=u.browser.msie?"":"<br>",h=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="table",this._lastCellNode=null,this._init()}return o(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.tableID=0}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter.table",function(){var t=e.wwe.getEditor().getSelection(),n=e.isInTable(t);if(e._unwrapBlockInTable(),e._completeTableIfNeed(),!n){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()}e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygSetValueAfter.table",function(){e._unwrapBlockInTable(),e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygProcessHTMLText.table",function(e){return e.replace(/<br \/>(<\/td>|<\/th>)/g,"$1")}),this.eventManager.listen("cut.table",function(){var t=e.wwe.componentManager.getManager("tableSelection"),n=t.getSelectedCells();n.length&&n.get().forEach(function(e){return $(e).html(d)}),t.removeClassAttrbuteFromAllCellsIfNeed()}),this.eventManager.listen("copyBefore.table",function(t){var n=t.$clipboardContainer;return e.updateTableHtmlOfClipboardIfNeed(n)}),this.onBindedPaste=this._onPaste.bind(this),this.wwe.getEditor().addEventListener("paste",this.onBindedPaste)}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this,n=this.wwe.componentManager.getManager("tableSelection");if(n.getSelectedCells().length){n.createRangeBySelectedCells();var r=this.wwe.getEditor().getSelection().cloneContents();$(r).children().each(function(e,n){var r=$(n);t.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===r.find("thead").length&&0===r.find("tbody").length?r.remove():n.previousSibling&&"TABLE"===n.previousSibling.nodeName?n.previousSibling.appendChild(n):(t._completeIncompleteTable(n),"TABLE"!==n.nodeName&&"THEAD"!==n.nodeName&&$(n).closest("table").find("thead").remove()))}),e.append(r),e.find(".te-cell-selected").removeClass("te-cell-selected")}}},{key:"pasteClipboardData",value:function(e){this.wwe.componentManager.getManager("tableSelection").getSelectedCells().length||(this._expandTableIfNeed(e),this._pasteDataIntoTable(e))}},{key:"_onPaste",value:function(e){var t=this.wwe.getEditor().getSelection(),n=!l.default.isTextNode(t.commonAncestorContainer);this.isInTable(t)&&!t.collapsed&&n&&e.preventDefault()}},{key:"_initKeyHandler",value:function(){var e=this;this.keyEventHandlers={DEFAULT:function(t,n,r){var a=e.isInTable(n);a&&!e._isSingleModifierKey(r)?(e._recordUndoStateIfNeed(n),e._removeBRIfNeed(n),e._removeContentsAndChangeSelectionIfNeed(n,r,t)):!a&&e._lastCellNode&&e._recordUndoStateAndResetCellNode(n),a&&!e._isModifierKeyPushed(t)&&e.wwe.getEditor().modifyDocument(function(){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()})},ENTER:function(t,n){var r=void 0;return e._isAfterTable(n)?(t.preventDefault(),n.setStart(n.startContainer,n.startOffset-1),e.wwe.breakToNewDefaultBlock(n),r=!1):e._isBeforeTable(n)?(t.preventDefault(),e.wwe.breakToNewDefaultBlock(n,"before"),r=!1):e.isInTable(n)&&(e._appendBrIfTdOrThNotHaveAsLastChild(n),r=!1),r},BACK_SPACE:function(t,n,r){return e._handleBackspaceAndDeleteKeyEvent(t,n,r)},DELETE:function(t,n,r){return e._handleBackspaceAndDeleteKeyEvent(t,n,r)},TAB:function(){return e._moveCursorTo("next","cell")},"SHIFT+TAB":function(t){return e._moveCursorTo("previous","cell",t)},UP:function(t){return e._moveCursorTo("previous","row",t)},DOWN:function(t){return e._moveCursorTo("next","row",t)}},u.forEach(this.keyEventHandlers,function(t,n){return e.wwe.addKeyEventHandler(n,t)})}},{key:"isInTable",value:function(e){var t=void 0,n=void 0;return e.collapsed?(t=e.startContainer,n=!!$(t).closest("[contenteditable=true] table").length):(t=e.commonAncestorContainer,n=!!$(t).closest("[contenteditable=true] table").length||!!$(e.cloneContents()).find("table").length),n}},{key:"_isBeforeTable",value:function(e){return"TABLE"===l.default.getNodeName(l.default.getChildNodeByOffset(e.startContainer,e.startOffset))}},{key:"_isAfterTable",value:function(e){var t=l.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset);return"TABLE"===l.default.getNodeName(t)&&e.commonAncestorContainer===this.wwe.get$Body()[0]}},{key:"_handleBackspaceAndDeleteKeyEvent",value:function(e,t,n){var r="BACK_SPACE"===n,a=3!==t.commonAncestorContainer.nodeType&&t.commonAncestorContainer!==this.wwe.get$Body()[0],o=void 0;if(t.collapsed){if(this.isInTable(t))r?this._tableHandlerOnBackspace(t,e):this._tableHandlerOnDelete(t,e),this._insertBRIfNeed(t),this._removeContentsAndChangeSelectionIfNeed(t,n,e),o=!1;else if(!r&&this._isBeforeTable(t)||r&&this._isAfterTable(t)){e.preventDefault();var i=r?t.startOffset-1:t.startOffset;this._removeTable(t,l.default.getChildNodeByOffset(t.startContainer,i)),o=!1}}else this.isInTable(t)&&a&&(e.preventDefault(),this._removeContentsAndChangeSelectionIfNeed(t,n,e),o=!1);return o}},{key:"_tableHandlerOnBackspace",value:function(e,t){var n=l.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset,"TR"),r=l.default.getNodeName(n);n&&"TD"!==r&&"TH"!==r?"BR"===r&&1!==n.parentNode.childNodes.length&&(t.preventDefault(),$(n).remove()):t.preventDefault()}},{key:"isNonTextDeleting",value:function(e){var t=e.startContainer,n=t.nextSibling,r=l.default.getNodeName(n),a=l.default.getNodeName(t),o=a===r&&"TEXT"!==a,i=(!n||"BR"===r&&n.parentNode.lastChild===n)&&l.default.isTextNode(t)&&e.startOffset===t.nodeValue.length,s=!i&&$(t).parents("tr").children().last()[0]===t&&("TD"===a||"TH"===a);return o||i||s}},{key:"_tableHandlerOnDelete",value:function(e,t){this.isNonTextDeleting(e)&&(t.preventDefault(),e.startContainer.normalize())}},{key:"_appendBrIfTdOrThNotHaveAsLastChild",value:function(e){var t=l.default.getNodeName(e.startContainer),n=void 0;if("TD"===t||"TH"===t)n=e.startContainer;else{var r=$(e.startContainer).parentsUntil("tr");n=r[r.length-1]}"BR"===l.default.getNodeName(n.lastChild)||"DIV"===l.default.getNodeName(n.lastChild)||f||$(n).append($("<br />")[0])}},{key:"_unwrapBlockInTable",value:function(){this.wwe.get$Body().find("td div,th div,tr>br,td>br,th>br").each(function(e,t){if("BR"===l.default.getNodeName(t)){var n=l.default.getNodeName(t.parentNode),r=/TD|TH/.test(n),a=0===t.parentNode.textContent.length,o=t.parentNode.lastChild===t;("TR"===n||r&&!a&&o)&&$(t).remove()}else $(t).children().unwrap()})}},{key:"_insertDefaultBlockBetweenTable",value:function(){this.wwe.get$Body().find("table").each(function(e,t){t.nextElementSibling&&"TABLE"===t.nextElementSibling.nodeName&&$("<div><br /></div>").insertAfter(t)})}},{key:"_removeTable",value:function(e,t){"TABLE"===t.tagName&&(this.wwe.getEditor().saveUndoState(e),this.wwe.saveSelection(e),$(t).remove(),this.wwe.restoreSavedSelection())}},{key:"_recordUndoStateIfNeed",value:function(e){var t=l.default.getParentUntil(e.startContainer,"TR");e.collapsed&&t&&this._lastCellNode!==t&&(this.wwe.getEditor().saveUndoState(e),this._lastCellNode=t)}},{key:"_recordUndoStateAndResetCellNode",value:function(e){this.wwe.getEditor().saveUndoState(e),this.resetLastCellNode()}},{key:"_pasteDataIntoTable",value:function(e){var t=this.wwe.getEditor().getSelection(),n=t.startContainer,r=n.parentNode,a=this._getTableDataFromTable(e),o="TD"===r.tagName||"TH"===r.tagName,i="TD"===n.tagName||"TH"===n.tagName,s=3===n.nodeType,u=c?"":"<br />",f=void 0,d=void 0,h=void 0,g=void 0;for(f=s&&o?r:i?n:$(n).find("th,td").get(0),d=f;a.length;){for(h=a.shift();d&&h.length;)g=h.shift(),g.length?d.textContent=g:d.innerHTML=u,d=l.default.getTableCellByDirection(d,"next");d=l.default.getSiblingRowCellByDirection(f,"next",!1),f=d}}},{key:"_getTableDataFromTable",value:function(e){var t=$(e),n=[];return t.find("tr").each(function(e,t){var r=[];$(t).children().each(function(e,t){r.push(t.textContent)}),r.length&&n.push(r)}),n}},{key:"_removeTableContents",value:function(e){this.wwe.getEditor().saveUndoState(),e.each(function(e,t){var n=c?"":"<br />";$(t).html(n)})}},{key:"wrapDanglingTableCellsIntoTrIfNeed",value:function(e){var t=e.children("td,th"),n=void 0;if(t.length){var r=$("<tr></tr>");t.each(function(e,t){r.append(t)}),n=r.get(0)}return n}},{key:"wrapTrsIntoTbodyIfNeed",value:function(e){var t=e.children("tr"),n=t.find("th"),r=void 0;if(n.length&&n.each(function(e,t){var n=$(t),r=$("<td></td>");r.html(n.html()),r.insertBefore(t),n.detach()}),t.length){var a=$("<tbody></tbody>");t.each(function(e,t){a.append(t)}),r=a.get(0)}return r}},{key:"wrapTheadAndTbodyIntoTableIfNeed",value:function(e){var t=e.children("thead"),n=e.children("tbody"),r=$("<table></table>"),a=void 0;return!n.length&&t.length?(r.append(t[0]),r.append("<tbody><tr></tr></tbody>"),a=r.get(0)):n.length&&!t.length?(r.append("<thead><tr></tr></thead>"),r.append(n[0]),a=r.get(0)):n.length&&t.length&&(r.append(t[0]),r.append(n[0]),a=r.get(0)),a}},{key:"isTableOrSubTableElement",value:function(e){return"TABLE"===e||"TBODY"===e||"THEAD"===e||"TR"===e||"TD"===e}},{key:"_stuffTableCellsIntoIncompleteRow",value:function(e,t){e.each(function(e,n){for(var r=$(n),o=r.find("th,td"),i=l.default.getNodeName(r.parent()[0]),s="THEAD"===i?"th":"td",u=o.length;u<t;u+=1)r.append($(a(1,s))[0])})}},{key:"prepareToTableCellStuffing",value:function(e){var t=e.eq(0).find("th,td").length,n=!1;return e.each(function(e,r){var a=$(r).find("th,td").length;t!==a&&(n=!0,t<a&&(t=a))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"_addTbodyOrTheadIfNeed",value:function(e){var t=!e.find("thead").length,n=!e.find("tbody").length,r=void 0;t?(r=$("<thead><tr></tr></thead>").get(0),e.prepend(r)):n&&(r=$("<tbody><tr></tr></tbody>").get(0),e.append(r))}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=$(e);this._addTbodyOrTheadIfNeed(t),this._addTrIntoContainerIfNeed(t);var n=t.find("tr"),r=this.prepareToTableCellStuffing(n),a=r.maximumCellLength;r.needTableCellStuffingAid&&this._stuffTableCellsIntoIncompleteRow(n,a)}},{key:"_generateTheadAndTbodyFromTbody",value:function(e){var t=$("<tr></tr>"),n=$("<thead></thead>");return t.append(a($(e).find("tr").eq(0).find("td").length,"th")),n.append(t),{thead:n[0],tbody:e}}},{key:"_generateTheadAndTbodyFromThead",value:function(e){var t=$("<tr></tr>"),n=$("<tbody></tbody>");return t.append(a($(e).find("th").length,"td")),n.append(t),{thead:e,tbody:n[0]}}},{key:"_generateTheadAndTbodyFromTr",value:function(e){var t=$(e),n=$("<thead></thead>"),r=$("<tbody></tbody>"),o=void 0,i=void 0;return"TH"===t.children()[0].tagName?(o=e,i=$("<tr>"+a(t.find("th").length,"td")+"</tr>").get(0)):(o=$("<tr>"+a(t.find("td").length,"th")+"</tr>").get(0),i=e),n.append(o),r.append(i),{thead:n[0],tbody:r[0]}}},{key:"_completeIncompleteTable",value:function(e,t){var n=e.tagName,r=void 0,a=void 0;t=!!u.isUndefined(t)||t,"TABLE"===n?r=e:(r=$("<table></table>"),r.insertAfter(e),"TBODY"===n?a=this._generateTheadAndTbodyFromTbody(e):"THEAD"===n?a=this._generateTheadAndTbodyFromThead(e):"TR"===n&&(a=this._generateTheadAndTbodyFromTr(e)),t&&r.append(a.thead),r.append(a.tbody)),this.tableCellAppendAidForTableElement(r)}},{key:"_completeTableIfNeed",value:function(){var e=this;this.wwe.getEditor().get$Body().children().each(function(t,n){var r=$(n);e.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===r.find("thead").length&&0===r.find("tbody").length&&r.remove(),e._completeIncompleteTable(n))})}},{key:"resetLastCellNode",value:function(){this._lastCellNode=null}},{key:"setLastCellNode",value:function(e){this._lastCellNode=e}},{key:"_isSingleModifierKey",value:function(e){return"META"===e||"SHIFT"===e||"ALT"===e||"CONTROL"===e}},{key:"_isModifierKeyPushed",value:function(e){return e.metaKey||e.ctrlKey||e.altKey||e.shiftKey}},{key:"_addTrIntoContainerIfNeed",value:function(e){e.children().each(function(e,t){0===$(t).find("tr").length&&$(t).append($("<tr></tr>")[0])})}},{key:"_expandTableIfNeed",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=$(t.startContainer).parents("table"),r=this._getColumnAndRowDifference(e,t);r.column<0&&this._appendCellForAllRow(n,r.column),r.row<0&&this._appendRow(n,r.row)}},{key:"_getColumnAndRowDifference",value:function(e,t){var n=this._getTableDataFromTable(e),r=n.length,a=n[0].length,o=$(t.startContainer).closest("th,td"),i=o.parent(),s=l.default.getNodeOffsetOfParent(o[0]),u=l.default.getNodeOffsetOfParent(o[0].parentNode),c=i.parents("table"),f=c.find("tr").eq(0).children().length,d=c.find("tr").length;return i.parents("tbody").length&&(u+=1),{row:d-(u+r),column:f-(s+a)}}},{key:"_appendCellForAllRow",value:function(e,t){var n=c?"":"<br />";e.find("tr").each(function(e,r){for(var a=void 0,o=t;o<0;o+=1)a=0===e?"th":"td",$(r).append($("<"+a+">"+n+"</"+a+">")[0])})}},{key:"_appendRow",value:function(e,t){var n=e.find("tr").last().clone(),r=c?"":"<br />";for(n.find("td").html(r);t<0;t+=1)e.find("tbody").append(n.clone()[0])}},{key:"_getSiblingTextNodeByDirection",value:function(e,t){var n=e.previousSibling&&"BR"===e.previousSibling.nodeName&&e.previousSibling.previousSibling&&3===e.previousSibling.previousSibling.nodeType,r=e.nextSibling&&"BR"===e.nextSibling.nodeName&&e.nextSibling.nextSibling&&3===e.nextSibling.nextSibling.nodeType,a=void 0;return t&&r?a=e.nextSibling.nextSibling:!t&&n&&(a=e.previousSibling.previousSibling),a}},{key:"_changeSelectionToTargetCell",value:function(e,t,n,r){var a=t.startContainer,o="next"===n,i="row"===r,s=void 0,u=void 0;if(i){if(l.default.isTextNode(a)&&(s=this._getSiblingTextNodeByDirection(a,o)))return u=s.length<t.startOffset?s.length:t.startOffset,t.setStart(s,u),void t.collapse(!0);s=l.default.getSiblingRowCellByDirection(e,n,!1)}else(s=l.default.getTableCellByDirection(e,n))||(s=l.default.getSiblingRowCellByDirection(e,n,!0));s?(t.setStart(s,0),t.collapse(!0)):(s=$(e).parents("table").get(0),o?t.setStart(s.nextElementSibling,0):s.previousElementSibling&&"TABLE"!==s.previousElementSibling.nodeName?t.setStart(s.previousElementSibling,1):t.setStartBefore(s),t.collapse(!0))}},{key:"_moveCursorTo",value:function(e,t,n){var r=this.wwe.getEditor(),a=r.getSelection().cloneRange(),o=$(a.startContainer).closest("td,th").get(0),i=void 0;return a.collapsed&&this.isInTable(a)&&o&&("previous"!==e&&"row"!==t||u.isUndefined(n)||n.preventDefault(),this._changeSelectionToTargetCell(o,a,e,t),r.setSelection(a),i=!1),i}},{key:"_removeContentsAndChangeSelectionIfNeed",value:function(e,t,n){var r=t.length<=1,a="BACK_SPACE"===t||"DELETE"===t,o=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),i=o.first().get(0);(r||a)&&!this._isModifierKeyPushed(n)&&o.length&&(a&&this._recordUndoStateIfNeed(e),this._removeTableContents(o),this._lastCellNode=i,e.setStart(i,0),e.collapse(!0),this.wwe.getEditor().setSelection(e))}},{key:"getTableIDClassName",value:function(){var e="te-content-table-"+this.tableID;return this.tableID+=1,e}},{key:"_removeBRIfNeed",value:function(e){var t=l.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer;/td|th/i.test(l.default.getNodeName(n))&&e.collapsed&&1===n.textContent.length&&$(n).find("br").remove()}},{key:"_insertBRIfNeed",value:function(e){var t=l.default.isTextNode(e.startContainer),n=t?e.startContainer.parentNode:e.startContainer,r=l.default.getNodeName(n),a=$(n);!/td|th/i.test(r)||!e.collapsed||n.textContent.length||a.children().length||f||(n.normalize(),a.append("<br>"))}},{key:"destroy",value:function(){var e=this;this.eventManager.removeEventHandler("wysiwygRangeChangeAfter.table"),this.eventManager.removeEventHandler("wysiwygSetValueAfter.table"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.table"),this.eventManager.removeEventHandler("cut.table"),this.eventManager.removeEventHandler("copyBefore.table"),this.wwe.getEditor().removeEventListener("paste",this.onBindedPaste),u.forEach(this.keyEventHandlers,function(t,n){return e.wwe.removeKeyEventHandler(n,t)})}}]),e}();e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t){r(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="tableSelection",this._init()}return a(e,[{key:"_init",value:function(){this._initEvent(),tui.util.browser.firefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))}},{key:"_initEvent",value:function(){var e=this,t=void 0,n=void 0,r=void 0;this._tableSelectionTimer=null,this._removeSelectionTimer=null,this._isSelectionStarted=!1;var a=function(a){n=$(a.data.target).closest("[contenteditable=true] td,th").get(0);var o=e.wwe.getEditor().getSelection(),i=$(n).parents("[contenteditable=true] table").get(0),l=t===n,s=e._isTextSelect(o,l)&&!$(t).hasClass("te-cell-selected");e._isSelectionStarted&&i&&!s&&(window.getSelection().removeAllRanges(),tui.util.browser.firefox&&!e._removeSelectionTimer&&(e._removeSelectionTimer=setInterval(function(){window.getSelection().removeAllRanges()},10)),e.highlightTableCellsBy(t,n),r=n)},o=function(){e._isSelectionStarted&&(e._isSelectionStarted=!1,e.eventManager.removeEventHandler("mouseover.tableSelection"),e.eventManager.removeEventHandler("mouseup.tableSelection"))},i=function(a){n=$(a.data.target).closest("[contenteditable=true] td,th").get(0);var i=e.wwe.getEditor().getSelection(),l=t===n,s=e._isTextSelect(i,l)&&!$(t).hasClass("te-cell-selected");e._clearTableSelectionTimerIfNeed(),e._isSelectionStarted&&(s?e.removeClassAttrbuteFromAllCellsIfNeed():(e.wwe.componentManager.getManager("table").resetLastCellNode(),n=n||r,i=e.wwe.getEditor().getSelection(),i.setStart(n,0),tui.util.browser.msie?i.setEnd(n,1):(i.setEnd(n,0),i.collapse(!1)),e.wwe.getEditor().setSelection(i)),e.onDragEnd&&e.onDragEnd()),o()},l=function(r){t=$(r.data.target).closest("[contenteditable=true] td,th").get(0);var l=$(t).hasClass("te-cell-selected");n=null,!l||l&&2!==r.data.button?(e.removeClassAttrbuteFromAllCellsIfNeed(),e.setTableSelectionTimerIfNeed(t),e.eventManager.listen("mouseover.tableSelection",a),e.eventManager.listen("mouseup.tableSelection",i),e.onDragStart&&t&&e.onDragStart(t)):2===r.data.button&&o()};this.eventManager.listen("mousedown.tableSelection",l),this.eventManager.listen("copyBefore.tableSelection",o),this.eventManager.listen("pasteBefore.tableSelection",o)}},{key:"_isTextSelect",value:function(e,t){return/TD|TH|TEXT/i.test(e.commonAncestorContainer.nodeName)&&t}},{key:"setTableSelectionTimerIfNeed",value:function(e){$(e).parents("[contenteditable=true] table").length&&(this._isSelectionStarted=!0)}},{key:"_clearTableSelectionTimerIfNeed",value:function(){clearTimeout(this._tableSelectionTimer),tui.util.browser.firefox&&this._removeSelectionTimer&&(clearTimeout(this._removeSelectionTimer),this._removeSelectionTimer=null)}},{key:"_reArrangeSelectionIfneed",value:function(e,t){var n=$(e).parents("[contenteditable=true] table").length,r=$(t).parents("[contenteditable=true] table").length,a=r&&!n,o=!r&&n;return a?e=$(t).parents("[contenteditable=true] table").find("th").first().get(0):o&&(t=$(e).parents("[contenteditable=true] table").find("td").last().get(0)),{startContainer:e,endContainer:t}}},{key:"_applySelectionDirection",value:function(e,t){var n=i.default.getNodeOffsetOfParent,r=e.startContainer,a=e.endContainer,o=n($(r).closest("[contenteditable=true] tr")[0])-n($(a).closest("[contenteditable=true] tr")[0]),l=n(r)-n(a),s=0===o,u=o<0,c=l>0;return s?c?(t.setStart(a,0),t.setEnd(r,1)):(t.setStart(r,0),t.setEnd(a,1)):u?(t.setStart(r,0),t.setEnd(a,1)):(t.setStart(a,0),t.setEnd(r,1)),t}},{key:"getSelectionRangeFromTable",value:function(e,t){var n=i.default.getNodeOffsetOfParent,r=n(e.parentNode),a=n(t.parentNode),o=n(e),l=n(t),s=i.default.getParentUntil(e,"TABLE"),u=i.default.getParentUntil(t,"TABLE"),c="TBODY"===i.default.getNodeName(s)&&"THEAD"===i.default.getNodeName(u),f=s!==u,d=!!$(e).parents("tbody").length&&!!$(t).parents("tbody").length,h={row:r,cell:o},g={row:a,cell:l},p=void 0,v=void 0;return c?h.row+=1:f?g.row+=1:d&&(h.row+=1,g.row+=1),r>a||r===a&&o>l?(p=g,v=h):(p=h,v=g),{from:p,to:v}}},{key:"highlightTableCellsBy",value:function(e,t){var n=$(e).parents("[contenteditable=true] table").find("tr"),r=this.getSelectionRangeFromTable(e,t),a=r.from.row,o=r.from.cell,i=r.to.row,l=r.to.cell;n.each(function(e,t){$(t).find("td,th").each(function(t,n){var r=$(n),s=e===a,u=e===i;s&&t<o||u&&t>l||e<a||e>i?r.removeClass("te-cell-selected"):r.addClass("te-cell-selected")})})}},{key:"removeClassAttrbuteFromAllCellsIfNeed",value:function(){this.wwe.get$Body().find("td.te-cell-selected,th.te-cell-selected").each(function(e,t){var n=$(t);n.removeClass("te-cell-selected"),n.attr("class").length||n.removeAttr("class")})}},{key:"getSelectedCells",value:function(){return this.wwe.get$Body().find(".te-cell-selected")}},{key:"createRangeBySelectedCells",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=this.getSelectedCells(),r=this.wwe.componentManager.getManager("table"),a=n.first().get(0),o=n.last().get(0);n.length&&r.isInTable(t)&&(t.setStart(a,0),t.setEnd(o,o.childNodes.length),e.setSelection(t))}},{key:"styleToSelectedCells",value:function(e){this.createRangeBySelectedCells(),e(this.wwe.getEditor())}},{key:"destroy",value:function(){this.eventManager.removeEventHandler("mousedown.tableSelection"),this.eventManager.removeEventHandler("mouseover.tableSelection"),this.eventManager.removeEventHandler("mouseup.tableSelection"),this.eventManager.removeEventHandler("copyBefore.tableSelection"),this.eventManager.removeEventHandler("pasteBefore.tableSelection")}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(18),l=r(i),s=n(16),u=r(s),c=n(0),f=r(c),d=n(6),h=r(d),g=n(15),p=r(g),v=tui,m=v.util,b=function(){function e(t){var n=this;a(this,e),this.options=t,this.eventManager=new u.default,this.commandManager=new f.default(this),this.convertor=new p.default(this.eventManager),this.toMarkOptions=null,this.options.hooks&&m.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&m.forEach(this.options.events,function(e,t){n.on(t,e)}),this.preview=new l.default($(this.options.el),this.eventManager,this.convertor,!0),this.preview.$el.on("mousedown",$.proxy(this._toggleTask,this)),h.default.applyExtension(this,this.options.exts),this.setValue(this.options.initialValue),this.eventManager.emit("load",this)}return o(e,[{key:"_toggleTask",value:function(e){var t=e.offsetX<18&&e.offsetY>18;e.target.hasAttribute("data-te-task")&&!t&&($(e.target).toggleClass("checked"),this.eventManager.emit("change",{source:"viewOnly",data:e}))}},{key:"setMarkdown",value:function(e){this.markdownValue=e=e||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setMarkdownAfter",this.markdownValue)}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"remove",value:function(){this.eventManager.emit("removeEditor"),this.preview.$el.off("mousedown",$.proxy(this._toggleTask,this)),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"isViewOnly",value:function(){return!0}},{key:"isMarkdownMode",value:function(){return!1}},{key:"isWysiwygMode",value:function(){return!1}}]),e}();e.exports=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,i=o.util,l=function(){function e(t,n,a){r(this,e),this.name=t,this.type=n,a&&this.setKeyMap(a)}return a(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"isMDType",value:function(){return this.type===e.TYPE.MD}},{key:"isWWType",value:function(){return this.type===e.TYPE.WW}},{key:"isGlobalType",value:function(){return this.type===e.TYPE.GB}},{key:"setKeyMap",value:function(e,t){this.keyMap=[e,t]}}]),e}();l.factory=function(e,t){var n=void 0;"markdown"===e?n=l.TYPE.MD:"wysiwyg"===e?n=l.TYPE.WW:"global"===e&&(n=l.TYPE.GB);var r=new l(t.name,n);return i.extend(r,t),r},l.TYPE={MD:0,WW:1,GB:2},e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=tui,l=i.util,s=/(\n)|(\r\n)|(\r)/g,u=function(){function e(t){r(this,e),this.cm=t}return o(e,[{key:"getTextContent",value:function(){return this.cm.getValue().replace(s,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetCursor([e.start,e.end]),n=t[0].line,r=t[0].ch,a=t[1].line,o=t[1].ch,i=this._getExtraInfoOfRange(n,r,a,o);return e.text=i.text.replace(s," "),e.top=i.top,e.left=i.left,e.height=i.height,e}},{key:"_getExtraInfoOfRange",value:function(e,t,n,r){var a=void 0,o=void 0,i=void 0,l=void 0,s=void 0,u=this.cm.getDoc();if(u.getValue().length){a=u.getRange({line:e,ch:t},{line:n,ch:r}),o=this.cm.charCoords({line:n,ch:r},"local");var c=o;i=c.top,l=c.left,s=o.bottom-o.top}else i=l=s=0,a="";return{text:a,top:i,left:l,height:s}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=this.cm.getDoc(),t=this._getSelection(),n=e.getRange({line:0,ch:0},t.anchor).replace(s,"").length,r=n+e.getSelection().replace(s,"").length,a=this._findOffsetCursor([n,r]),o=this._getExtraInfoOfRange(a[0].line,a[0].ch,a[1].line,a[1].ch);return{start:n,end:r,text:o.text.replace(s," "),top:o.top,left:o.left,height:o.height}}},{key:"_getSelection",value:function(){var e=this.cm.getDoc().listSelections(),t=a(e,1),n=t[0],r=n.anchor,o=n.head;if(r.line>o.line||r.line===o.line&&r.ch>o.ch){var i=o;o=r,r=i}return{anchor:r,head:o}}},{key:"_findOffsetCursor",value:function(e){var t=this.cm.getDoc(),n=0,r=[],a=t.lineCount(),o=0,i=0,s=void 0;for(s=0;s<a;s+=1){for(i+=t.getLine(s).length;i>=e[o];)if(r.push({line:s,ch:e[o]-n}),o+=1,l.isUndefined(e[o]))return r;n=i}for(;!l.isUndefined(e[o]);)r.push({line:s,ch:i-n}),o+=1;return r}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetCursor([e,t]);this.cm.setSelection({line:n[0].line,ch:n[0].ch},{line:n[1].line,ch:n[1].ch})}},{key:"clearSelect",value:function(){var e=this.cm.getDoc().listSelections(),t=a(e,1),n=t[0];n&&this.cm.setCursor(n.to())}}]),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,i=o.util,l=function(){function e(){r(this,e),this._sortedMarkers=[],this._markersWithId={}}return a(e,[{key:"addMarker",value:function(e,t,n){var r=void 0;return r=n?{start:e,end:t,id:n}:e,this._markersWithId[r.id]||(this._sortedMarkers.push(r),this._markersWithId[r.id]=r),r}},{key:"getMarker",value:function(e){return this._markersWithId[e]}},{key:"removeMarker",value:function(e){var t=this._markersWithId[e];delete this._markersWithId[e];var n=this._sortedMarkers.indexOf(t);return this._sortedMarkers.splice(n,1),t}},{key:"updateMarker",value:function(e,t){var n=this.getMarker(e);return i.extend(n,t)}},{key:"forEachByRangeAffected",value:function(e,t,n){this._getMarkersByRangeAffected(e,t).forEach(n)}},{key:"_getMarkersByRangeAffected",value:function(e,t){return this._sortedMarkers.filter(function(n){return n.end>t||n.end>e})}},{key:"getAll",value:function(){return this._sortedMarkers}},{key:"resetMarkers",value:function(){this._sortedMarkers=[],this._markersWithId={}}},{key:"sortBy",value:function(e){this._sortedMarkers.sort(function(t,n){return t[e]-n[e]})}},{key:"getMarkersData",value:function(){return this.getAll().map(function(e){return{start:e.start,end:e.end,id:e.id}})}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(51),l=tui,s=l.util,u=function(){function e(t){r(this,e),this._dmp=new i,this.markerList=t,this.oldTextContent=null}return o(e,[{key:"resetContent",value:function(e){this.oldTextContent=s.isString(e)?e:null}},{key:"updateMarkersByContent",value:function(e){if(s.isNull(this.oldTextContent))return this.resetContent(e),[];var t=this._makeMarkerDiffs(e);return this.oldTextContent=e,this._getUpdateMarkersWithDiffs(t)}},{key:"_makeMarkerDiffs",value:function(e){var t=this.markerList,n=this,r={};return this._forEachChanges(e,function(e,a,o){t.forEachByRangeAffected(e,a,function(t){var i=r[t.id],l=n._calculateStartDiff(e,a,o,t),s=n._calculateEndDiff(e,a,o,t);i?(i.start+=l,i.end+=s):r[t.id]={start:l,end:s}})}),r}},{key:"_forEachChanges",value:function(e,t){var n=0,r=0;this._dmp.diff_main(this.oldTextContent,e).forEach(function(e){var o=a(e,2),i=o[0],l=o[1],s=0,u=l.length;if(n=r,0===i)return n+=u,void(r+=u);1===i?s+=u:-1===i&&(s-=u,r+=u),t(n,r,s)})}},{key:"_calculateStartDiff",value:function(e,t,n,r){return e<=r.start&&t<=r.start?n:e<=r.start&&t>r.start?e-r.start:0}},{key:"_calculateEndDiff",value:function(e,t,n,r){return t<=r.end?n:e<=r.end&&t>r.start?e-r.end:0}},{key:"_getUpdateMarkersWithDiffs",value:function(e){var t=[],n=this.markerList;return s.forEachOwnProperties(e,function(e,r){var a=n.getMarker(r);n.updateMarker(r,{start:a.start+=e.start,end:a.end+=e.end}),t.push(a)}),t}}]),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=window.getSelection(),t=void 0;return e&&e.rangeCount?t=e.getRangeAt(0).cloneRange():(t=document.createRange(),t.selectNodeContents(this.preview.$el[0]),t.collapse(!0)),t}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),l=/(\n)|(\r\n)|(\r)/g,s=function(){function e(t){r(this,e),this.preview=t}return o(e,[{key:"getTextContent",value:function(){return this.preview.$el[0].textContent.replace(l,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetNode([e.start,e.end]),n=document.createRange();n.setStart(t[0].container,t[0].offsetInContainer),n.setEnd(t[1].container,t[1].offsetInContainer);var r=this._getExtraInfoOfRange(n);return e.text=r.text,e.top=r.top,e.left=r.left,e.height=r.height,e}},{key:"_getExtraInfoOfRange",value:function(e){var t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,s=void 0,u=e.cloneContents().textContent.replace(l,"");if(e.setStart(e.endContainer,e.endOffset),e.collapse(!0),(r=e.getBoundingClientRect())&&!r.top){i=document.createElement("SPAN"),i.textContent="​",e.endContainer.parentNode.insertBefore(i,e.endContainer),r=i.getBoundingClientRect();s=i.parentNode,s.removeChild(i)}if(r){a=this.preview.$el.offset(),t=r.top+this.preview.$el.scrollTop()-a.top+$("body").scrollTop(),n=r.left-a.left;o=r.height}else o=t=n=0;return{text:u,top:t,left:n,height:o}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,o=a();return $.contains(this.preview.$el[0],o.commonAncestorContainer)&&this._extendRangeToTextNodeIfHasNone(o)?(e=o.cloneRange(),e.setStart(this.preview.$el[0],0),e.setEnd(o.startContainer,o.startOffset),r=this._getExtraInfoOfRange(o),t=e.cloneContents().textContent.length,n=t+r.text.length,{start:t,end:n,text:r.text,top:r.top,left:r.left,height:r.height}):null}},{key:"_extendRangeToTextNodeIfHasNone",value:function(e){var t=i.getChildNodeByOffset(e.endContainer,e.endOffset),n=void 0;if(!i.isTextNode(e.endContainer))if(i.isTextNode(t))e.setEnd(t,0);else{if(!(n=i.getPrevTextNode(t)))return!1;e.setEnd(n,n.length)}return!0}},{key:"_findOffsetNode",value:function(e){return i.findOffsetNode(this.preview.$el[0],e,function(e){return e.replace(l,"")})}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetNode([e,t]),r=document.createRange(),a=window.getSelection();r.setStart(n[0].container,n[0].offsetInContainer),r.setEnd(n[1].container,n[1].offsetInContainer),a.removeAllRanges(),a.addRange(r)}},{key:"clearSelect",value:function(){window.getSelection().removeAllRanges()}}]),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),i=/\u200B/g,l=function(){function e(t){r(this,e),this.sqe=t}return a(e,[{key:"getTextContent",value:function(){return this.sqe.get$Body()[0].textContent.replace(i,"")}},{key:"updateMarkerWithExtraInfo",value:function(e){var t=this._findOffsetNode([e.start,e.end]),n=this.sqe.getSelection().cloneRange();n.setStart(t[0].container,t[0].offsetInContainer),n.setEnd(t[1].container,t[1].offsetInContainer);var r=this._getExtraInfoOfRange(n);return e.text=r.text,e.top=r.top,e.left=r.left,e.height=r.height,e}},{key:"_getExtraInfoOfRange",value:function(e){var t=void 0,n=void 0,r=void 0,a=void 0,l=void 0,s=void 0,u=void 0,c=e.endContainer,f=e.endOffset,d=e.cloneContents().textContent.replace(i,"");if(o.getChildNodeByOffset(c,f)&&(e.setStart(c,f),e.collapse(!0),r=e.getBoundingClientRect()),r&&!r.top&&this.sqe.modifyDocument(function(){l=document.createElement("SPAN"),l.textContent="​",e.endContainer.parentNode.insertBefore(l,e.endContainer),r=l.getBoundingClientRect(),s=l.parentNode,s.removeChild(l)}),r){u=this.sqe.get$Body().parent().offset(),t=this.sqe.scrollTop()+r.top-u.top+$("body").scrollTop(),n=r.left-u.left;a=r.height}else a=t=n=0;return{text:d,top:t,left:n,height:a}}},{key:"getMarkerInfoOfCurrentSelection",value:function(){var e=void 0,t=void 0,n=void 0,r=void 0,a=this.sqe.getSelection().cloneRange();return this._extendRangeToTextNodeIfHasNone(a)?(e=a.cloneRange(),e.setStart(this.sqe.get$Body()[0],0),e.setEnd(a.startContainer,a.startOffset),r=this._getExtraInfoOfRange(a),t=e.cloneContents().textContent.length,n=t+r.text.length,{start:t,end:n,text:r.text,top:r.top,left:r.left,height:r.height}):null}},{key:"_extendRangeToTextNodeIfHasNone",value:function(e){var t=o.getChildNodeByOffset(e.endContainer,e.endOffset),n=void 0;if(!o.isTextNode(e.endContainer)||!t.nodeValue.replace(i,"").length)if(o.isTextNode(t))e.setEnd(t,0);else{if(!(n=o.getPrevTextNode(t)))return!1;e.setEnd(n,n.length)}return!0}},{key:"_findOffsetNode",value:function(e){return o.findOffsetNode(this.sqe.get$Body()[0],e,function(e){return e.replace(i,"")})}},{key:"selectOffsetRange",value:function(e,t){var n=this._findOffsetNode([e,t]),r=this.sqe.getSelection().cloneRange();r.setStart(n[0].container,n[0].offsetInContainer),r.setEnd(n[1].container,n[1].offsetInContainer),this.sqe.setSelection(r)}},{key:"clearSelect",value:function(){var e=this.sqe.getSelection().cloneRange();e.collapse(!0),this.sqe.setSelection(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";var r=n(5),a=function(e){return e&&e.__esModule?e:{default:e}}(r);a.default.setLang(["ko","ko_KR"],{"Merge cells":"셀 병합","Unmerge cells":"셀 병합해제","Cannot change part of merged cell":"병합 된 셀의 일부를 변경할 수 없습니다.","Cannot paste row merged cells into the table header":"테이블 헤더에는 행 병합된 셀을 붙여넣을 수 없습니다."}),a.default.setLang(["en","en_US"],{"Merge cells":"Merge cells","Unmerge cells":"Unmerge cells","Cannot change part of merged cell":"Cannot change part of merged cell.","Cannot paste row merged cells into the table header":"Cannot paste row merged cells into the table header."}),a.default.setLang(["ja","ja_JP"],{"Merge cells":"セルの結合","Unmerge cells":"セルの結合を解除","Cannot change part of merged cell":"結合されたセルの一部を変更することはできません。","Cannot paste row merged cells into the table header":"行にマージされたセルをヘッダーに貼り付けることはできません。"}),a.default.setLang(["nl","nl_NL"],{"Merge cells":"cellen samenvoegen","Unmerge cells":"Samenvoegen cellen ongedaan maken","Cannot change part of merged cell":"Kan geen deel uit van samengevoegde cel te veranderen.","Cannot paste row merged cells into the table header":"Kan niet plakken rij samengevoegde cellen in de koptekst. "}),a.default.setLang(["zh","zh_CN"],{"Merge cells":"合并单元格","Unmerge cells":"取消合并单元格","Cannot change part of merged cell":"无法更改合并单元格的一部分。","Cannot paste row merged cells into the table header":"无法将行合并单元格粘贴到标题中。"})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){var r,o=n+1,i=(r=[]).concat.apply(r,a(e.map(function(e){return e.slice(t,o)}))),l=i.filter(function(e){var t=e.content;return t&&t!==_});return l.length?l[0].content:_}function i(e,t,n){var r,o=n+1,i=e.map(function(e){return e.slice(t,o)});(r=[]).concat.apply(r,a(i)).slice(1).forEach(function(e){var t=e.nodeName;w.forEach(e,function(t,n){return delete e[n]}),e.nodeName=t})}function l(e,t,n,r){var a=n+1;e.forEach(function(e){e.slice(t,a).forEach(function(e){e.rowMergeWith=r})})}function s(e,t,n,r){var a=n+1;e.forEach(function(e){e.slice(t,a).forEach(function(e){e.colMergeWith=r})})}function u(e,t){var n=t.start,r=t.end,a=n.rowIndex,u=n.colIndex,c=r.rowIndex,f=r.colIndex,d=e[a][u],h=e.slice(a,c+1),g=c-a+1,p=f-u+1;d.rowspan=g,d.colspan=p,d.content=o(h,u,f),i(h,u,f),g>1&&l(h.slice(1),u,f,a),p>1&&s(h,u+1,f,u)}function c(e,t,n){var r=g.default.createTableData(e),a=g.default.findElementIndex(r,t,n);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._mergeCells=u;var f=n(0),d=r(f),h=n(2),g=r(h),p=n(3),v=r(p),m=n(4),b=r(m),y=tui,w=y.util,_=w.browser.msie?"":"<br>",k=d.default.command("wysiwyg",{name:"MergeCells",exec:function(e){var t=e.getEditor();if(e.focus(),t.hasFormat("TABLE")){var n=e.componentManager.getManager("tableSelection"),r=n.getSelectedCells();if(!(r.length<2||n.hasSelectedBothThAndTd(r))){var a=t.getSelection().cloneRange(),o=$(a.startContainer),i=o.closest("table"),l=g.default.createTableData(i),s=v.default.getTableSelectionRange(l,r,o);u(l,s);var f=b.default.replaceTable(i,l),d=c(f,s.start.rowIndex,s.start.colIndex);b.default.focusToCell(t,a,d)}}}});t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return{nodeName:t,colMergeWith:e}}function i(e,t,n,r){var a=e[n],i=void 0;if(y.isExisty(a.colMergeWith)){var l=a.colMergeWith,s=e[l],u=l+s.colspan-1;y.isExisty(s.rowMergeWith)&&r?i=y.extend({},r):u>n&&(s.colspan+=1,i=y.extend({},a))}else a.colspan>1&&(a.colspan+=1,i=o(n,a.nodeName));return i||(i=h.default.createBasicCell(t,n+1,a.nodeName)),i}function l(e,t,n){var r=y.range(t,n+1),a=[],o=null;return e.forEach(function(e,t){var l=r.map(function(r,a){var l=o?o[a-1]:null;return i(e,t,n,l)});o=l,a.push(l)}),a}function s(e,t){var n=t.end,r=h.default.findColMergedLastIndex(e,n.rowIndex,n.colIndex),o=l(e,t.start.colIndex,r),i=r+1;e.forEach(function(e,t){e.splice.apply(e,a([i,0].concat(o[t])))})}function u(e,t,n){var r=h.default.createTableData(e),a=h.default.findColMergedLastIndex(r,t,n)+1,o=h.default.findElementIndex(r,t,a);return e.find("tr").eq(o.rowIndex).find("td, th")[o.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._createNewColumns=l,t._addColumns=s;var c=n(0),f=r(c),d=n(2),h=r(d),g=n(3),p=r(g),v=n(4),m=r(v),b=tui,y=b.util,w=f.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),a=r.closest("table"),o=h.default.createTableData(a),i=e.componentManager.getManager("tableSelection").getSelectedCells(),l=p.default.getTableSelectionRange(o,i,r);s(o,l);var c=m.default.replaceTable(a,o),f=u(c,l.start.rowIndex,l.end.colIndex);m.default.focusToCell(t,n,f)}}});t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){return{nodeName:"TD",rowMergeWith:e}}function i(e,t){var n=null;return e[t].map(function(r,a){var i=void 0;if(b.isExisty(r.rowMergeWith)){var l=r.rowMergeWith,s=e[l][a],u=l+s.rowspan-1;b.isExisty(s.colMergeWith)&&n?i=b.extend({},n):u>t&&(s.rowspan+=1,i=b.extend({},r))}else r.rowspan>1&&(r.rowspan+=1,i=o(t));return i||(i=d.default.createBasicCell(t+1,a)),n=i,i})}function l(e,t){var n=t.start.rowIndex,r=t.end,o=d.default.findRowMergedLastIndex(e,r.rowIndex,r.colIndex),l=b.range(n,o+1).map(function(){return i(e,o)});e.splice.apply(e,a([o+1,0].concat(l)))}function s(e,t,n){var r=d.default.createTableData(e),a=d.default.findRowMergedLastIndex(r,t,n)+1,o=d.default.findElementIndex(r,a,n);return e.find("tr").eq(o.rowIndex).find("td")[o.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._createNewRow=i,t._addRow=l;var u=n(0),c=r(u),f=n(2),d=r(f),h=n(3),g=r(h),p=n(4),v=r(p),m=tui,b=m.util,y=c.default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),a=r.closest("table"),o=d.default.createTableData(a),i=e.componentManager.getManager("tableSelection").getSelectedCells(),u=g.default.getTableSelectionRange(o,i,r);l(o,u);var c=v.default.replaceTable(a,o),f=s(c,u.end.rowIndex,u.start.colIndex);v.default.focusToCell(t,n,f)}}});t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r){p.range(t,n+1).forEach(function(t){var n=e[t];p.isExisty(n.colMergeWith)?e[n.colMergeWith].align=r:n.align=r})}function o(e,t){var n=u.default.findElementRowIndex(t),r=u.default.findElementColIndex(t);return e.find("tr").eq(n).find("td, th")[r]}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),l=r(i),s=n(2),u=r(s),c=n(3),f=r(c),d=n(4),h=r(d),g=tui,p=g.util,v=l.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),r=n.getSelection().cloneRange();if(e.focus(),n.hasFormat("TABLE")){var i=$(r.startContainer),l=i.closest("table"),s=u.default.createTableData(l),c=e.componentManager.getManager("tableSelection").getSelectedCells(),d=f.default.getTableSelectionRange(s,c,i);a(s[0],d.start.colIndex,d.end.colIndex,t);var g=h.default.replaceTable(l,s),p=o(g,i);h.default.focusToCell(n,r,p)}}});t.default=v},function(e,t,n){"use strict";function r(e,t,n){var r=new RegExp("^((?:"+n+"=[0-9]+:)?)"+t+"=([0-9]+):(.*)"),a=r.exec(e),o=1;return a&&(o=parseInt(a[2],10),e=a[1]+a[3]),[o,e]}function a(e){var t=e.nodeName,n=e.align||"",a=e.innerHTML.trim(),o=null,i=null,l=r(a,"@cols","@rows"),s=d(l,2);o=s[0],a=s[1];var u=r(a,"@rows","@cols"),c=d(u,2);return i=c[0],a=c[1],{nodeName:t,colspan:o,rowspan:i,content:a,align:n}}function o(e){return e.find("tr").get().map(function(e){return $(e).find("td, th").get().map(a)})}function i(e,t){var n=-1;return tui.util.forEach(e,function(e,r){var a=!0;return t(e,r)&&(n=r,a=!1),a}),n}function l(e){var t=i(e,function(e){return"TD"===e[0].nodeName});return[e.slice(0,t),e.slice(t)]}function s(e){e.forEach(function(e){var t=e.length,n=0;e.forEach(function(e){n+=e.colspan-1}),e.splice(t-n)})}function u(e){var t=e.map(function(e,t){return t}),n=t.map(function(){return 0});return e.forEach(function(e,r){var a=e.filter(function(e){return e.rowspan>1}),o=r+1;a.forEach(function(e){var r=e.colspan,a=o+(e.rowspan-1);t.slice(o,a).forEach(function(e){n[e]+=r})})}),n}function c(e){var t=u(e);e.forEach(function(e,n){e.splice(e.length-t[n])})}function f(e){var t=o($(e)),n=l(t),r=d(n,2),a=r[0],i=r[1];return s(a),s(i),c(i),$(g.default.createTableHtml(t))[0]}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t._extractPropertiesForMerge=r,t._parseTableCell=a,t._createTableObjectFrom$Table=o,t._divideTrs=l,t._mergeByColspan=s,t._getRemovalTdCountsByRowspan=u,t._mergeByRowspan=c,t.default=f;var h=n(4),g=function(e){return e&&e.__esModule?e:{default:e}}(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){e.forEach(function(e){m.range(t,n+1).forEach(function(t){var r=e[t];if(m.isExisty(r.colMergeWith)){var a=e[r.colMergeWith];a.colspan&&(a.colspan-=1)}else if(r.colspan>1){var o=t+r.colspan-1;r.colspan-=n-t+1,o>n&&(e[n+1]=m.extend({},r))}})})}function o(e,t,n){e.forEach(function(e){e.slice(n+1).forEach(function(e){m.isExisty(e.colMergeWith)&&e.colMergeWith>=t&&(e.colMergeWith=n+1)})})}function i(e,t){var n=t.start.colIndex,r=t.end,i=f.default.findColMergedLastIndex(e,r.rowIndex,r.colIndex),l=i-n+1;l!==e[0].length&&(a(e,n,i),o(e,n,i),e.forEach(function(e){e.splice(n,l)}))}function l(e,t,n){var r=f.default.createTableData(e);r[0].length-1<n&&(n-=1);var a=f.default.findElementIndex(r,t,n);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._removeColumns=i;var s=n(0),u=r(s),c=n(2),f=r(c),d=n(3),h=r(d),g=n(4),p=r(g),v=tui,m=v.util,b=u.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),a=r.closest("table"),o=f.default.createTableData(a),s=e.componentManager.getManager("tableSelection").getSelectedCells(),u=h.default.getTableSelectionRange(o,s,r),c=o[0].length;if(i(o,u),c!==o[0].length){var d=p.default.replaceTable(a,o),g=l(d,u.start.rowIndex,u.end.colIndex);p.default.focusToCell(t,n,g)}}}});t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){m.range(t,n+1).forEach(function(t){e[t].forEach(function(r,a){if(m.isExisty(r.rowMergeWith)){var o=e[r.rowMergeWith][a];o.rowspan&&(o.rowspan-=1)}else if(r.rowspan>1){var i=t+r.rowspan-1;r.rowspan-=n-t+1,i>n&&(e[n+1][a]=m.extend({},r))}})})}function o(e,t,n){e.slice(n+1).forEach(function(e){e.forEach(function(e){m.isExisty(e.rowMergeWith)&&e.rowMergeWith>=t&&(e.rowMergeWith=n+1)})})}function i(e,t){var n=t.start.rowIndex,r=t.end,i=f.default.findRowMergedLastIndex(e,r.rowIndex,r.colIndex),l=i-n+1;l!==e.length-1&&(a(e,n,i),o(e,n,i),e.splice(n,l))}function l(e,t,n){var r=f.default.createTableData(e);r.length-1<t&&(t-=1);var a=f.default.findElementIndex(r,t,n);return e.find("tr").eq(a.rowIndex).find("td")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._removeRow=i;var s=n(0),u=r(s),c=n(2),f=r(c),d=n(3),h=r(d),g=n(4),p=r(g),v=tui,m=v.util,b=u.default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),a=r.closest("table"),o=f.default.createTableData(a),s=o.length,u=e.componentManager.getManager("tableSelection").getSelectedCells(),c=h.default.getTableSelectionRange(o,u,r);if(i(o,c),s!==o.length){var d=p.default.replaceTable(a,o),g=l(d,c.end.rowIndex,c.start.colIndex);p.default.focusToCell(t,n,g)}}}});t.default=b},function(e,t,n){"use strict";function r(e){var t=['<button type="button" class="te-table-add-row">'+l.default.get("Add row")+"</button>",'<button type="button" class="te-table-add-col">'+l.default.get("Add col")+"</button>",'<button type="button" class="te-table-remove-row">'+l.default.get("Remove row")+"</button>",'<button type="button" class="te-table-remove-col">'+l.default.get("Remove col")+"</button>","<hr/>",'<button type="button" class="te-table-merge">'+l.default.get("Merge cells")+"</button>",'<button type="button" class="te-table-unmerge">'+l.default.get("Unmerge cells")+"</button>","<hr/>",'<button type="button" class="te-table-col-align-left">'+l.default.get("Align left")+"</button>",'<button type="button" class="te-table-col-align-center">'+l.default.get("Align center")+"</button>",'<button type="button" class="te-table-col-align-right">'+l.default.get("Align right")+"</button>","<hr/>",'<button type="button" class="te-table-remove">'+l.default.get("Remove table")+"</button>"].join(""),n=$(t);e.setContent(n)}function a(e,t,n){var r=e.$content,a=$(r[5]),o=$(r[6]),i=$(r[7]);e.on("click .te-table-merge",function(){t.emit("command","MergeCells")}),e.on("click .te-table-unmerge",function(){t.emit("command","UnmergeCells")}),t.listen("openPopupTableUtils",function(){var e=n.getSelectedCells(),t=e.length;t?(t<2||n.hasSelectedBothThAndTd(e)?a.hide():a.show(),e.is("[rowspan], [colspan]")?o.show():o.hide(),i.show()):(a.hide(),o.hide(),i.hide())})}function o(e,t,n){r(e),a(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),l=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={updateContextMenu:o}},function(e,t,n){"use strict";function r(e){var t=$(e),n=t.attr("colspan")||"",r=t.attr("rowspan")||"",a=t.html();n&&(a="@cols="+n+":"+a),r&&(a="@rows="+r+":"+a),a&&t.html(a)}function a(e){return $(e).find("td, th").get().forEach(r),e}Object.defineProperty(t,"__esModule",{value:!0}),t._prependMergeSyntaxToContent=r,t.default=a},function(e,t,n){"use strict";function r(e,t){return tui.util.range(0,t).map(function(){return e}).join("")}function a(e){var t=e.align,n=(e.textContent||e.innerText).replace(u,""),a=n.length,o="",i="";return t&&("left"===t?(o=":",a-=1):"right"===t?(i=":",a-=1):"center"===t&&(i=":",o=":",a-=2)),a=Math.max(a,3),o+r("-",a)+i}function o(e){var t=0;return e.filter(function(e){return $(e).attr("colspan")}).forEach(function(e){t+=parseInt($(e).attr("colspan"),10)-1}),t}function i(e,t){var n=$(e).find("th").get(),i=n.map(function(e){return" "+a(e)+" |"}).join("");return i+=r(" --- |",o(n)),t?t+"|"+i+"\n":""}Object.defineProperty(t,"__esModule",{value:!0}),t._getAdditionalThCount=o,t._createTheadMarkdown=i;var l=window,s=l.toMark,u=/@cols=[0-9]+:/g;t.default=s.Renderer.factory(s.gfmRenderer,{THEAD:i})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){var n,r=t.start,o=t.end,i=r.colIndex,l=o.colIndex+1,s=e.slice(r.rowIndex,o.rowIndex+1),u=s.map(function(e){return e.slice(i,l)});return!!(n=[]).concat.apply(n,a(u)).filter(function(e){return e.colspan>1||e.rowspan>1}).length}function i(e,t,n,r,a){var o=t+r,i=n+a,l=b.range(n,i);b.range(t,o).forEach(function(n){var r=e[n],a=n===t?1:0;l.slice(a).forEach(function(e){r[e]=d.default.createBasicCell(n,e,r[e].nodeName)})})}function l(e,t){var n=t.start,r=t.end,a=b.range(n.colIndex,r.colIndex+1);b.range(n.rowIndex,r.rowIndex+1).forEach(function(t){a.forEach(function(n){var r=e[t][n],a=r.colspan,o=r.rowspan;(a>1||o>1)&&(r.colspan=1,r.rowspan=1,i(e,t,n,o,a))})})}function s(e,t,n){var r=d.default.createTableData(e),a=d.default.findElementIndex(r,t,n);return e.find("tr").eq(a.rowIndex).find("td, th")[a.colIndex]}Object.defineProperty(t,"__esModule",{value:!0}),t._hasMergedCell=o,t._unmergeCells=l;var u=n(0),c=r(u),f=n(2),d=r(f),h=n(3),g=r(h),p=n(4),v=r(p),m=tui,b=m.util,y=c.default.command("wysiwyg",{name:"UnmergeCells",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();if(e.focus(),t.hasFormat("TABLE")){var r=$(n.startContainer),a=r.closest("table"),i=d.default.createTableData(a),u=e.componentManager.getManager("tableSelection").getSelectedCells(),c=g.default.getTableSelectionRange(i,u,r);if(o(i,c)){l(i,c);var f=v.default.replaceTable(a,i),h=s(f,c.start.rowIndex,c.start.colIndex);v.default.focusToCell(t,n,h)}}}});t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=!1;return k.forEach(e,function(e){return!(n=t(e))}),n}var u=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(20),d=r(f),h=n(2),g=r(h),p=n(4),v=r(p),m=n(3),b=r(m),y=n(5),w=r(y),_=tui,k=_.util,x=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"_updateCopyDataMergeWith",value:function(e,t){e.forEach(function(e){e.forEach(function(e){k.isExisty(e.rowMergeWith)&&(e.rowMergeWith-=t.rowIndex),k.isExisty(e.colMergeWith)&&(e.colMergeWith-=t.colIndex)})})}},{key:"_createCopyTableData",value:function(e,t,n){var r=e.slice(t.rowIndex,n.rowIndex+1);return r=r.map(function(e){return e.slice(t.colIndex,n.colIndex+1)}),this._updateCopyDataMergeWith(r,t),r}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection").getSelectedCells();if(t.length){var n=g.default.createTableData($(t[0]).closest("TABLE")),r=b.default.getTableSelectionRange(n,t),a=r.start,o=r.end,i=this._createCopyTableData(n,a,o),l=g.default.createCellIndexData(i),s=g.default.createRenderData(i,l);e.html(v.default.createTableHtml(s))}}},{key:"prepareToTableCellStuffing",value:function(e){var t=e[0].length,n=!1;return e.slice(1).forEach(function(e){var r=e.length;t!==r&&(n=!0,t<r&&(t=r))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=$(e),n=g.default.createTableData(t),r=g.default.addTbodyOrTheadIfNeed(n),a=this.prepareToTableCellStuffing(n),o=a.needTableCellStuffingAid;o&&g.default.stuffCellsIntoIncompleteRow(n,a.maximumCellLength),(r||o)&&v.default.replaceTable(t,n)}},{key:"_findStartCell",value:function(e){return 1===e.length?e.get(0):this.wwe.getEditor().getSelection().startContainer}},{key:"_findStartCellIndex",value:function(e,t){var n=g.default.createCellIndexData(e);return g.default.findCellIndex(n,t)}},{key:"_hasRowMergedHeader",value:function(e,t,n){var r="TH"===t[n.rowIndex][n.colIndex].nodeName,a=s(e[0],function(e){return e.rowspan&&e.rowspan>1});return r&&a}},{key:"_isExactlyFit",value:function(e,t,n){return t%e.length==0&&n%e[0].length==0}},{key:"_updateClipboardTableData",value:function(e,t,n){var r=e.length,o=e[0].length,i=parseInt(t/r,10),l=parseInt(n/o,10);if(i>1){var s=JSON.parse(JSON.stringify(e));k.range(0,i-1).forEach(function(){var t=JSON.parse(JSON.stringify(s));e.push.apply(e,a(t))})}if(l>1){var u=JSON.parse(JSON.stringify(e));k.range(0,l-1).forEach(function(){var t=JSON.parse(JSON.stringify(u));e.forEach(function(e,n){e.push.apply(e,a(t[n]))})})}}},{key:"_updateTableDataByClipboardData",value:function(e,t,n){var r=n.rowIndex,a=n.colIndex;e.forEach(function(e,n){var o=r+n;e.forEach(function(e,n){var r=a+n,i=t[o][r];e.nodeName=i.nodeName,t[o][r]=e})})}},{key:"_isPossibleToPaste",value:function(e,t,n){var r=t.rowIndex,a=t.colIndex,o=n.rowIndex,i=n.colIndex,l=e.slice(r,o+1),u=l[0].slice(a,i+1),c=!s(u,function(e){return k.isExisty(e.rowMergeWith)});if(c){c=!s(k.pluck(l,a),function(e){return k.isExisty(e.colMergeWith)})}if(c&&e.length>o+1){c=!s(e[o+1].slice(a,i+1),function(e){return k.isExisty(e.rowMergeWith)})}if(c&&e[0].length>i+1){c=!s(k.pluck(l,i+1),function(e){return k.isExisty(e.colMergeWith)})}return c}},{key:"_spliceClipboardData",value:function(e,t,n){e.splice(t),e.forEach(function(e){e.splice(n)})}},{key:"_bookmarkLastTd",value:function(e){var t=e.rowIndex,n=e.colIndex,r=this.wwe.getEditor(),a=r.get$Body().find(".tui-paste-table-bookmark"),o=g.default.createTableData(a),i=o[t][n];t=k.isExisty(i.rowMergeWith)?i.rowMergeWith:t,n=k.isExisty(i.colMergeWith)?i.colMergeWith:n;var l=o[t][n].elementIndex,s=a.find("tr").eq(l.rowIndex).children()[l.colIndex];a.removeClass("tui-paste-table-bookmark"),$(s).addClass("tui-paste-table-cell-bookmark")}},{key:"_updateClipboardDataForPasteToSamllerSelectedArea",value:function(e,t,n,r,a){var o=!0,i={rowIndex:0,colIndex:0},l={rowIndex:n-1,colIndex:r-1};return this._isPossibleToPaste(e,i,l)?(this._spliceClipboardData(e,n,r),this._updateTableDataByClipboardData(e,t,a)):o=!1,o}},{key:"_pasteToSelectedArea",value:function(e,t,n,r){var a=b.default.getTableSelectionRange(n,r),o=a.start,i=a.end,l=i.rowIndex-o.rowIndex+1,s=i.colIndex-o.colIndex+1,u=t.length,c=t[0].length,f=l>=u&&s>=c,d=w.default.get("Cannot change part of merged cell"),h=!0,g=void 0;this._hasRowMergedHeader(t,n,o)?(d=w.default.get("Cannot paste row merged cells into the table header"),h=!1):this._isExactlyFit(t,l,s)?(g=i,this._updateClipboardTableData(t,l,s),this._updateTableDataByClipboardData(t,n,o)):f?(g={rowIndex:o.rowIndex+u-1,colIndex:o.colIndex+c-1},this._isPossibleToPaste(n,o,g)?this._updateTableDataByClipboardData(t,n,o):h=!1):(g={rowIndex:o.rowIndex+l-1,colIndex:o.colIndex+s-1},h=this._updateClipboardDataForPasteToSamllerSelectedArea(t,n,l,s,o)),h?(n.className+=" tui-paste-table-bookmark",v.default.replaceTable(e,n),this._bookmarkLastTd(g)):(alert(d),this.wwe.focus())}},{key:"_findEndCellIndex",value:function(e,t){var n=t.rowIndex,r=t.colIndex;return{rowIndex:n+e.length-1,colIndex:r+e[0].length-1}}},{key:"_expandRow",value:function(e,t){var n=e.length,r=e[0].length,o=k.range(n,n+t).map(function(e){return k.range(0,r).map(function(t){return g.default.createBasicCell(e,t)})});e.push.apply(e,a(o))}},{key:"_expandCoumn",value:function(e,t){var n=e[0].length,r=k.range(n,n+t);e.forEach(function(e,t){var n=u(e,1),o=n[0].nodeName,i=r.map(function(e){return g.default.createBasicCell(t,e,o)});e.push.apply(e,a(i))})}},{key:"_expandTableDataIfNeed",value:function(e,t,n){var r=n.rowIndex-e.length+1,a=n.colIndex-e[0].length+1;r>0&&this._expandRow(e,r),a>0&&this._expandCoumn(e,a)}},{key:"_pasteAllClipboardTableData",value:function(e,t,n,r){var a=this._findEndCellIndex(t,r);if(this._hasRowMergedHeader(t,n,r))return alert(w.default.get("Cannot paste row merged cells into the table header")),void this.wwe.focus();this._expandTableDataIfNeed(n,r,a),this._isPossibleToPaste(n,r,a)?(this._updateTableDataByClipboardData(t,n,r),n.className+=" tui-paste-table-bookmark",v.default.replaceTable(e,n),this._bookmarkLastTd(a)):(alert(w.default.get("Cannot change part of merged cell")),this.wwe.focus())}},{key:"pasteClipboardData",value:function(e){var t=g.default.createTableData(e),n=this.wwe.componentManager.getManager("tableSelection"),r=n.getSelectedCells(),a=$(this._findStartCell(r)),o=a.closest("table"),i=g.default.createTableData(o),l=this._findStartCellIndex(i,a);r.length>1?this._pasteToSelectedArea(o,t,i,r):this._pasteAllClipboardTableData(o,t,i,l)}}]),t}(d.default);e.exports=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(21),u=r(s),c=n(2),f=r(c),d=n(3),h=r(d),g=tui,p=g.util,v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._tableData=null,n.mergedTableSelectionManager=!0,n}return i(t,e),l(t,[{key:"_addClassToSelectedCells",value:function(e,t,n){var r=n.start,a=n.end,o=p.range(r.colIndex,a.colIndex+1),i=e.find("tr");p.range(r.rowIndex,a.rowIndex+1).forEach(function(e){var n=t[e],r=i.eq(e).find("td, th");return o.forEach(function(e){n[e].elementIndex&&r.eq(n[e].elementIndex.colIndex).addClass("te-cell-selected")})})}},{key:"onDragStart",value:function(e){var t=$(e).closest("[contenteditable=true] table");this._tableData=f.default.createTableData(t)}},{key:"onDragEnd",value:function(){this._tableData=null}},{key:"highlightTableCellsBy",value:function(e,t){var n=$(e),r=$(t),a=n.closest("[contenteditable=true] table"),o=h.default.findSelectionRange(this._tableData,n,r);this.removeClassAttrbuteFromAllCellsIfNeed(),this._addClassToSelectedCells(a,this._tableData,o)}},{key:"styleToSelectedCells",value:function(e){var t=this.wwe.getEditor(),n=t.getSelection().cloneRange();$(n.startContainer).closest("[contenteditable=true] table").find("tr").get().forEach(function(r){var a=$(r).find(".te-cell-selected"),o=a.first().get(0),i=a.last().get(0);a.length&&(n.setStart(o,0),n.setEnd(i,i.childNodes.length),t.setSelection(n),e(t))})}},{key:"hasSelectedBothThAndTd",value:function(e){return e=e||this.getSelectedCells(),e.first()[0].nodeName!==e.last()[0].nodeName}}]),t}(u.default);t.default=v},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=tui,i=o.util,l=function(){function e(){r(this,e),this.globalTOID=null,this.lazyRunFunctions={}}return a(e,[{key:"run",value:function(e,t,n,r){var a=void 0;return i.isString(e)?a=this._runRegisteredRun(e,t,n,r):(a=this._runSingleRun(e,t,n,r,this.globalTOID),this.globalTOID=a),a}},{key:"registerLazyRunFunction",value:function(e,t,n,r){r=r||this,this.lazyRunFunctions[e]={fn:t,delay:n,context:r,TOID:null}}},{key:"_runSingleRun",value:function(e,t,n,r,a){return this._clearTOIDIfNeed(a),a=setTimeout(function(){e.call(n,t)},r)}},{key:"_runRegisteredRun",value:function(e,t,n,r){var a=this.lazyRunFunctions[e],o=a.fn,i=a.TOID;return r=r||a.delay,n=n||a.context,i=this._runSingleRun(o,t,n,r,i),a.TOID=i,i}},{key:"_clearTOIDIfNeed",value:function(e){e&&clearTimeout(e)}}]),e}();e.exports=l},function(e,t,n){"use strict";function r(e){switch(e){case 9:case 32:return!0}return!1}e.exports=function(e,t,n,a){var o,i,l,s,u,c,f,d,h,g,p,v,m,b,y,w,_=/(?:-|\*|\d+\.) {1,4}(?:> {0,3})[^>]*$/,k=e.src.split("\n"),x=k[t],T=e.bMarks[t]+e.tShift[t],C=e.eMarks[t];if(x.match(_)||62!==e.src.charCodeAt(T++))return!1;if(a)return!0;for(32===e.src.charCodeAt(T)&&T++,c=e.blkIndent,e.blkIndent=0,h=g=e.sCount[t]+T-(e.bMarks[t]+e.tShift[t]),u=[e.bMarks[t]],e.bMarks[t]=T;T<C&&(p=e.src.charCodeAt(T),r(p));)9===p?g+=4-g%4:g++,T++;for(i=T>=C,s=[e.sCount[t]],e.sCount[t]=g-h,l=[e.tShift[t]],e.tShift[t]=T-e.bMarks[t],v=e.md.block.ruler.getRules("blockquote"),o=t+1;o<n&&!(e.sCount[o]<c)&&(T=e.bMarks[o]+e.tShift[o],C=e.eMarks[o],!(T>=C));o++)if(62!==e.src.charCodeAt(T++)){if(i)break;for(w=!1,b=0,y=v.length;b<y;b++)if(v[b](e,o,n,!0)){w=!0;break}if(w)break;u.push(e.bMarks[o]),l.push(e.tShift[o]),s.push(e.sCount[o]),e.sCount[o]=-1}else{for(32===e.src.charCodeAt(T)&&T++,h=g=e.sCount[o]+T-(e.bMarks[o]+e.tShift[o]),u.push(e.bMarks[o]),e.bMarks[o]=T;T<C&&(p=e.src.charCodeAt(T),r(p));)9===p?g+=4-g%4:g++,T++;i=T>=C,s.push(e.sCount[o]),e.sCount[o]=g-h,l.push(e.tShift[o]),e.tShift[o]=T-e.bMarks[o]}for(f=e.parentType,e.parentType="blockquote",m=e.push("blockquote_open","blockquote",1),m.markup=">",m.map=d=[t,0],e.md.block.tokenize(e,t,o),m=e.push("blockquote_close","blockquote",-1),m.markup=">",e.parentType=f,d[1]=e.line,b=0;b<l.length;b++)e.bMarks[b+t]=u[b],e.tShift[b+t]=l[b],e.sCount[b+t]=s[b];return e.blkIndent=c,!0}},function(e,t,n){"use strict";function r(e,t,n){var r=e.attrIndex(t),a=[t,n];r<0?e.attrPush(a):e.attrs[r]=a}function a(e){return!0===e.block&&"code"===e.tag&&"fence"===e.type}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var i=function(e){e.core.ruler.after("block","tui-code-block",function(e){var t,n,i=e.tokens;for(n=0;n<i.length;n+=1)t=i[n],a(t)&&t.info&&r(t,"data-language",o(t.info.replace(" ",""),!0))})};e.exports=i},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,a,o,i=/ {0,3}(?:-|\*|\d\.) /,l=e.src.split("\n"),s=l[t],u=0;if(s.match(i)||e.sCount[t]-e.blkIndent<4)return!1;for(a=r=t+1;r<n;)if(e.isEmpty(r)){if(++u>=2&&"list"===e.parentType)break;r++}else{if(u=0,!(e.sCount[r]-e.blkIndent>=4))break;r++,a=r}return e.line=a,o=e.push("code_block","code",0),o.content=e.getLines(t,a,4+e.blkIndent,!0),o.map=[t,e.line],!0}},function(e,t,n){"use strict";var r=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],a=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^<("+r.join("|")+")","i"),/^\/?>$/,!0],[new RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|pre|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)\s*$/,/^$/,!1]];e.exports=function(e,t,n,r){var o,i,l,s,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(u))return!1;for(s=e.src.slice(u,c),o=0;o<a.length;o++)if(a[o][0].test(s)){if(5===o)return!1;break}if(o===a.length)return!1;if(r)return a[o][2];if(i=t+1,!a[o][1].test(s))for(;i<n&&!(e.sCount[i]<e.blkIndent);i++)if(u=e.bMarks[i]+e.tShift[i],c=e.eMarks[i],s=e.src.slice(u,c),a[o][1].test(s)){0!==s.length&&i++;break}return e.line=i,l=e.push("html_block","",0),l.map=[t,i],l.content=e.getLines(t,i,e.blkIndent,!0),!0}},function(e,t,n){"use strict";function r(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function a(e){var t,n=[],r=0,a=e.length,o=0,i=0,l=!1,s=0;for(t=e.charCodeAt(r);r<a;)96===t&&o%2==0?(l=!l,s=r):124!==t||o%2!=0||l?92===t?o+=1:o=0:(n.push(e.substring(i,r)),i=r+1),r+=1,r===a&&l&&(l=!1,r=s+1),t=e.charCodeAt(r);return n.push(e.substring(i)),n}e.exports=function(e,t,n,o){var i,l,s,u,c,f,d,h,g,p,v,m,b;if(t+2>n)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if((s=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(i=e.src.charCodeAt(s))&&45!==i&&58!==i)return!1;if(l=r(e,t+1),!/^[-:| ]+$/.test(l))return!1;for(f=l.split("|"),g=[],u=0;u<f.length;u+=1){if(!(v=f[u].trim())){if(0===u||u===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?g.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?g.push("left"):g.push("")}if(p=g.length,l=r(e,t).trim(),-1===l.indexOf("|"))return!1;if(f=a(l.replace(/^\||\|$/g,"")),(d=f.length)>p)return!1;if(d<p){for(u=0;u<p-d;u+=1)f.push("");d=f.length}if(o)return!0;for(h=e.push("table_open","table",1),h.map=m=[t,0],h=e.push("thead_open","thead",1),h.map=[t,t+1],h=e.push("tr_open","tr",1),h.map=[t,t+1],u=0;u<d;u+=1)h=e.push("th_open","th",1),h.map=[t,t+1],g[u]&&(h.attrs=[["align",g[u]]]),h=e.push("inline","",0),h.content=f[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),h=e.push("tbody_open","tbody",1),h.map=b=[t+2,0],c=t+2;c<n&&!(e.sCount[c]<e.blkIndent)&&(l=r(e,c),-1!==l.indexOf("|"));c+=1){for(f=a(l.replace(/^\||\|\s*$/g,"")),h=e.push("tr_open","tr",1),u=0;u<d;u+=1)h=e.push("td_open","td",1),g[u]&&(h.attrs=[["align",g[u]]]),h=e.push("inline","",0),h.content=f[u]?f[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),m[1]=b[1]=c,e.line=c,!0}},function(e,t,n){"use strict";function r(e){e.content=e.content.slice(4),e.children[0].content=e.children[0].content.slice(4)}function a(e){var t=!1;return 0!==e.content.indexOf("[x]")&&0!==e.content.indexOf("[X]")||(t=!0),t}function o(e,t,n){var r=e.attrIndex(t),a=[t,n];r<0?e.attrPush(a):e.attrs[r]=a}function i(e,t){return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===e[t].content.indexOf("[ ]")||0===e[t].content.indexOf("[x]")||0===e[t].content.indexOf("[X]"))}var l=function(e){e.core.ruler.after("inline","tui-task-list",function(e){var t,n,l=e.tokens;for(n=2;n<l.length;n+=1)i(l,n)&&(t=a(l[n])?"task-list-item checked":"task-list-item",r(l[n]),o(l[n-2],"class",t),o(l[n-2],"data-te-task",""))})};e.exports=l},function(e,t,n){"use strict";function r(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.Diff,r.prototype.diff_main=function(e,t,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var a=r;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[0,e]]:[];void 0===n&&(n=!0);var o=n,i=this.diff_commonPrefix(e,t),l=e.substring(0,i);e=e.substring(i),t=t.substring(i),i=this.diff_commonSuffix(e,t);var s=e.substring(e.length-i);e=e.substring(0,e.length-i),t=t.substring(0,t.length-i);var u=this.diff_compute_(e,t,o,a);return l&&u.unshift([0,l]),s&&u.push([0,s]),this.diff_cleanupMerge(u),u},r.prototype.diff_compute_=function(e,t,n,r){var a;if(!e)return[[1,t]];if(!t)return[[-1,e]];var o=e.length>t.length?e:t,i=e.length>t.length?t:e,l=o.indexOf(i);if(-1!=l)return a=[[1,o.substring(0,l)],[0,i],[1,o.substring(l+i.length)]],e.length>t.length&&(a[0][0]=a[2][0]=-1),a;if(1==i.length)return[[-1,e],[1,t]];var s=this.diff_halfMatch_(e,t);if(s){var u=s[0],c=s[1],f=s[2],d=s[3],h=s[4],g=this.diff_main(u,f,n,r),p=this.diff_main(c,d,n,r);return g.concat([[0,h]],p)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)},r.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var a=r.lineArray,o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,a),this.diff_cleanupSemantic(o),o.push([0,""]);for(var i=0,l=0,s=0,u="",c="";i<o.length;){switch(o[i][0]){case 1:s++,c+=o[i][1];break;case-1:l++,u+=o[i][1];break;case 0:if(l>=1&&s>=1){o.splice(i-l-s,l+s),i=i-l-s;for(var r=this.diff_main(u,c,!1,n),f=r.length-1;f>=0;f--)o.splice(i,0,r[f]);i+=r.length}s=0,l=0,u="",c=""}i++}return o.pop(),o},r.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,a=t.length,o=Math.ceil((r+a)/2),i=o,l=2*o,s=new Array(l),u=new Array(l),c=0;c<l;c++)s[c]=-1,u[c]=-1;s[i+1]=0,u[i+1]=0;for(var f=r-a,d=f%2!=0,h=0,g=0,p=0,v=0,m=0;m<o&&!((new Date).getTime()>n);m++){for(var b=-m+h;b<=m-g;b+=2){var y,w=i+b;y=b==-m||b!=m&&s[w-1]<s[w+1]?s[w+1]:s[w-1]+1;for(var _=y-b;y<r&&_<a&&e.charAt(y)==t.charAt(_);)y++,_++;if(s[w]=y,y>r)g+=2;else if(_>a)h+=2;else if(d){var k=i+f-b;if(k>=0&&k<l&&-1!=u[k]){var x=r-u[k];if(y>=x)return this.diff_bisectSplit_(e,t,y,_,n)}}}for(var T=-m+p;T<=m-v;T+=2){var x,k=i+T;x=T==-m||T!=m&&u[k-1]<u[k+1]?u[k+1]:u[k-1]+1;for(var C=x-T;x<r&&C<a&&e.charAt(r-x-1)==t.charAt(a-C-1);)x++,C++;if(u[k]=x,x>r)v+=2;else if(C>a)p+=2;else if(!d){var w=i+f-T;if(w>=0&&w<l&&-1!=s[w]){var y=s[w],_=i+y-w;if(x=r-x,y>=x)return this.diff_bisectSplit_(e,t,y,_,n)}}}}return[[-1,e],[1,t]]},r.prototype.diff_bisectSplit_=function(e,t,n,r,a){var o=e.substring(0,n),i=t.substring(0,r),l=e.substring(n),s=t.substring(r),u=this.diff_main(o,i,!1,a),c=this.diff_main(l,s,!1,a);return u.concat(c)},r.prototype.diff_linesToChars_=function(e,t){function n(e){for(var t="",n=0,o=-1,i=r.length;o<e.length-1;){o=e.indexOf("\n",n),-1==o&&(o=e.length-1);var l=e.substring(n,o+1);n=o+1,(a.hasOwnProperty?a.hasOwnProperty(l):void 0!==a[l])?t+=String.fromCharCode(a[l]):(t+=String.fromCharCode(i),a[l]=i,r[i++]=l)}return t}var r=[],a={};return r[0]="",{chars1:n(e),chars2:n(t),lineArray:r}},r.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],a=[],o=0;o<r.length;o++)a[o]=t[r.charCodeAt(o)];e[n][1]=a.join("")}},r.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,o=0;n<a;)e.substring(o,a)==t.substring(o,a)?(n=a,o=n):r=a,a=Math.floor((r-n)/2+n);return a},r.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),a=r,o=0;n<a;)e.substring(e.length-a,e.length-o)==t.substring(t.length-a,t.length-o)?(n=a,o=n):r=a,a=Math.floor((r-n)/2+n);return a},r.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var a=Math.min(n,r);if(e==t)return a;for(var o=0,i=1;;){var l=e.substring(a-i),s=t.indexOf(l);if(-1==s)return o;i+=s,0!=s&&e.substring(a-i)!=t.substring(0,i)||(o=i,i++)}},r.prototype.diff_halfMatch_=function(e,t){function n(e,t,n){for(var r,a,o,l,s=e.substring(n,n+Math.floor(e.length/4)),u=-1,c="";-1!=(u=t.indexOf(s,u+1));){var f=i.diff_commonPrefix(e.substring(n),t.substring(u)),d=i.diff_commonSuffix(e.substring(0,n),t.substring(0,u));c.length<d+f&&(c=t.substring(u-d,u)+t.substring(u,u+f),r=e.substring(0,n-d),a=e.substring(n+f),o=t.substring(0,u-d),l=t.substring(u+f))}return 2*c.length>=e.length?[r,a,o,l,c]:null}if(this.Diff_Timeout<=0)return null;var r=e.length>t.length?e:t,a=e.length>t.length?t:e;if(r.length<4||2*a.length<r.length)return null;var o,i=this,l=n(r,a,Math.ceil(r.length/4)),s=n(r,a,Math.ceil(r.length/2));if(!l&&!s)return null;o=s?l&&l[4].length>s[4].length?l:s:l;var u,c,f,d;return e.length>t.length?(u=o[0],c=o[1],f=o[2],d=o[3]):(f=o[0],d=o[1],u=o[2],c=o[3]),[u,c,f,d,o[4]]},r.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,a=null,o=0,i=0,l=0,s=0,u=0;o<e.length;)0==e[o][0]?(n[r++]=o,i=s,l=u,s=0,u=0,a=e[o][1]):(1==e[o][0]?s+=e[o][1].length:u+=e[o][1].length,a&&a.length<=Math.max(i,l)&&a.length<=Math.max(s,u)&&(e.splice(n[r-1],0,[-1,a]),e[n[r-1]+1][0]=1,r--,r--,o=r>0?n[r-1]:-1,i=0,l=0,s=0,u=0,a=null,t=!0)),o++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(-1==e[o-1][0]&&1==e[o][0]){var c=e[o-1][1],f=e[o][1],d=this.diff_commonOverlap_(c,f),h=this.diff_commonOverlap_(f,c);d>=h?(d>=c.length/2||d>=f.length/2)&&(e.splice(o,0,[0,f.substring(0,d)]),e[o-1][1]=c.substring(0,c.length-d),e[o+1][1]=f.substring(d),o++):(h>=c.length/2||h>=f.length/2)&&(e.splice(o,0,[0,c.substring(0,h)]),e[o-1][0]=1,e[o-1][1]=f.substring(0,f.length-h),e[o+1][0]=-1,e[o+1][1]=c.substring(h),o++),o++}o++}},r.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),a=t.charAt(0),o=n.match(r.nonAlphaNumericRegex_),i=a.match(r.nonAlphaNumericRegex_),l=o&&n.match(r.whitespaceRegex_),s=i&&a.match(r.whitespaceRegex_),u=l&&n.match(r.linebreakRegex_),c=s&&a.match(r.linebreakRegex_),f=u&&e.match(r.blanklineEndRegex_),d=c&&t.match(r.blanklineStartRegex_);return f||d?5:u||c?4:o&&!l&&s?3:l||s?2:o||i?1:0}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var a=e[n-1][1],o=e[n][1],i=e[n+1][1],l=this.diff_commonSuffix(a,o);if(l){var s=o.substring(o.length-l);a=a.substring(0,a.length-l),o=s+o.substring(0,o.length-l),i=s+i}for(var u=a,c=o,f=i,d=t(a,o)+t(o,i);o.charAt(0)===i.charAt(0);){a+=o.charAt(0),o=o.substring(1)+i.charAt(0),i=i.substring(1);var h=t(a,o)+t(o,i);h>=d&&(d=h,u=a,c=o,f=i)}e[n-1][1]!=u&&(u?e[n-1][1]=u:(e.splice(n-1,1),n--),e[n][1]=c,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,a=null,o=0,i=!1,l=!1,s=!1,u=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(s||u)?(n[r++]=o,i=s,l=u,a=e[o][1]):(r=0,a=null),s=u=!1):(-1==e[o][0]?u=!0:s=!0,a&&(i&&l&&s&&u||a.length<this.Diff_EditCost/2&&i+l+s+u==3)&&(e.splice(n[r-1],0,[-1,a]),e[n[r-1]+1][0]=1,r--,a=null,i&&l?(s=u=!0,r=0):(r--,o=r>0?n[r-1]:-1,s=u=!1),t=!0)),o++;t&&this.diff_cleanupMerge(e)},r.prototype.diff_cleanupMerge=function(e){e.push([0,""]);for(var t,n=0,r=0,a=0,o="",i="";n<e.length;)switch(e[n][0]){case 1:a++,i+=e[n][1],n++;break;case-1:r++,o+=e[n][1],n++;break;case 0:r+a>1?(0!==r&&0!==a&&(t=this.diff_commonPrefix(i,o),0!==t&&(n-r-a>0&&0==e[n-r-a-1][0]?e[n-r-a-1][1]+=i.substring(0,t):(e.splice(0,0,[0,i.substring(0,t)]),n++),i=i.substring(t),o=o.substring(t)),0!==(t=this.diff_commonSuffix(i,o))&&(e[n][1]=i.substring(i.length-t)+e[n][1],i=i.substring(0,i.length-t),o=o.substring(0,o.length-t))),0===r?e.splice(n-a,r+a,[1,i]):0===a?e.splice(n-r,r+a,[-1,o]):e.splice(n-r-a,r+a,[-1,o],[1,i]),n=n-r-a+(r?1:0)+(a?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,a=0,r=0,o="",i=""}""===e[e.length-1][1]&&e.pop();var l=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},r.prototype.diff_xIndex=function(e,t){var n,r=0,a=0,o=0,i=0;for(n=0;n<e.length&&(1!==e[n][0]&&(r+=e[n][1].length),-1!==e[n][0]&&(a+=e[n][1].length),!(r>t));n++)o=r,i=a;return e.length!=n&&-1===e[n][0]?i:i+(t-o)},r.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,a=/>/g,o=/\n/g,i=0;i<e.length;i++){var l=e[i][0],s=e[i][1],u=s.replace(n,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(o,"&para;<br>");switch(l){case 1:t[i]='<ins style="background:#e6ffe6;">'+u+"</ins>";break;case-1:t[i]='<del style="background:#ffe6e6;">'+u+"</del>";break;case 0:t[i]="<span>"+u+"</span>"}}return t.join("")},r.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},r.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},r.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,a=0;a<e.length;a++){var o=e[a][0],i=e[a][1];switch(o){case 1:n+=i.length;break;case-1:r+=i.length;break;case 0:t+=Math.max(n,r),n=0,r=0}}return t+=Math.max(n,r)},r.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,a=0,o=t.split(/\t/g),i=0;i<o.length;i++){var l=o[i].substring(1);switch(o[i].charAt(0)){case"+":try{n[r++]=[1,decodeURI(l)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var s=parseInt(l,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+l);var u=e.substring(a,a+=s);"="==o[i].charAt(0)?n[r++]=[0,u]:n[r++]=[-1,u];break;default:if(o[i])throw new Error("Invalid diff operation in diff_fromDelta: "+o[i])}}if(a!=e.length)throw new Error("Delta length ("+a+") does not equal source text length ("+e.length+").");return n},r.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},r.prototype.match_bitap_=function(e,t,n){function r(e,r){var a=e/t.length,i=Math.abs(n-r);return o.Match_Distance?a+i/o.Match_Distance:i?1:a}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(t),o=this,i=this.Match_Threshold,l=e.indexOf(t,n);-1!=l&&(i=Math.min(r(0,l),i),-1!=(l=e.lastIndexOf(t,n+t.length))&&(i=Math.min(r(0,l),i)));var s=1<<t.length-1;l=-1;for(var u,c,f,d=t.length+e.length,h=0;h<t.length;h++){for(u=0,c=d;u<c;)r(h,n+c)<=i?u=c:d=c,c=Math.floor((d-u)/2+u);d=c;var g=Math.max(1,n-c+1),p=Math.min(n+c,e.length)+t.length,v=Array(p+2);v[p+1]=(1<<h)-1;for(var m=p;m>=g;m--){var b=a[e.charAt(m-1)];if(v[m]=0===h?(v[m+1]<<1|1)&b:(v[m+1]<<1|1)&b|(f[m+1]|f[m])<<1|1|f[m+1],v[m]&s){var y=r(h,m-1);if(y<=i){if(i=y,!((l=m-1)>n))break;g=Math.max(1,2*n-l)}}}if(r(h+1,n)>i)break;f=v}return l},r.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},r.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var a=t.substring(e.start2-r,e.start2);a&&e.diffs.unshift([0,a]);var o=t.substring(e.start2+e.length1,e.start2+e.length1+r);o&&e.diffs.push([0,o]),e.start1-=a.length,e.start2-=a.length,e.length1+=a.length+o.length,e.length2+=a.length+o.length}},r.prototype.patch_make=function(e,t,n){var o,i;if("string"==typeof e&&"string"==typeof t&&void 0===n)o=e,i=this.diff_main(o,t,!0),i.length>2&&(this.diff_cleanupSemantic(i),this.diff_cleanupEfficiency(i));else if(e&&"object"==(void 0===e?"undefined":a(e))&&void 0===t&&void 0===n)i=e,o=this.diff_text1(i);else if("string"==typeof e&&t&&"object"==(void 0===t?"undefined":a(t))&&void 0===n)o=e,i=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=(void 0===n?"undefined":a(n)))throw new Error("Unknown call format to patch_make.");o=e,i=n}if(0===i.length)return[];for(var l=[],s=new r.patch_obj,u=0,c=0,f=0,d=o,h=o,g=0;g<i.length;g++){var p=i[g][0],v=i[g][1];switch(u||0===p||(s.start1=c,s.start2=f),p){case 1:s.diffs[u++]=i[g],s.length2+=v.length,h=h.substring(0,f)+v+h.substring(f);break;case-1:s.length1+=v.length,s.diffs[u++]=i[g],h=h.substring(0,f)+h.substring(f+v.length);break;case 0:v.length<=2*this.Patch_Margin&&u&&i.length!=g+1?(s.diffs[u++]=i[g],s.length1+=v.length,s.length2+=v.length):v.length>=2*this.Patch_Margin&&u&&(this.patch_addContext_(s,d),l.push(s),s=new r.patch_obj,u=0,d=h,c=f)}1!==p&&(c+=v.length),-1!==p&&(f+=v.length)}return u&&(this.patch_addContext_(s,d),l.push(s)),l},r.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],o=new r.patch_obj;o.diffs=[];for(var i=0;i<a.diffs.length;i++)o.diffs[i]=a.diffs[i].slice();o.start1=a.start1,o.start2=a.start2,o.length1=a.length1,o.length2=a.length2,t[n]=o}return t},r.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,a=[],o=0;o<e.length;o++){var i,l=e[o].start2+r,s=this.diff_text1(e[o].diffs),u=-1;if(s.length>this.Match_MaxBits?-1!=(i=this.match_main(t,s.substring(0,this.Match_MaxBits),l))&&(-1==(u=this.match_main(t,s.substring(s.length-this.Match_MaxBits),l+s.length-this.Match_MaxBits))||i>=u)&&(i=-1):i=this.match_main(t,s,l),-1==i)a[o]=!1,r-=e[o].length2-e[o].length1;else{a[o]=!0,r=i-l;var c;if(c=-1==u?t.substring(i,i+s.length):t.substring(i,u+this.Match_MaxBits),s==c)t=t.substring(0,i)+this.diff_text2(e[o].diffs)+t.substring(i+s.length);else{var f=this.diff_main(s,c,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(f)/s.length>this.Patch_DeleteThreshold)a[o]=!1;else{this.diff_cleanupSemanticLossless(f);for(var d,h=0,g=0;g<e[o].diffs.length;g++){var p=e[o].diffs[g];0!==p[0]&&(d=this.diff_xIndex(f,h)),1===p[0]?t=t.substring(0,i+d)+p[1]+t.substring(i+d):-1===p[0]&&(t=t.substring(0,i+d)+t.substring(i+this.diff_xIndex(f,h+p[1].length))),-1!==p[0]&&(h+=p[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,a]},r.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var a=e[0],o=a.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),a.start1-=t,a.start2-=t,a.length1+=t,a.length2+=t;else if(t>o[0][1].length){var i=t-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],a.start1-=i,a.start2-=i,a.length1+=i,a.length2+=i}if(a=e[e.length-1],o=a.diffs,0==o.length||0!=o[o.length-1][0])o.push([0,n]),a.length1+=t,a.length2+=t;else if(t>o[o.length-1][1].length){var i=t-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,i),a.length1+=i,a.length2+=i}return n},r.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var a=e[n];e.splice(n--,1);for(var o=a.start1,i=a.start2,l="";0!==a.diffs.length;){var s=new r.patch_obj,u=!0;for(s.start1=o-l.length,s.start2=i-l.length,""!==l&&(s.length1=s.length2=l.length,s.diffs.push([0,l]));0!==a.diffs.length&&s.length1<t-this.Patch_Margin;){var c=a.diffs[0][0],f=a.diffs[0][1];1===c?(s.length2+=f.length,i+=f.length,s.diffs.push(a.diffs.shift()),u=!1):-1===c&&1==s.diffs.length&&0==s.diffs[0][0]&&f.length>2*t?(s.length1+=f.length,o+=f.length,u=!1,s.diffs.push([c,f]),a.diffs.shift()):(f=f.substring(0,t-s.length1-this.Patch_Margin),s.length1+=f.length,o+=f.length,0===c?(s.length2+=f.length,i+=f.length):u=!1,s.diffs.push([c,f]),f==a.diffs[0][1]?a.diffs.shift():a.diffs[0][1]=a.diffs[0][1].substring(f.length))}l=this.diff_text2(s.diffs),l=l.substring(l.length-this.Patch_Margin);var d=this.diff_text1(a.diffs).substring(0,this.Patch_Margin);""!==d&&(s.length1+=d.length,s.length2+=d.length,0!==s.diffs.length&&0===s.diffs[s.diffs.length-1][0]?s.diffs[s.diffs.length-1][1]+=d:s.diffs.push([0,d])),u||e.splice(++n,0,s)}}},r.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},r.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split("\n"),a=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;a<n.length;){var i=n[a].match(o);if(!i)throw new Error("Invalid patch string: "+n[a]);var l=new r.patch_obj;for(t.push(l),l.start1=parseInt(i[1],10),""===i[2]?(l.start1--,l.length1=1):"0"==i[2]?l.length1=0:(l.start1--,l.length1=parseInt(i[2],10)),l.start2=parseInt(i[3],10),""===i[4]?(l.start2--,l.length2=1):"0"==i[4]?l.length2=0:(l.start2--,l.length2=parseInt(i[4],10)),a++;a<n.length;){var s=n[a].charAt(0);try{var u=decodeURI(n[a].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==s)l.diffs.push([-1,u]);else if("+"==s)l.diffs.push([1,u]);else if(" "==s)l.diffs.push([0,u]);else{if("@"==s)break;if(""!==s)throw new Error('Invalid patch mode "'+s+'" in: '+u)}a++}}return t},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,r=["@@ -"+e+" +"+t+" @@\n"],a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}r[a+1]=n+encodeURI(this.diffs[a][1])+"\n"}return r.join("").replace(/%20/g," ")},e.exports=r},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=n(22),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n(13),n(10),n(11),n(12),n(9),window.tui=window.tui||{},window.tui.EditorViewOnly=o.default,$.fn.tuiEditorViewOnly=function(){var e=void 0,t=void 0,n=this.get(0);if(n){for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];if(e=i[0]||{},t=$.data(n,"tuiEditorViewOnly")){if("string"==typeof e){var s;return(s=t)[e].apply(s,r(i.slice(1)))}}else e.el=n,t=new o.default(e),$.data(n,"tuiEditorViewOnly",t)}return this}}]);